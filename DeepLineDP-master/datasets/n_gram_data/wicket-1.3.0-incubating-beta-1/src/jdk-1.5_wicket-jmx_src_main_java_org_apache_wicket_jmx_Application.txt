/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket jmx
import java io ioexception
import org apache wicket protocol http webapplication
import org apache wicket request irequestcodingstrategy
import org apache wicket request irequesttargetmountsinfo
import org apache wicket request target coding imountablerequesttargeturlcodingstrategy
import org apache wicket request target coding irequesttargeturlcodingstrategy
/**
* exposes application related functionality for jmx.
*
* @author eelcohillenius
*/
public class application implements applicationmbean
private final org apache wicket application application
private final webapplication webapplication
/**
* create.
*
* @param application
*/
public application org apache wicket application application
this application   application
// do this so that we don't have to cast all the time
if  application instanceof webapplication
this webapplication    webapplication application
else
this webapplication   null
/**
* @see org.apache.wicket.jmx.applicationmbean#clearmarkupcache()
*/
public void clearmarkupcache   throws ioexception
application getmarkupcache   clear
/**
* @see org.apache.wicket.jmx.applicationmbean#getapplicationclass()
*/
public string getapplicationclass   throws ioexception
return application getclass   getname
/**
* @see org.apache.wicket.jmx.applicationmbean#getconfigurationtype()
*/
public string getconfigurationtype
return application getconfigurationtype
/**
* @see org.apache.wicket.jmx.applicationmbean#gethomepageclass()
*/
public string gethomepageclass   throws ioexception
return application getclass   getname
/**
* @see org.apache.wicket.jmx.applicationmbean#getmarkupcachesize()
*/
public int getmarkupcachesize   throws ioexception
return application getmarkupcache   size
/**
* @see org.apache.wicket.jmx.applicationmbean#getmounts()
*/
public string getmounts   throws ioexception
if  webapplication    null
irequestcodingstrategy mounter   webapplication getrequestcycleprocessor
getrequestcodingstrategy
if  mounter instanceof irequesttargetmountsinfo
irequesttargetmountsinfo mountsinfo    irequesttargetmountsinfo mounter
irequesttargeturlcodingstrategy targets   mountsinfo listmounts
string results   new string
for  int i   0  i < targets length  i
if  targets instanceof imountablerequesttargeturlcodingstrategy
// ugly hack for 1.2 to avoid breaking the api
results     imountablerequesttargeturlcodingstrategy targets
getmountpath
targets tostring
else
// should never happen, but to be sure
results       targets tostring
return results
return null
/**
* @see org.apache.wicket.jmx.applicationmbean#getwicketversion()
*/
public string getwicketversion   throws ioexception
return application getframeworksettings   getversion