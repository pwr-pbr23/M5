/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket markup transformer
import org apache wicket attributemodifier
import org apache wicket component
import org apache wicket model imodel
import org apache wicket model model
/**
* a container which output markup will be processes by a xslt processor prior
* to writing the output into the web response. the *.xsl resource must be
* located in the same path as the nearest parent with an associated markup and
* must have a filename equal to the component's id.
* <p>
* the containers tag will be the root element of the xml data applied for
* transformation to ensure the xml data are well formed (single root element).
* in addition the attribute
* <code>xmlns:wicket="http://wicket.apache.org"</code> is added to the
* root element to allow the xsl processor to handle the wicket namespace.
* <p>
* similar to this container, a <code>ibehavior</code> is available which does
* the same, but does not require an additional container.
*
* @see org.apache.wicket.markup.transformer.xslttransfomerbehavior
*
* @author juergen donnerstag
*/
public class xsltoutputtransformercontainer extends abstractoutputtransformercontainer
private static final long serialversionuid   1l
/** an optional xsl file path */
private final string xslfile
/**
* instead of using the default mechanism to determine the associated xsl
* file, it is given by the user.
*
* @see org.apache.wicket.component#component(string, imodel)
*
* @param xslfilepath
*            xsl input file path
*/
public xsltoutputtransformercontainer final string id  final imodel model
final string xslfilepath
super id
this xslfile   xslfilepath
// the containers tag will be transformed as well. thus we make sure
// that
// the xml provided to the xsl processor is well formed (has a single
// root element)
settransformbodyonly false
// make the xslt processor happy and allow him to handle the wicket
// tags and attributes which are in the wicket namespace
add new attributemodifier    true  new model
/**
* construct
*
* @see org.apache.wicket.component#component(string, imodel)
*/
public xsltoutputtransformercontainer final string id  final imodel model
this id  model  null
/**
* construct
*
* @see org.apache.wicket.component#component(string)
*/
public xsltoutputtransformercontainer final string id
this id  null  null
/**
*
* @see org.apache.wicket.markupcontainer#getmarkuptype()
*/
public string getmarkuptype
return
/**
*
* @see org.apache.wicket.markup.transformer.itransformer#transform(org.apache.wicket.component,
*      java.lang.string)
*/
public charsequence transform final component component  final string output  throws exception
return new xslttransformer this xslfile  transform component  output