/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket examples forminput
import java net malformedurlexception
import java net url
import java util arrays
import java util list
import java util locale
import org apache wicket examples wicketexamplepage
import org apache wicket extensions yui calendar datetimefield
import org apache wicket markup html basic label
import org apache wicket markup html form button
import org apache wicket markup html form check
import org apache wicket markup html form checkbox
import org apache wicket markup html form checkgroup
import org apache wicket markup html form choicerenderer
import org apache wicket markup html form dropdownchoice
import org apache wicket markup html form form
import org apache wicket markup html form listmultiplechoice
import org apache wicket markup html form radio
import org apache wicket markup html form radiochoice
import org apache wicket markup html form radiogroup
import org apache wicket markup html form requiredtextfield
import org apache wicket markup html form textfield
import org apache wicket markup html link link
import org apache wicket markup html list listitem
import org apache wicket markup html list listview
import org apache wicket markup html panel feedbackpanel
import org apache wicket model compoundpropertymodel
import org apache wicket model model
import org apache wicket model propertymodel
import org apache wicket protocol http webrequest
import org apache wicket util convert conversionexception
import org apache wicket util convert iconverter
import org apache wicket util convert maskconverter
import org apache wicket validation validator numbervalidator
/**
* example for form input.
*
* @author eelco hillenius
* @author jonathan locke
*/
public class forminput extends wicketexamplepage
/**
* form for collecting input.
*/
private class inputform extends form
/**
* construct.
*
* @param name
*            component name
*/
public inputform string name
super name  new compoundpropertymodel new forminputmodel
// dropdown for selecting locale
add new localedropdownchoice
// link to return to default locale
add new link
public void onclick
webrequest request    webrequest getrequest
setlocale request getlocale
requiredtextfield stringtextfield   new requiredtextfield
stringtextfield setlabel new model
add stringtextfield
requiredtextfield integertextfield   new requiredtextfield
integer class
add integertextfield add numbervalidator positive
add new requiredtextfield    double class
add new datetimefield
// add(datetextfield.forshortstyle("dateproperty").add(new
// datepicker()));
add new requiredtextfield    integer class  add numbervalidator
range 0  100
add new checkbox
add new multiply
add new label    new propertymodel getmodel
setcomponentborder new beforeandafterborder
radiochoice rc   new radiochoice    numbers  setsuffix
rc setlabel new model
rc setrequired true
add rc
radiogroup group   new radiogroup
add group
listview persons   new listview    numbers
protected void populateitem listitem item
item add new radio    item getmodel
item add new label    item getmodelobjectasstring
group add persons
checkgroup checks   new checkgroup
add checks
listview checkslist   new listview    numbers
protected void populateitem listitem item
item add new check    item getmodel
item add new label    item getmodelobjectasstring
checks add checkslist
add new listmultiplechoice    sites
// textfield using a custom converter.
add new textfield    url class
public iconverter getconverter final class type
return new iconverter
public object converttoobject string value  locale locale
try
return new url value tostring
catch  malformedurlexception e
throw new conversionexception     value
public string converttostring object value  locale locale
return value    null ? value tostring     null
// textfield using a mask converter
add new textfield    usphonenumber class
public iconverter getconverter final class   <?>   type
// us telephone number mask
return new maskconverter    usphonenumber class
// and this is to show we can nest listviews in forms too
add new lineslistview
add new button
add new button
public void onsubmit
// just call modelchanged so that any invalid input is
// cleared.
inputform this modelchanged
/**
* @see org.apache.wicket.markup.html.form.form#onsubmit()
*/
public void onsubmit
// form validation successful. display message showing edited model.
info     getmodelobject
/** list view to be nested in the form. */
private static final class lineslistview extends listview
/**
* construct.
*
* @param id
*/
public lineslistview string id
super id
// always do this in forms!
setreuseitems true
protected void populateitem listitem item
// add a text field that works on each list item model (returns
// objects of
// type forminputmodel.line) using property text.
item add new textfield    new propertymodel item getmodel
/**
* choice for a locale.
*/
private final class localechoicerenderer extends choicerenderer
/**
* constructor.
*/
public localechoicerenderer
/**
* @see org.apache.wicket.markup.html.form.ichoicerenderer#getdisplayvalue(object)
*/
public object getdisplayvalue object object
locale locale    locale object
string display   locale getdisplayname getlocale
return display
/**
* dropdown with locales.
*/
private final class localedropdownchoice extends dropdownchoice
/**
* construct.
*
* @param id
*            component id
*/
public localedropdownchoice string id
super id  locales  new localechoicerenderer
// set the model that gets the current locale, and that is used for
// updating the current locale to property 'locale' of forminput
setmodel new propertymodel forminput this
/**
* @see org.apache.wicket.markup.html.form.dropdownchoice#onselectionchanged(java.lang.object)
*/
public void onselectionchanged object newselection
// note that we don't have to do anything here, as our property
// model allready calls forminput.setlocale when the model is
// updated
// force re-render by setting the page to render to the bookmarkable
// instance, so that the page will be rendered from scratch,
// re-evaluating the input patterns etc
setresponsepage forminput class
/**
* @see org.apache.wicket.markup.html.form.dropdownchoice#wantonselectionchangednotifications()
*/
protected boolean wantonselectionchangednotifications
// we want roundtrips when a the user selects another item
return true
/** relevant locales wrapped in a list. */
private static final list locales   arrays aslist new locale   locale english
new locale     locale german  locale simplified_chinese  locale japanese
new locale        new locale        new locale
new locale        new locale
/** available sites for the multiple select. */
private static final list sites   arrays aslist new string
/** available numbers for the radio selection. */
static final list numbers   arrays aslist new string
/**
* constructor
*/
public forminput
// construct form and feedback panel and hook them up
final feedbackpanel feedback   new feedbackpanel
add feedback
add new inputform
/**
* sets locale for the user's session (getlocale() is inherited from
* component)
*
* @param locale
*            the new locale
*/
public void setlocale locale locale
if  locale    null
getsession   setlocale locale