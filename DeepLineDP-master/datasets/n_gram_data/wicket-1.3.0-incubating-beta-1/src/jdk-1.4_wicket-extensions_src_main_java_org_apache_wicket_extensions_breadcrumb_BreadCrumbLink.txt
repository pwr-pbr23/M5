/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket extensions breadcrumb
import org apache wicket extensions breadcrumb panel breadcrumbpanel
import org apache wicket markup html link link
import org apache wicket version undo change
/**
* a link that when clicked will set the the active
* {@link ibreadcrumbparticipant bread crumb participant} to the one that is
* returned by {@link #getparticipant(string)}. it is used internally by
* {@link breadcrumbbar the the bread crumb bar component}, and you can use it
* for rendering links e.g. with
* {@link breadcrumbpanel bread crumb panel components}.
*
* <p>
* when clicked, it registers a change for backbutton support.
* </p>
*
* @author eelco hillenius
*/
public abstract class breadcrumblink extends link
private static final long serialversionuid   1l
/** the bread crumb model. */
private final ibreadcrumbmodel breadcrumbmodel
/**
* construct.
*
* @param id
*            the link id
* @param breadcrumbmodel
*            the bread crumb model
*/
public breadcrumblink string id  ibreadcrumbmodel breadcrumbmodel
super id
this breadcrumbmodel   breadcrumbmodel
/**
* @see org.apache.wicket.markup.html.link.link#onclick()
*/
public void onclick
// get the currently active particpant
final ibreadcrumbparticipant active   breadcrumbmodel getactive
if  active    null
throw new illegalstateexception
this
// get the participant to set as active
final ibreadcrumbparticipant participant   getparticipant active getcomponent   getid
// add back button support
addstatechange new change
private static final long serialversionuid   1l
public void undo
breadcrumbmodel setactive active
// set the next participant as the active one
breadcrumbmodel setactive participant
/**
* gets the {@link ibreadcrumbparticipant bread crumb participant} to be set
* active when the link is clicked.
*
* @param componentid
*            when the participant creates it's own view, it typically
*            should use this component id for the component that is
*            returned by {@link ibreadcrumbparticipant#getcomponent()}.
* @return the bread crumb participant
*/
protected abstract ibreadcrumbparticipant getparticipant string componentid