/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket markup html form
import org apache commons logging log
import org apache commons logging logfactory
import org apache wicket markup componenttag
import org apache wicket model imodel
/**
* a password text field component. as you type, characters show up as asterisks
* or some other such character so that nobody can look over your shoulder and
* read your password.
* <p>
* by default this text field is required. if it is not, call
* {@link #setrequired(boolean)} with value of <code>false</code>.
*
* @author jonathan locke
*/
public class passwordtextfield extends textfield
private static final long serialversionuid   1l
/** log. */
private static final log log   logfactory getlog passwordtextfield class
/**
* flag indicating whether the contents of the field should be reset each
* time it is rendered. if <code>true</code>, the contents are emptied
* when the field is rendered. this is useful for login forms. if
* <code>false</code>, the contents of the model are put into the field.
* this is useful for entry forms where the contents of the model should be
* editable, or resubmitted.
*/
private boolean resetpassword   true
/**
* @see org.apache.wicket.component#component(string)
*/
public passwordtextfield final string id
super id
setrequired true
/**
* @see org.apache.wicket.component#component(string, imodel)
*/
public passwordtextfield final string id  imodel model
super id  model
setrequired true
/**
* flag indicating whether the contents of the field should be reset each
* time it is rendered. if <code>true</code>, the contents are emptied
* when the field is rendered. this is useful for login forms. if
* <code>false</code>, the contents of the model are put into the field.
* this is useful for entry forms where the contents of the model should be
* editable, or resubmitted.
*
* @return returns the resetpassword.
*/
public final boolean getresetpassword
return resetpassword
/**
* @see formcomponent#getmodelvalue()
*/
public final string getmodelvalue
final string value   getmodelobjectasstring
if  value    null
try
return getapplication   getsecuritysettings   getcryptfactory   newcrypt
encrypturlsafe value
catch  exception e
log error    e
return value
/**
* flag indicating whether the contents of the field should be reset each
* time it is rendered. if <code>true</code>, the contents are emptied
* when the field is rendered. this is useful for login forms. if
* <code>false</code>, the contents of the model are put into the field.
* this is useful for entry forms where the contents of the model should be
* editable, or resubmitted.
*
* @param resetpassword
*            the resetpassword to set.
* @return <code>this</code>.
*/
public final passwordtextfield setresetpassword final boolean resetpassword
this resetpassword   resetpassword
return this
/**
* @see org.apache.wicket.markup.html.form.formcomponent#setmodelvalue(java.lang.string[])
*/
public final void setmodelvalue string valuearray
string value   valuearray    null    valuearray length > 0 ? valuearray   null
string decryptedvalue
try
decryptedvalue   getapplication   getsecuritysettings   getcryptfactory   newcrypt
decrypturlsafe value
catch  exception e
decryptedvalue   value
log error    e
setmodelobject decryptedvalue
/**
* processes the component tag.
*
* @param tag
*            tag to modify
* @see org.apache.wicket.component#oncomponenttag(componenttag)
*/
protected final void oncomponenttag final componenttag tag
super oncomponenttag tag
tag put    getresetpassword   ?     getmodelobjectasstring
protected string getinputtype
return