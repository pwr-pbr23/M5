/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket behavior
import org apache wicket application
import org apache wicket requestcycle
import org apache wicket resourcereference
import org apache wicket markup html iheadercontributor
import org apache wicket markup html iheaderresponse
import org apache wicket markup html resources compressedresourcereference
import org apache wicket protocol http webrequestcycle
/**
* a {@link org.apache.wicket.behavior.abstractheadercontributor} behavior that is
* specialized on package resources. if you use this class, you have to
* pre-register the resources you want to contribute. a shortcut for common
* cases is to call {@link #forcss(class, string)} to contribute a package css
* file or {@link #forjavascript(class, string)} to contribute a packaged
* javascript file. for instance:
*
* <pre>
* add(headercontributor.forcss(mypanel.class, &quot;mystyle.css&quot;));
* </pre>
*
* @author eelco hillenius
* @author matej knopp
*/
public class headercontributor extends abstractheadercontributor
private static final long serialversionuid   1l
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a css file that lives in a package.
*
* @param scope
*            the scope of the package resource (typically the class of the
*            caller, or a class that lives in the package where the
*            resource lives).
* @param path
*            the path
* @return the new header contributor instance
*/
public static final headercontributor forcss final class scope  final string path
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response rendercssreference new compressedresourcereference scope  path
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a css file that lives in a package.
*
* @param scope
*            the scope of the package resource (typically the class of the
*            caller, or a class that lives in the package where the
*            resource lives).
* @param path
*            the path
* @param media
*            the media type for this css ("print", "screen", etc.)
* @return the new header contributor instance
*/
public static final headercontributor forcss final class scope  final string path
final string media
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response rendercssreference new compressedresourcereference scope  path   media
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a css file that lives in a package.
*
* @param reference
*
* @return the new header contributor instance
*/
public static final headercontributor forcss final resourcereference reference
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response rendercssreference reference
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a css file that lives in a package.
*
* @param reference
* @param media
*            the media type for this css ("print", "screen", etc.)
* @return the new header contributor instance
*/
public static final headercontributor forcss final resourcereference reference
final string media
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response rendercssreference reference  media
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a css file that lives in the web application
* directory and that is addressed relative to the context path.
*
* @param location
*            the location of the css file relative to the context path
* @return the new header contributor instance
*/
public static final headercontributor forcss final string location
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response rendercssreference returnlocationwithcontextpath location
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a css file that lives in the web application
* directory and that is addressed relative to the context path.
*
* @param location
*            the location of the css file relative to the context path
* @param media
*            the media type for this css ("print", "screen", etc.)
* @return the new header contributor instance
*/
public static final headercontributor forcss final string location  final string media
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response rendercssreference returnlocationwithcontextpath location   media
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a java script file that lives in a package.
*
* @param scope
*            the scope of the package resource (typically the class of the
*            caller, or a class that lives in the package where the
*            resource lives).
* @param path
*            the path
* @return the new header contributor instance
*/
public static final headercontributor forjavascript final class scope  final string path
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response renderjavascriptreference new compressedresourcereference scope  path
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a java script file that lives in a package.
*
* @param reference
*
* @return the new header contributor instance
*/
public static final headercontributor forjavascript final resourcereference reference
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response renderjavascriptreference reference
/**
* returns a new instance of {@link headercontributor} with a header
* contributor that references a javascript file that lives in the web
* application directory and that is addressed relative to the context path.
*
* @param location
*            the location of the css file relative to the context path
* @return the new header contributor instance
*/
public static final headercontributor forjavascript final string location
return new headercontributor new iheadercontributor
private static final long serialversionuid   1l
public void renderhead iheaderresponse response
response renderjavascriptreference returnlocationwithcontextpath location
// adds the context path on the front of the location, if it's not
// a fully-qualified url.
private static final string returnlocationwithcontextpath string location
// wicket-59 allow external urls.
if  location startswith       location startswith
return location
else
stringbuffer b   new stringbuffer
string contextpath   application get   getapplicationsettings   getcontextpath
if  contextpath    null
contextpath     webrequestcycle requestcycle get    getwebrequest
getcontextpath
if  contextpath    null
contextpath
b append contextpath
if   contextpath endswith        location startswith
b append
b append location
return b tostring
/**
* resource reference to contribute.
*/
private iheadercontributor headercontributor   null
/**
* construct.
*
* @param headercontributor
*            the header contributor
*/
public headercontributor iheadercontributor headercontributor
if  headercontributor    null
throw new illegalargumentexception
this headercontributor   headercontributor
/**
* @see org.apache.wicket.behavior.abstractheadercontributor#getheadercontributors()
*/
public final iheadercontributor getheadercontributors
return new iheadercontributor   headercontributor