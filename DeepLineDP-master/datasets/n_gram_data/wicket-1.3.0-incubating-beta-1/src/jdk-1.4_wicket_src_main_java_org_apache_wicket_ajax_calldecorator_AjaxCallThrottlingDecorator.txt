/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket ajax calldecorator
import org apache wicket ajax abstractdefaultajaxbehavior
import org apache wicket ajax iajaxcalldecorator
import org apache wicket util string strings
import org apache wicket util time duration
/**
* adds throttling to the ajax call. throttled behaviors only execute once
* within the given delay even though they can be triggered multiple times.
* <p>
* for example, this is useful when attaching an event behavior to the
* onkeypress event. it is not desirable to have an ajax call made every time
* the user types so we can throttle that call to a desirable delay, such as
* once per second. this gives us a near real time ability to provide feedback
* without overloading the server.
*
* @since 1.2
*
* @author igor vaynberg (ivaynberg)
*
*/
public final class ajaxcallthrottlingdecorator extends ajaxpostprocessingcalldecorator
private static final long serialversionuid   1l
private final duration duration
private final string id
/**
* construct.
*
* @param id
*            throttle id
* @param delay
*            throttle delay
*/
public ajaxcallthrottlingdecorator string id  duration delay
this null  id  delay
/**
* construct.
*
* @param decorator
*            wrapped decorator
* @param id
*            throttle id
* @param delay
*            throttle delay
*/
public ajaxcallthrottlingdecorator iajaxcalldecorator decorator  string id  duration delay
super decorator
if  strings isempty id
throw new illegalargumentexception
this id   id
this duration   delay
/**
* @see org.apache.wicket.ajax.calldecorator.ajaxpostprocessingcalldecorator#postdecoratescript(charsequence)
*/
public final charsequence postdecoratescript charsequence script
return abstractdefaultajaxbehavior throttlescript script  id  duration