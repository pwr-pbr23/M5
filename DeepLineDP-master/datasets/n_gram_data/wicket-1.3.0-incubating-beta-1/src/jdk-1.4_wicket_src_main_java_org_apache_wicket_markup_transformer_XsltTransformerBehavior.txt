/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket markup transformer
import org apache wicket component
import org apache wicket markup componenttag
/**
* an ibehavior which can be added to any component except listview. it allows
* to post-process (xslt) the markup generated by the component. the *.xsl
* resource must be located in the same path as the nearest parent with an
* associated markup and must have a filename equal to the component's id.
* <p>
* the containers tag will be the root element of the xml data applied for
* transformation to ensure the xml data are well formed (single root element).
* in addition the attribute
* <code>xmlns:wicket="http://wicket.apache.org"</code> is added to
* the root element to allow the xsl processor to handle the wicket
* namespace.
* <p>
* the reason why the transformer can not be used to xslt the listviews output
* is because of the listviews markup being reused for each listitem. please use
* a xsltoutputtransformercontainer instead. note: if the listview is used to
* print a list of &lt;tr&gt; tags, than the transformer container must enclose
* the &lt;table&gt; tag as well to be html compliant.
*
* @see org.apache.wicket.markup.transformer.abstractoutputtransformercontainer
* @see org.apache.wicket.markup.transformer.xsltoutputtransformercontainer
*
* @author juergen donnerstag
*/
public class xslttransformerbehavior extends abstracttransformerbehavior
private static final long serialversionuid   1l
/** an optional xsl file path */
private final string xslfile
/**
* construct.
*/
public xslttransformerbehavior
this xslfile   null
/**
* @param xslfilepath
* @see xslttransformer#xslttransformer(string)
*/
public xslttransformerbehavior final string xslfilepath
this xslfile   xslfilepath
/**
* @see org.apache.wicket.behavior.ibehavior#oncomponenttag(org.apache.wicket.component,
*      org.apache.wicket.markup.componenttag)
*/
public void oncomponenttag final component component  final componenttag tag
tag put
// make the xslt processor happy and allow it to handle the wicket tags
// and attributes that are in the wicket namespace
super oncomponenttag component  tag
/**
* @see org.apache.wicket.markup.transformer.itransformer#transform(org.apache.wicket.component,
*      java.lang.string)
*/
public charsequence transform final component component  final string output  throws exception
return new xslttransformer this xslfile  transform component  output