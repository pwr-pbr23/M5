/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket util file
import java io fileoutputstream
import java io ioexception
import java io inputstream
import org apache wicket util io streams
import org apache wicket util string strings
/**
* file utility methods.
*
* @author jonathan locke
*/
public class files
/**
* strips off the given extension (probably returned from files.extension())
* from the path, yielding a base pathname.
*
* @param path
*            the path, possibly with an extension to strip
* @param extension
*            the extension to strip, or null if no extension exists
* @return the path without any extension
*/
public static string basepath final string path  final string extension
if  extension    null
return path substring 0  path length     extension length     1
return path
/**
* gets extension from path
*
* @param path
*            the path
* @return the extension, like "bmp" or "html", or null if none can be found
*/
public static string extension final string path
if  path indexof        1
return strings lastpathcomponent path
return null
/**
* gets filename from path
*
* @param path
*            the path
* @return the filename
*/
public static string filename final string path
return strings lastpathcomponent path replace    java io file separatorchar
java io file separatorchar
/**
* deletes a file, dealing with a particularly nasty bug on windows.
*
* @param file
*            file to delete
* @return true if file was deleted
*/
public static boolean remove final java io file file
// delete current file
if   file delete
// note: fix for java/win bug. see:
// http://forum.java.sun.com/thread.jsp?forum=4&thread=158689&tstart=0&trange=15
system gc
try
thread sleep 100
catch  interruptedexception e
// try one more time to delete the file
return file delete
return true
/**
* writes the given input stream to the given file
*
* @param file
*            the file to write to
* @param input
*            the input
* @return number of bytes written
* @throws ioexception
*/
public static final int writeto final java io file file  final inputstream input
throws ioexception
final fileoutputstream out   new fileoutputstream file
try
return streams copy input  out
finally
out close
/**
* private constructor to prevent instantiation.
*/
private files