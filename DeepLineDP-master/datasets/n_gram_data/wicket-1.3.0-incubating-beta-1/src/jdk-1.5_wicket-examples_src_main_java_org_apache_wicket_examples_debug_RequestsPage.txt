/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket examples debug
import java io serializable
import java text simpledateformat
import java util arraylist
import java util list
import org apache wicket application
import org apache wicket markup html webmarkupcontainer
import org apache wicket markup html webpage
import org apache wicket markup html basic label
import org apache wicket markup html image image
import org apache wicket markup html list listitem
import org apache wicket markup html list pageablelistview
import org apache wicket markup html navigation paging pagingnavigator
import org apache wicket model imodel
import org apache wicket model model
import org apache wicket protocol http irequestlogger
import org apache wicket protocol http requestlogger
import org apache wicket protocol http webapplication
import org apache wicket protocol http requestlogger requestdata
import org apache wicket protocol http requestlogger sessiondata
import org apache wicket util lang bytes
/**
* @author jcompagner
*/
public class requestspage extends webpage
private static final long serialversionuid   1l
private final simpledateformat sdf   new simpledateformat
/**
* construct.
* @param sessiondata
*/
public requestspage final sessiondata sessiondata
add new image
if sessiondata    null
add new label    setvisible false
add new label    setvisible false
add new label    setvisible false
add new label    setvisible false
add new label    setvisible false
add new label    setvisible false
add new label    setvisible false
add new webmarkupcontainer
else
add new label    new model sessiondata getsessionid
add new label   new model  serializable sessiondata getsessioninfo
add new label   new model sdf format sessiondata getstartdate
add new label   new model sdf format sessiondata getlastactive
add new label   new model new long sessiondata getnumberofrequests
add new label   new model new long sessiondata gettotaltimetaken
add new label     new model bytes bytes sessiondata getsessionsize
add new webmarkupcontainer    setvisible false
imodel requestsmodel   new model
private static final long serialversionuid   1l
public object getobject
list requests   getrequestlogger   getrequests
if sessiondata    null
list  returnvalues   new arraylist
for  int i 0 i<requests size   i
requestdata data    requestdata requests get i
if sessiondata getsessionid   equals data getsessionid
returnvalues add data
return returnvalues
return requests
pageablelistview listview   new pageablelistview   requestsmodel 50
private static final long serialversionuid   1l
protected void populateitem listitem item
requestdata rd    requestdata item getmodelobject
item add new label    new model rd getsessionid     setvisible sessiondata    null
item add new label    new model sdf format rd getstartdate
item add new label    new model rd gettimetaken
item add new label    new model rd geteventtarget
item add new label    new model rd getresponsetarget
item add new label    new model rd getalteredobjects
setescapemodelstrings false
item add new label    new model bytes bytes rd getsessionsize   longvalue
add listview
pagingnavigator navigator   new pagingnavigator   listview
add navigator
irequestlogger getrequestlogger
webapplication webapplication    webapplication application get
final irequestlogger requestlogger
if  webapplication getrequestlogger      null
// make default one.
requestlogger   new requestlogger
else
requestlogger   webapplication getrequestlogger
return requestlogger