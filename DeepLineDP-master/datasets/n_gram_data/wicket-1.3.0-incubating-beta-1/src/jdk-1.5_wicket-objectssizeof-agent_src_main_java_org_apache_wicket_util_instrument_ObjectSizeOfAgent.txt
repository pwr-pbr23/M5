/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket util instrument
import java lang instrument instrumentation
import org apache wicket util lang objects
import org apache wicket util lang objects iobjectsizeofstrategy
/**
* instrumentation agent for calculating object sizes using java's
* instrumentation api. to use it, have the jar somewhere we you can access it
* (just having this class on the classpath is not enough) and startup your
* application with a -javaagent argument like e.g:
* '-javaagent:/mydir/wicket-objectsizeof-agent-1.3-incubating-snapshot.jar'.
* when the application starts up, this agent will register an
* {@link iobjectsizeofstrategy} at
* {@link objects#setobjectsizeofstrategy(iobjectsizeofstrategy)}. note that
* this is a static registration.
*
* @author eelcohillenius
*/
public class objectsizeofagent
/**
* initializes agent when it is attached to an already running jvm.
*
* @param agentargs
*            arguments passed in to the agent
* @param instrumentation
*            the instrumentation class
*/
public static void agentmain string agentargs
instrumentation instrumentation
instrumentationobjectsizeofstrategy strategy   new instrumentationobjectsizeofstrategy
instrumentation
objects setobjectsizeofstrategy strategy
/**
* initializes agent before the main function of the application is
* executed.
*
* @param agentargs
*            arguments passed in to the agent
* @param instrumentation
*            the instrumentation class
*/
public static void premain string agentargs  instrumentation instrumentation
instrumentationobjectsizeofstrategy strategy   new instrumentationobjectsizeofstrategy
instrumentation
objects setobjectsizeofstrategy strategy