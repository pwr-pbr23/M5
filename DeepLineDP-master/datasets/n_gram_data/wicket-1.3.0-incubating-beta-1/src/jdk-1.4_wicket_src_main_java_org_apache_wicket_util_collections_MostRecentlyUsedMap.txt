/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket util collections
import java util linkedhashmap
import java util map
/**
* holds a map of most recently used items of a given maximum size. old entries
* are expired when the map exceeds that maximum size.
*
* @author jonathan locke
*/
public class mostrecentlyusedmap extends linkedhashmap
private static final long serialversionuid   1l
/** value most recently removed from map */
object removedvalue
/** maximum number of entries allowed in this map */
private int maxentries
/**
* constructor
*
* @param maxentries
*            maximum number of entries allowed in the map
*/
public mostrecentlyusedmap final int maxentries
super 10  0 75f  true
if  maxentries <  0
throw new illegalargumentexception
this maxentries   maxentries
/**
* @return returns the removedvalue.
*/
public object getremovedvalue
return removedvalue
/**
* @see java.util.linkedhashmap#removeeldestentry(java.util.map.entry)
*/
protected boolean removeeldestentry final map entry eldest
final boolean remove   size   > maxentries
// when it should be removed remember the oldest value that will be removed
if  remove
this removedvalue   eldest getvalue
else
removedvalue   null
return remove