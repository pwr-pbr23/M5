/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket examples guestbook
import java util arraylist
import java util date
import java util list
import org apache wicket examples wicketexamplepage
import org apache wicket markup html basic label
import org apache wicket markup html basic multilinelabel
import org apache wicket markup html form form
import org apache wicket markup html form textarea
import org apache wicket markup html list listitem
import org apache wicket markup html list listview
import org apache wicket model compoundpropertymodel
import org apache wicket model model
/**
* a simple "guest book" example that allows visitors to the page to add a
* comment and see the comments others have added.
*
* for unit testing, added a parameter to clear the commentlist.
*
* @author jonathan locke
* @author martijn dashorst
*/
public final class guestbook extends wicketexamplepage
/** a global list of all comments from all users across all sessions */
private static final list commentlist   new arraylist
/** the list view that shows comments */
private final listview commentlistview
/**
* constructor that is invoked when page is invoked without a session.
*/
public guestbook
// add comment form
add new commentform
// add commentlistview of existing comments
add commentlistview   new listview    commentlist
public void populateitem final listitem listitem
final comment comment    comment listitem getmodelobject
listitem add new label    new model comment getdate
listitem add new multilinelabel    comment gettext
setversioned false
/**
* a form that allows a user to add a comment.
*
* @author jonathan locke
*/
public final class commentform extends form
/**
* constructor
*
* @param id
*            the name of this component
*/
public commentform final string id
// construct form with no validation listener
super id  new compoundpropertymodel new comment
// add text entry widget
add new textarea
/**
* show the resulting valid edit
*/
public final void onsubmit
// construct a copy of the edited comment
final comment comment    comment getmodelobject
final comment newcomment   new comment comment
// set date of comment to add
newcomment setdate new date
// add the component we edited to the list of comments
commentlistview modelchanging
commentlist add 0  newcomment
commentlistview modelchanged
// clear out the text component
comment settext
/**
* clears the comments.
*/
public static void clear
commentlist clear