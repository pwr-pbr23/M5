/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket resource
import java io bytearrayinputstream
import java io ioexception
import java io inputstream
import java util locale
import org apache wicket markup html webresource
import org apache wicket protocol http webresponse
import org apache wicket util resource iresourcestream
import org apache wicket util resource resourcestreamnotfoundexception
import org apache wicket util time time
/**
* this class can be used to easy make a resource from a predefined byte array.
* if your data comes from a database then a dynamicwebresource is a
* better choice. only use this class if you have to have the byte array in
* memory. like a pdf that is generated on the fly.
*
* @author johan compagner
*/
public class bytearrayresource extends webresource
private static final long serialversionuid   1l
/** the content type. */
private final string contenttype
/** binary data. */
private final byte array
/** the locale. */
private final locale locale
/** the time that this resource was last modified; same as construction time. */
private final time lastmodified   time now
private final string filename
/**
* creates a resource from the given byte array with its content type
*
* @param contenttype
*            the content type of the array.
* @param array
*            the binary content
*/
public bytearrayresource string contenttype  byte array
this contenttype   contenttype
this array   array
this locale   null
this filename   null
/**
* creates a resource from the given byte array with its content type
*
* @param contenttype
*            the content type of the array.
* @param array
*            the binary content
* @param filename
* 			  the filename that will be set as the content-disposition header.
*/
public bytearrayresource string contenttype  byte array  string filename
this contenttype   contenttype
this array   array
this filename   filename
this locale   null
/**
* creates a resource from the given byte array with its content type and
* the locale for which it is valid.
*
* @param contenttype
*            the content type of the array.
* @param array
*            the binary content.
* @param locale
*            the locale of this resource
*/
public bytearrayresource string contenttype  byte array  locale locale
this contenttype   contenttype
this array   array
this locale   locale
this filename   null
/**
* creates a resource from the given byte array with its content type and
* the locale for which it is valid.
*
* @param contenttype
*            the content type of the array.
* @param array
*            the binary content.
* @param locale
*            the locale of this resource
* @param filename
* 			  the filename that will be set as the content-disposition header.
*/
public bytearrayresource string contenttype  byte array  locale locale  string filename
this contenttype   contenttype
this array   array
this locale   locale
this filename   filename
/**
* @see org.apache.wicket.markup.html.webresource#setheaders(org.apache.wicket.protocol.http.webresponse)
*/
protected void setheaders webresponse response
super setheaders response
if filename    null
response setattachmentheader filename
/**
* @see org.apache.wicket.resource#getresourcestream()
*/
public iresourcestream getresourcestream
return new iresourcestream
private static final long serialversionuid   1l
/** transient input stream to resource */
private transient inputstream inputstream   null
/**
* @see org.apache.wicket.util.resource.iresourcestream#close()
*/
public void close   throws ioexception
if  inputstream    null
inputstream close
inputstream   null
/**
* @see org.apache.wicket.util.resource.iresourcestream#getcontenttype()
*/
public string getcontenttype
return contenttype
/**
* @see org.apache.wicket.util.resource.iresourcestream#getinputstream()
*/
public inputstream getinputstream   throws resourcestreamnotfoundexception
if  inputstream    null
inputstream   new bytearrayinputstream array
return inputstream
/**
* @see org.apache.wicket.util.watch.imodifiable#lastmodifiedtime()
*/
public time lastmodifiedtime
return lastmodified
public long length
return array length
public locale getlocale
return locale
public void setlocale locale locale
// ignore