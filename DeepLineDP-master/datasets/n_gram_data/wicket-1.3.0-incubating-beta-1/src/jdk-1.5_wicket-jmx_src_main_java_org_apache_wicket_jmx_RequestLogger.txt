/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket jmx
import java io ioexception
import org apache wicket protocol http webapplication
/**
* exposes {@link org.apache.wicket.protocol.http.requestlogger} for jmx.
*
* @author eelcohillenius
*/
public class requestlogger implements requestloggermbean
private final org apache wicket application application
private final webapplication webapplication
/**
* construct.
*
* @param application
*            the application
*/
public requestlogger org apache wicket application application
this application   application
// do this so that we don't have to cast all the time
if  application instanceof webapplication
this webapplication    webapplication application
else
this webapplication   null
/**
* @see org.apache.wicket.jmx.requestloggermbean#getnumberofcreatedsessions()
*/
public integer getnumberofcreatedsessions   throws ioexception
org apache wicket protocol http irequestlogger logger   getrequestlogger
if  logger    null
return integer valueof logger gettotalcreatedsessions
return null
/**
* @see org.apache.wicket.jmx.requestloggermbean#getnumberoflivesessions()
*/
public integer getnumberoflivesessions   throws ioexception
org apache wicket protocol http irequestlogger logger   getrequestlogger
if  logger    null
return integer valueof logger getlivesessions   length
return null
/**
* @see org.apache.wicket.jmx.requestloggermbean#getpeaknumberofsessions()
*/
public integer getpeaknumberofsessions   throws ioexception
org apache wicket protocol http irequestlogger logger   getrequestlogger
if  logger    null
return integer valueof logger getpeaksessions
return null
/**
* @see org.apache.wicket.jmx.requestloggermbean#restart()
*/
public void restart   throws ioexception
if  webapplication    null
webapplication getrequestloggersettings   setrequestloggerenabled false
webapplication getrequestlogger
webapplication getrequestloggersettings   setrequestloggerenabled true
/**
* @see org.apache.wicket.jmx.requestloggermbean#stop()
*/
public void stop   throws ioexception
if  webapplication    null
webapplication getrequestloggersettings   setrequestloggerenabled false
/**
* gets the request logger for this application.
*
* @return the request logger or null if no request is active, or if this is
*         not a web application
*/
protected org apache wicket protocol http irequestlogger getrequestlogger
if  application instanceof webapplication
return   webapplication application  getrequestlogger
return null