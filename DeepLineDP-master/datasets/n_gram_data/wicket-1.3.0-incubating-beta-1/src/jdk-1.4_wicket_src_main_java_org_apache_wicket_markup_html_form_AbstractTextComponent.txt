/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket markup html form
import java text simpledateformat
import org apache wicket model imodel
import org apache wicket util convert conversionexception
import org apache wicket util string strings
/**
* abstract base class for textarea and textfield.
*
* @author jonathan locke
*/
public abstract class abstracttextcomponent extends formcomponent
/**
* text components that implement this interface are know to be able to
* provide a pattern for formatting output and parsing input. this can be
* used by for instance date picker components which are based on javascript
* and need some knowledge as to how to communicate properly via request
* parameters.
*/
public static interface itextformatprovider
/**
* gets the pattern for printing output and parsing input.
*
* @return the text pattern
* @see simpledateformat
*/
string gettextformat
/**
* @see org.apache.wicket.component#component(string)
*/
public abstracttextcomponent string id
super id
setconvertemptyinputstringtonull true
/**
* @see org.apache.wicket.component#component(string, imodel)
*/
public abstracttextcomponent final string id  final imodel model
super id  model
setconvertemptyinputstringtonull true
/**
* should the bound object become <code>null</code> when the input is
* empty?
*
* @return <code>true</code> when the value will be set to
*         <code>null</code> when the input is empty.
*/
public final boolean getconvertemptyinputstringtonull
return getflag flag_convert_empty_input_string_to_null
/**
* textfields return an empty string even if the user didn't type anything
* in them. to be able to work nicely with validation, this method returns
* false.
*
* @see org.apache.wicket.markup.html.form.formcomponent#isinputnullable()
*/
public boolean isinputnullable
return false
/**
* should the bound object become <code>null</code> when the input is
* empty?
*
* @param flag
*            the value to set this flag.
* @return this
*/
public final formcomponent setconvertemptyinputstringtonull boolean flag
setflag flag_convert_empty_input_string_to_null  flag
return this
/**
* @see org.apache.wicket.markup.html.form.formcomponent#convertvalue(string[])
*/
protected object convertvalue string value  throws conversionexception
string tmp   value    null    value length > 0 ? value   null
if  getconvertemptyinputstringtonull      strings isempty tmp
return null
return super convertvalue value
/**
* @see formcomponent#supportspersistence()
*/
protected final boolean supportspersistence
return true