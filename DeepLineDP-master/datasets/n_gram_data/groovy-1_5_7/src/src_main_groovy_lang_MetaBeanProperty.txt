/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy lang
import org codehaus groovy reflection cachedfield
import org codehaus groovy runtime metaclasshelper
import org codehaus groovy runtime typehandling defaulttypetransformation
import java lang reflect modifier
/**
* represents a property on a bean which may have a getter and/or a setter
*
* @author <a href="mailto:james@coredevelopers.net">james strachan</a>
* @author pilho kim
* @version $revision$
*/
public class metabeanproperty extends metaproperty
private metamethod getter
private metamethod setter
private cachedfield field
public metabeanproperty string name  class type  metamethod getter  metamethod setter
super name  type
this getter   getter
this setter   setter
/**
* get the property of the given object.
*
* @param object which to be got
* @return the property of the given object
* @throws exception if the property could not be evaluated
*/
public object getproperty object object
if  getter    null
//todo: we probably need a writeonlyexception class
throw new groovyruntimeexception     name
return getter invoke object  metaclasshelper empty_array
/**
* set the property on the given object to the new value.
*
* @param object   on which to set the property
* @param newvalue the new value of the property
* @throws runtimeexception if the property could not be set
*/
public void setproperty object object  object newvalue
if  setter    null
throw new groovyruntimeexception     name
newvalue   defaulttypetransformation casttotype newvalue  gettype
setter invoke object  new object newvalue
/**
* get the getter method.
*/
public metamethod getgetter
return getter
/**
* get the setter method.
*/
public metamethod getsetter
return setter
/**
* this is for metaclass to patch up the object later when looking for get*() methods.
*/
void setgetter metamethod getter
this getter   getter
/**
* this is for metaclass to patch up the object later when looking for set*() methods.
*/
void setsetter metamethod setter
this setter   setter
public int getmodifiers
if  setter    null    getter    null  return setter getmodifiers
if  getter    null    setter    null  return getter getmodifiers
int modifiers   getter getmodifiers     setter getmodifiers
int visibility   0
if  modifier ispublic modifiers   visibility   modifier public
if  modifier isprotected modifiers   visibility   modifier protected
if  modifier isprivate modifiers   visibility   modifier private
int states   getter getmodifiers     setter getmodifiers
states    ~ modifier public   modifier protected   modifier private
states    visibility
return states
public void setfield cachedfield f
this field   f
public cachedfield getfield
return field