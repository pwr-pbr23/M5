/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy tools groovydoc
import java util arraylist
import java util collections
import java util hashmap
import java util iterator
import java util list
import java util map
import org codehaus groovy groovydoc groovyclassdoc
import org codehaus groovy groovydoc groovypackagedoc
import org codehaus groovy groovydoc groovyrootdoc
public class simplegroovyrootdoc extends simplegroovydoc implements groovyrootdoc
private map packagedocs
private map classdocs
public simplegroovyrootdoc string name
super name
packagedocs   new hashmap
classdocs   new hashmap
// todo - take account of package names !
public groovyclassdoc classnamed string name
iterator itr   classdocs keyset   iterator
while  itr hasnext
string key    string  itr next
int lastslashidx   key lastindexof
if  lastslashidx > 0
string shortkey   key substring lastslashidx   1
if  shortkey equals name
return  groovyclassdoc  classdocs get key
return null
public groovyclassdoc classes
list classdocvalues   new arraylist classdocs values
collections sort classdocvalues      todo   performance   maybe move into a sortme   method
return  groovyclassdoc  classdocvalues toarray new groovyclassdoc
public string options      todo  return null
public groovypackagedoc packagenamed string packagename
return  groovypackagedoc  packagedocs get packagename
public void putallclasses map classes
classdocs putall classes
public void put string packagename  groovypackagedoc packagedoc
packagedocs put packagename  packagedoc
public groovyclassdoc specifiedclasses      todo  return null
public groovypackagedoc specifiedpackages
list packagedocvalues   new arraylist packagedocs values
collections sort packagedocvalues
return  groovypackagedoc  packagedocvalues toarray new groovypackagedoc
public map getvisibleclasses list importedclassesandpackages
map visibleclasses   new hashmap
iterator itr   classdocs keyset   iterator
while  itr hasnext
string fullclassname    string  itr next
string equivalentpackageimport   fullclassname replaceall
if  importedclassesandpackages contains fullclassname
importedclassesandpackages contains equivalentpackageimport
groovyclassdoc classdoc    groovyclassdoc  classdocs get fullclassname
visibleclasses put classdoc name    classdoc
return visibleclasses
// groovydocerrorreporter interface
public void printerror string arg0     todo
//	public void printerror(groovysourceposition arg0, string arg1) {/*todo*/}
public void printnotice string arg0     todo
//	public void printnotice(groovysourceposition arg0, string arg1) {/*todo*/}
public void printwarning string arg0     todo
//	public void printwarning(groovysourceposition arg0, string arg1) {/*todo*/}
public void resolve
//resolve class names at the end of adding all files to the tree
iterator itr   classdocs values   iterator
while  itr hasnext
simplegroovyclassdoc classdoc    simplegroovyclassdoc  itr next
classdoc resolve this