/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy tools shell util
import org codehaus groovy tools shell io
/**
* provides a very, very basic logging api.
*
* @version $id$
* @author <a href="mailto:jason@planet57.com">jason dillon</a>
*/
public final class logger
public static io io
public final string name
private logger final string name
assert name    null
this name   name
private void log final string level  object msg  throwable cause  throws exception
assert level    null
assert msg    null
if  io    null
io   new io
// allow the msg to be a throwable, and handle it properly if no cause is given
if  cause    null
if  msg instanceof throwable
cause    throwable  msg
msg   cause getmessage
stringbuffer buff   new stringbuffer
int color   ansi code bold
if  warn equals level     error equals level
color   ansi code red
buff append ansi renderer encode level  color
buff append
buff append name
buff append
buff append msg
io out println buff
if  cause    null
cause printstacktrace io out
io flush
//
// level helpers
//
private static final string debug
public boolean isdebugenabled
return preferences verbosity    io verbosity debug
public boolean isdebug
return isdebugenabled
public void debug final object msg  throws exception
if  isdebugenabled
log debug  msg  null
public void debug final object msg  final throwable cause  throws exception
if  isdebugenabled
log debug  msg  cause
private static final string warn
public void warn final object msg  throws exception
log warn  msg  null
public void warn final object msg  final throwable cause  throws exception
log warn  msg  cause
private static final string error
public void error final object msg  throws exception
log error  msg  null
public void error final object msg  final throwable cause  throws exception
log error  msg  cause
//
// factory access
//
public static logger create final class type
return new logger type getname
public static logger create final class type  final string suffix
return new logger type getname         suffix