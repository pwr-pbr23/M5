package groovy io
import java io bufferedwriter
import java io writer
import java io ioexception
/**
* a buffered writer that gobbles any \r characters
* and replaces every \n with a platform specific newline.
* in many places groovy normalises streams to only have \n
* characters but when creating files that must be used
* by other platform-aware tools, you sometimes want the
* newlines to match what the platform expects.
*
* @author paul king
*/
public class platformlinewriter extends writer
private bufferedwriter writer
public platformlinewriter writer out
writer   new bufferedwriter out
public platformlinewriter writer out  int sz
writer   new bufferedwriter out  sz
public void write char cbuf  int off  int len  throws ioexception
for    len > 0  len
char c   cbuf
if  c
writer newline
else if  c
writer write c
public void flush   throws ioexception
writer flush
public void close   throws ioexception
writer close