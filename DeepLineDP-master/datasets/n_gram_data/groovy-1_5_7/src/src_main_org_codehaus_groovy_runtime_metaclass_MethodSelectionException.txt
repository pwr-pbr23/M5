/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy runtime metaclass
import groovy lang groovyruntimeexception
import groovy lang metamethod
import org codehaus groovy reflection cachedconstructor
import org codehaus groovy reflection fastarray
import java lang reflect modifier
/**
* this exception is thrown if the runtime is unable to select
* a method. this class builds the exception text when calling
* getmessage. <br/>
* <b>note:</b> this exception as for internal use only!
*
* @author jochen theodorou
* @since groovy 1.1
*/
public class methodselectionexception extends groovyruntimeexception
private string methodname
private fastarray methods
private class arguments
/**
* creates a new methodselectionexception.
* @param methodname name of the method
* @param methods    a fastarray of methods
* @param arguments  the method call argument classes
*/
public methodselectionexception string methodname  fastarray methods  class arguments
super methodname
this methodname   methodname
this arguments   arguments
this methods   methods
public string getmessage
stringbuffer buffer   new stringbuffer
buffer append    append methodname
appendclassnames buffer arguments
buffer append
appendmethods buffer
return buffer tostring
private void appendclassnames stringbuffer argbuf  class classes
argbuf append
for  int i   0  i < classes length  i
if  i > 0
argbuf append
class clazz   classes
string name   clazz  null?    clazz getname
argbuf append name
argbuf append
private void appendmethods stringbuffer buffer
for  int i   0  i < methods size  i
buffer append
object methodorconstructor   methods get i
if  methodorconstructor instanceof metamethod
metamethod method    metamethod  methodorconstructor
buffer append modifier tostring method getmodifiers
buffer append    append method getreturntype   getname
buffer append    append method getdeclaringclass   getname
buffer append
buffer append method getname
appendclassnames buffer method getnativeparametertypes
else
cachedconstructor method    cachedconstructor  methodorconstructor
buffer append modifier tostring method cachedconstructor getmodifiers
buffer append    append method cachedconstructor getdeclaringclass   getname
buffer append
appendclassnames buffer method getnativeparametertypes