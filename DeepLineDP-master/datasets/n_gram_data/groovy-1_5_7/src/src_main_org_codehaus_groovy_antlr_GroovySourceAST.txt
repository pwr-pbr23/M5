/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy antlr
import antlr collections ast
import antlr
import java util list
import java util arraylist
/**
* we have an ast subclass so we can track source information.
* very odd that antlr doesn't do this by default.
*
* @author mike spille
* @author jeremy rayner <groovy@ross-rayner.com>
*/
public class groovysourceast extends commonast implements comparable  sourceinfo
private int line
private int col
private int linelast
private int collast
private string snippet
public groovysourceast
public groovysourceast token t
super t
public void initialize ast ast
super initialize ast
line   ast getline
col   ast getcolumn
if  ast instanceof groovysourceast
groovysourceast node    groovysourceast ast
linelast   node getlinelast
collast   node getcolumnlast
public void initialize token t
super initialize t
line   t getline
col   t getcolumn
if  t instanceof sourceinfo
sourceinfo info    sourceinfo  t
linelast   info getlinelast
collast    info getcolumnlast
public void setlast token last
linelast   last getline
collast   last getcolumn
public int getlinelast
return linelast
public void setlinelast int linelast
this linelast   linelast
public int getcolumnlast
return collast
public void setcolumnlast int collast
this collast   collast
public void setline int line
this line   line
public int getline
return  line
public void setcolumn int column
this col   column
public int getcolumn
return  col
public void setsnippet string snippet
this snippet   snippet
public string getsnippet
return snippet
public int compareto object object
if  object    null
return 0
if    object instanceof ast
return 0
ast that    ast  object
// todo - possibly check for line/col with values of 0 or less...
if  this getline   < that getline
return  1
if  this getline   > that getline
return 1
if  this getcolumn   < that getcolumn
return  1
if  this getcolumn   > that getcolumn
return 1
return 0
public groovysourceast childat int position
list list   new arraylist
ast child   this getfirstchild
while  child    null
list add child
child   child getnextsibling
try
return  groovysourceast list get position
catch  indexoutofboundsexception e
return null
public groovysourceast childoftype int type
ast child   this getfirstchild
while  child    null
if  child gettype      type    return  groovysourceast child
child   child getnextsibling
return null