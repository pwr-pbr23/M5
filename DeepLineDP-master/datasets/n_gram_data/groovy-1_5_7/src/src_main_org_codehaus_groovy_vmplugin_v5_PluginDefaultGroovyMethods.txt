/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy vmplugin v5
import groovy lang metaclass
import groovy lang intrange
import groovy lang emptyrange
import org codehaus groovy runtime invokerhelper
import org codehaus groovy runtime defaultgroovymethodssupport
import org codehaus groovy runtime typehandling defaulttypetransformation
import java util arrays
import java lang reflect method
/**
* this class defines new java 5 specific groovy methods which extend the normal
* jdk classes inside the groovy environment. static methods are used with the
* first parameter the destination class.
*/
public class plugindefaultgroovymethods extends defaultgroovymethodssupport
private static final object no_args   new object
/**
* this method is called by the ++ operator for enums. it will invoke
* groovy's default next behaviour for enums do not have their own
* next method (only works with jdk1.5 or later).
*
* @param self an enum
* @return the next defined enum from the enum class
*/
public static object next enum self
final method methods   self getclass   getmethods
for  int i   0  i < methods length  i
method method   methods
if  method getname   equals       method getparametertypes   length    0
return invokerhelper invokemethod self     no_args
object values    object  invokerhelper invokestaticmethod self getclass       no_args
int index   arrays aslist values  indexof self
return values
/**
* this method is called by the -- operator for enums. it will invoke
* groovy's default previous behaviour for enums that do not have
* their own previous method (only works with jdk1.5 or later).
*
* @param self an enum
* @return the previous defined enum from the enum class
*/
public static object previous enum self
final method methods   self getclass   getmethods
for  int i   0  i < methods length  i
method method   methods
if  method getname   equals       method getparametertypes   length    0
return invokerhelper invokemethod self     no_args
object values    object  invokerhelper invokestaticmethod self getclass       no_args
int index   arrays aslist values  indexof self
return values
/**
* standard groovy size() method for stringbuilders
* (only works with jdk1.5 or later).
*
* @param builder a stringbuilder
* @return the length of the stringbuilder
*/
public static int size stringbuilder builder
return builder length
/**
* overloads the left shift operator to provide an easy way to append multiple
* objects as string representations to a stringbuilder (only works with jdk1.5 or later).
*
* @param self  a stringbuilder
* @param value a value to append
* @return the stringbuilder on which this operation was invoked
*/
public static stringbuilder leftshift stringbuilder self  object value
self append value
return self
/**
* support the range subscript operator for stringbuilder (only works with jdk1.5 or later).
* index values are treated as characters within the builder.
*
* @param self  a stringbuilder
* @param range a range
* @param value the object that's tostring() will be inserted
*/
public static void putat stringbuilder self  intrange range  object value
rangeinfo info   sublistborders self length    range
self replace info from  info to  value tostring
/**
* support the range subscript operator for stringbuilder (only works with jdk1.5 or later).
*
* @param self  a stringbuilder
* @param range a range
* @param value the object that's tostring() will be inserted
*/
public static void putat stringbuilder self  emptyrange range  object value
rangeinfo info   sublistborders self length    range
self replace info from  info to  value tostring
/**
* appends a string to this stringbuilder (only works with jdk1.5 or later).
*
* @param self  a stringbuilder
* @param value a string
* @return a string
*/
public static string plus stringbuilder self  string value
return self   value