/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy util
import org codehaus groovy runtime invokerhelper
import java io outputstreamwriter
import java io printwriter
import java util iterator
import java util list
import java util map
/**
* a helper class for creating nested trees of data
*
* @author <a href="mailto:james@coredevelopers.net">james strachan</a>
* @author christian stein
* @version $revision$
*/
public class nodeprinter
protected final indentprinter out
public nodeprinter
this new indentprinter new printwriter new outputstreamwriter system out
public nodeprinter printwriter out
this new indentprinter out
public nodeprinter indentprinter out
if  out    null
throw new nullpointerexception
this out   out
public void print node node
out printindent
printname node
map attributes   node attributes
boolean hasattributes   attributes    null     attributes isempty
if  hasattributes
printattributes attributes
object value   node value
if  value instanceof list
if   hasattributes
out print
printlist  list  value
else
if  value instanceof string
out print
out print  string  value
out println
else
out println
out flush
protected void printname node node
object name   node name
if  name    null
out print name tostring
else
out print
protected void printlist list list
if  list isempty
out println
else
out println
out incrementindent
for  iterator iter   list iterator    iter hasnext
object value   iter next
if  value instanceof node
print  node  value
else
out printindent
out print
out print invokerhelper tostring value
out println
out decrementindent
out printindent
out println
protected void printattributes map attributes
out print
boolean first   true
for  iterator iter   attributes entryset   iterator    iter hasnext
map entry entry    map entry  iter next
if  first
first   false
else
out print
out print entry getkey   tostring
out print
if  entry getvalue   instanceof string
out print     entry getvalue
else
out print invokerhelper tostring entry getvalue
out print