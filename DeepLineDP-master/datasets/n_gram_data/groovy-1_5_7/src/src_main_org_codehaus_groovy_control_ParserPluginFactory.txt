/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy control
import org codehaus groovy antlr antlrparserpluginfactory
/**
* a factory of parser plugin instances
*
* @version $revision$
*/
public abstract class parserpluginfactory
public static parserpluginfactory newinstance boolean usenewparser
if  usenewparser
class type   null
string name
try
type   class forname name
catch  classnotfoundexception e
try
type   parserpluginfactory class getclassloader   loadclass name
catch  classnotfoundexception e1
classloader contextclassloader   thread currentthread   getcontextclassloader
if  contextclassloader    null
try
type   contextclassloader loadclass name
catch  classnotfoundexception e2
// ignore
if  type    null
try
return  parserpluginfactory  type newinstance
catch  exception e
throw new runtimeexception     e  e
// can't find antlr parser, so lets use the classic one
return new antlrparserpluginfactory
public abstract parserplugin createparserplugin