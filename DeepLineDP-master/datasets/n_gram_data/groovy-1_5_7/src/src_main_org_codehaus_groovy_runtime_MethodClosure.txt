/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy runtime
import groovy lang closure
import java lang reflect method
import java security accesscontroller
import java security privilegedaction
/**
* represents a method on an object using a closure which can be invoked
* at any time
*
* @author <a href="mailto:james@coredevelopers.net">james strachan</a>
* @version $revision$
*/
public class methodclosure extends closure
private string method
public methodclosure object owner  string method
super owner
this method   method
final class clazz   owner getclass    class class? class  owner owner getclass
maximumnumberofparameters   0
parametertypes   new class
method methods    method  accesscontroller doprivileged new  privilegedaction
public object run
return clazz getmethods
for  int j   0  j < methods length  j
if  method equals methods getname       methods getparametertypes   length > maximumnumberofparameters
class pt   methods getparametertypes
maximumnumberofparameters   pt length
parametertypes   pt
methods    method  accesscontroller doprivileged new  privilegedaction
public object run
return clazz getdeclaredmethods
for  int j   0  j < methods length  j
if  method equals methods getname       methods getparametertypes   length > maximumnumberofparameters
class pt   methods getparametertypes
maximumnumberofparameters   pt length
parametertypes   pt
public string getmethod
return method
protected object docall object arguments
return invokerhelper invokemethod getdelegate    method  arguments
public object getproperty string property
if    equals property
return getmethod
else  return super getproperty property