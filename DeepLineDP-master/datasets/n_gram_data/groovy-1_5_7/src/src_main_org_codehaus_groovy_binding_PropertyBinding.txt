/*
* copyright 2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy binding
import groovy lang missingmethodexception
import org codehaus groovy runtime invokerhelper
import java beans propertychangeevent
import java beans propertychangelistener
/**
* @author <a href="mailto:shemnon@yahoo.com">danno ferrin</a>
* @version $revision$
* @since groovy 1.1
*/
public class propertybinding implements sourcebinding  targetbinding  triggerbinding
object bean
string propertyname
public propertybinding object bean  string propertyname
this bean   bean
this propertyname   propertyname
public void updatetargetvalue object newvalue
invokerhelper setproperty bean  propertyname  newvalue
public object getsourcevalue
return invokerhelper getpropertysafe bean  propertyname
public fullbinding createbinding sourcebinding source  targetbinding target
return new propertyfullbinding
source  target
class propertyfullbinding extends abstractfullbinding implements propertychangelistener
object boundbean
object boundproperty
boolean bound
boolean boundtoproperty
propertyfullbinding sourcebinding source  targetbinding target
setsourcebinding source
settargetbinding target
public void propertychange propertychangeevent event
if  boundtoproperty    event getpropertyname   equals boundproperty
update
public void bind
if   bound
bound   true
boundbean   bean
boundproperty   propertyname
try
invokerhelper invokemethodsafe boundbean     new object  boundproperty  this
boundtoproperty   true
catch  missingmethodexception mme
try
boundtoproperty   false
invokerhelper invokemethodsafe boundbean     new object  this
catch  missingmethodexception mme2
throw new runtimeexception     bean getclass   getname
public void unbind
if  bound
if  boundtoproperty
try
invokerhelper invokemethodsafe boundbean     new object  boundproperty  this
catch  missingmethodexception mme
// ignore, too bad so sad they don't follow conventions, we'll just leave the listener attached
else
try
invokerhelper invokemethodsafe boundbean     new object  this
catch  missingmethodexception mme2
// ignore, too bad so sad they don't follow conventions, we'll just leave the listener attached
boundbean   null
boundproperty   null
bound   false
public void rebind
if  bound
unbind
bind
public object getbean
return bean
public void setbean object bean
this bean   bean
public string getpropertyname
return propertyname
public void setpropertyname string propertyname
this propertyname   propertyname