/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy sql
import java util arraylist
import java util list
import org codehaus groovy ast codevisitorsupport
import org codehaus groovy ast expr binaryexpression
import org codehaus groovy ast expr booleanexpression
import org codehaus groovy ast expr constantexpression
import org codehaus groovy ast expr expression
import org codehaus groovy ast expr propertyexpression
import org codehaus groovy ast stmt returnstatement
import org codehaus groovy syntax token
import org codehaus groovy syntax types
/**
* @author james strachan
* @version $revision$
*/
public class sqlwherevisitor extends codevisitorsupport
private final stringbuffer buffer   new stringbuffer
private final list parameters   new arraylist
public string getwhere
return buffer tostring
public void visitreturnstatement returnstatement statement
statement getexpression   visit this
public void visitbinaryexpression binaryexpression expression
expression left   expression getleftexpression
expression right   expression getrightexpression
boolean leaf    right instanceof constantexpression
if   leaf  buffer append
left visit this
buffer append
token token   expression getoperation
buffer append tokenassql token
buffer append
right visit this
if   leaf  buffer append
public void visitbooleanexpression booleanexpression expression
expression getexpression   visit this
public void visitconstantexpression constantexpression expression
getparameters   add expression getvalue
buffer append
public void visitpropertyexpression propertyexpression expression
buffer append expression getpropertyasstring
public list getparameters
return parameters
protected string tokenassql token token
switch  token gettype
case types compare_equal
return
case types logical_and
return
case types logical_or
return
default
return token gettext