/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy classgen
import java lang reflect method
import org objectweb asm methodvisitor
import org objectweb asm opcodes
import org objectweb asm type
/**
* a helper class to invoke methods more easily in asm
*
* @author <a href="mailto:james@coredevelopers.net">james strachan</a>
* @version $revision$
*/
public class methodcaller implements opcodes
private int opcode
private string internalname
private string name
private class theclass
private string methoddescriptor
public static methodcaller newstatic class theclass  string name
return new methodcaller invokestatic  theclass  name
public static methodcaller newinterface class theclass  string name
return new methodcaller invokeinterface  theclass  name
public static methodcaller newvirtual class theclass  string name
return new methodcaller invokevirtual  theclass  name
public methodcaller int opcode  class theclass  string name
this opcode   opcode
this internalname   type getinternalname theclass
this theclass   theclass
this name   name
public void call methodvisitor methodvisitor
methodvisitor visitmethodinsn opcode  internalname  name  getmethoddescriptor
public string getmethoddescriptor
if  methoddescriptor    null
method method   getmethod
methoddescriptor   type getmethoddescriptor method
return methoddescriptor
protected method getmethod
method methods   theclass getmethods
for  int i   0  i < methods length  i
method method   methods
if  method getname   equals name
return method
throw new classgeneratorexception     name       theclass