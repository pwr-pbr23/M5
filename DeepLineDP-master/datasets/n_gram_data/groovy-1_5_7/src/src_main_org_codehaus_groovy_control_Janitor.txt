/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy control
import java util hashset
import java util iterator
import java util set
/**
*  an agent that can be used to defer cleanup operations to
*  a later time.  users much implement the hascleanup interface.
*
*  @author <a href="mailto:cpoirier@dreaming.org">chris poirier</a>
*
*  @version $id$
*/
public class janitor implements hascleanup
private final set pending   new hashset         all objects pending cleanup
public void register  hascleanup object
pending add  object
public void cleanup
iterator iterator   pending iterator
while  iterator hasnext
hascleanup object    hascleanup iterator next
try   object cleanup      catch  exception e
// ignore
pending clear