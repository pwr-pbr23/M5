/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy lang
import java util hashmap
import java util map
import java util iterator
import org codehaus groovy runtime typehandling defaulttypetransformation
/**
* represents a spreadable map which extends java.util.hashmap.
*
* @author pilho kim
* @version $revision$
*/
public class spreadmap extends hashmap
private map mapdata
private int hashcode
public spreadmap object values
mapdata   new hashmap values length   2
int i   0
while  i < values length
mapdata put values  values
public spreadmap map map
this mapdata   map
public object get object obj
return mapdata get obj
public object put object key  object value
throw new runtimeexception     this
key       value
public object remove object key
throw new runtimeexception     this
key
public void putall map t
throw new runtimeexception     this
t
public int size
return mapdata keyset   size
public boolean equals object that
if  that instanceof spreadmap
return equals  spreadmap  that
return false
public boolean equals spreadmap that
if  that    null  return false
if  size      that size
spreadmap other    spreadmap  that
iterator iter   mapdata keyset   iterator
for    iter hasnext
object key   iter next
if    defaulttypetransformation compareequal get key   other get key
return false
return true
return false
public int hashcode
if  hashcode    0
iterator iter   mapdata keyset   iterator
for    iter hasnext
object key   iter next
int hash    key    null  ? key hashcode     0xbabe
hashcode ^  hash
return hashcode
/**
* returns the string expression of <code>this</code>.
*
* @return the string expression of <code>this</code>
*/
public string tostring
if  mapdata isempty
return
stringbuffer buff   new stringbuffer
iterator iter   mapdata keyset   iterator
for    iter hasnext
object key   iter next
buff append key       mapdata get key
if  iter hasnext
buff append
buff append
return buff tostring