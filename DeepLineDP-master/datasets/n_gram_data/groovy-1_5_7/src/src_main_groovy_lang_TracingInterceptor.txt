/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy lang
import java io ioexception
import java io printwriter
import java io writer
public class tracinginterceptor implements interceptor
protected writer writer   new printwriter system out
private int indent   0
public writer getwriter
return writer
public void setwriter writer writer
this writer   writer
public object beforeinvoke object object  string methodname  object arguments
write object  methodname  arguments
indent
return null
public object afterinvoke object object  string methodname  object arguments  object result
indent
write object  methodname  arguments
return result
public boolean doinvoke
return true
private string indent
stringbuffer result   new stringbuffer
for  int i 0  i<indent i
result append
return result tostring
protected void write object object  string methodname  object arguments  final string origin
try
writer write indent
writer write origin
writer write
class theclass   object instanceof class ?  class  object  object getclass
writeinfo theclass  methodname  arguments
writer write
writer flush
catch  ioexception e
e printstacktrace
protected void writeinfo final class aclass  string methodname  object arguments  throws ioexception
writer write aclass getname
writer write
writer write methodname
writer write
for  int i   0  i < arguments length  i
if  i > 0  writer write
object argument   arguments
writer write argument getclass   getname
writer write