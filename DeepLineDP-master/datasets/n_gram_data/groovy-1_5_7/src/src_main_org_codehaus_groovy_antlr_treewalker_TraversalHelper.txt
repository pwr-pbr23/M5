/*
* copyright 2005 jeremy rayner
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy antlr treewalker
import java util list
import java util arraylist
import org codehaus groovy antlr groovysourceast
import org codehaus groovy antlr antlrastprocessor
import org codehaus groovy antlr parser groovytokentypes
import antlr collections ast
/**
* helper class for antlr ast traversal and visitation.
*
* @author <a href="mailto:groovy@ross-rayner.com">jeremy rayner</a>
* @version $revision$
*/
public abstract class traversalhelper implements antlrastprocessor
protected list unvisitednodes
private final visitor v
public traversalhelper visitor visitor
this unvisitednodes   new arraylist
this v   visitor
protected void setup groovysourceast ast
v setup
protected void teardown groovysourceast ast
v teardown
protected void push groovysourceast ast
v push ast
protected groovysourceast pop
return v pop
protected void visitnode groovysourceast ast  int n
if  ast    null
switch  ast gettype
case groovytokentypes abstract                          v visitabstract ast n                       break
case groovytokentypes annotation                        v visitannotation ast n                     break
case groovytokentypes annotations                       v visitannotations ast n                    break
case groovytokentypes annotation_array_init             v visitannotationarrayinit ast n            break     obsolete?
case groovytokentypes annotation_def                    v visitannotationdef ast n                  break
case groovytokentypes annotation_field_def              v visitannotationfielddef ast n             break
case groovytokentypes annotation_member_value_pair      v visitannotationmembervaluepair ast n      break
case groovytokentypes array_declarator                  v visitarraydeclarator ast n                break
case groovytokentypes assign                            v visitassign ast n                         break
case groovytokentypes at                                v visitat ast n                             break
case groovytokentypes band                              v visitband ast n                           break
case groovytokentypes band_assign                       v visitbandassign ast n                     break
case groovytokentypes big_suffix                        v visitbigsuffix ast n                      break
case groovytokentypes block                             v visitblock ast n                          break
case groovytokentypes bnot                              v visitbnot ast n                           break
case groovytokentypes bor                               v visitbor ast n                            break
case groovytokentypes bor_assign                        v visitborassign ast n                      break
case groovytokentypes bsr                               v visitbsr ast n                            break
case groovytokentypes bsr_assign                        v visitbsrassign ast n                      break
case groovytokentypes bxor                              v visitbxor ast n                           break
case groovytokentypes bxor_assign                       v visitbxorassign ast n                     break
case groovytokentypes case_group                        v visitcasegroup ast n                      break
case groovytokentypes class_def                         v visitclassdef ast n                       break
case groovytokentypes closable_block                    v visitclosedblock ast n                    break
case groovytokentypes closable_block_op                 v visitclosureop ast n                      break
case groovytokentypes closure_list                      v visitclosurelist ast n                    break
case groovytokentypes colon                             v visitcolon ast n                          break
case groovytokentypes comma                             v visitcomma ast n                          break
case groovytokentypes compare_to                        v visitcompareto ast n                      break
case groovytokentypes ctor_call                         v visitctorcall ast n                       break
case groovytokentypes ctor_ident                        v visitctorident ast n                      break
case groovytokentypes dec                               v visitdec ast n                            break
case groovytokentypes digit                             v visitdigit ast n                          break
case groovytokentypes div                               v visitdiv ast n                            break
case groovytokentypes div_assign                        v visitdivassign ast n                      break
case groovytokentypes dollar                            v visitdollar ast n                         break
case groovytokentypes dot                               v visitdot ast n                            break
case groovytokentypes dynamic_member                    v visitdynamicmember ast n                  break
case groovytokentypes elist                             v visitelist ast n                          break
case groovytokentypes empty_stat                        v visitemptystat ast n                      break
case groovytokentypes enum_constant_def                 v visitenumconstantdef ast n                break
case groovytokentypes enum_def                          v visitenumdef ast n                        break
case groovytokentypes eof                               v visiteof ast n                            break
case groovytokentypes equal                             v visitequal ast n                          break
case groovytokentypes esc                               v visitesc ast n                            break
case groovytokentypes exponent                          v visitexponent ast n                       break
case groovytokentypes expr                              v visitexpr ast n                           break
case groovytokentypes extends_clause                    v visitextendsclause ast n                  break
case groovytokentypes final                             v visitfinal ast n                          break
case groovytokentypes float_suffix                      v visitfloatsuffix ast n                    break
case groovytokentypes for_condition                     v visitforcondition ast n                   break
case groovytokentypes for_each_clause                   v visitforeachclause ast n                  break
case groovytokentypes for_init                          v visitforinit ast n                        break
case groovytokentypes for_in_iterable                   v visitforiniterable ast n                  break
case groovytokentypes for_iterator                      v visitforiterator ast n                    break
case groovytokentypes ge                                v visitge ast n                             break
case groovytokentypes gt                                v visitgt ast n                             break
case groovytokentypes hex_digit                         v visithexdigit ast n                       break
case groovytokentypes ident                             v visitident ast n                          break
case groovytokentypes implements_clause                 v visitimplementsclause ast n               break
case groovytokentypes implicit_parameters               v visitimplicitparameters ast n             break
case groovytokentypes import                            v visitimport ast n                         break
case groovytokentypes inc                               v visitinc ast n                            break
case groovytokentypes index_op                          v visitindexop ast n                        break
case groovytokentypes instance_init                     v visitinstanceinit ast n                   break
case groovytokentypes interface_def                     v visitinterfacedef ast n                   break
case groovytokentypes labeled_arg                       v visitlabeledarg ast n                     break
case groovytokentypes labeled_stat                      v visitlabeledstat ast n                    break
case groovytokentypes land                              v visitland ast n                           break
case groovytokentypes lbrack                            v visitlbrack ast n                         break
case groovytokentypes lcurly                            v visitlcurly ast n                         break
case groovytokentypes le                                v visitle ast n                             break
case groovytokentypes letter                            v visitletter ast n                         break
case groovytokentypes list_constructor                  v visitlistconstructor ast n                break
case groovytokentypes literal_as                        v visitliteralas ast n                      break
case groovytokentypes literal_assert                    v visitliteralassert ast n                  break
case groovytokentypes literal_boolean                   v visitliteralboolean ast n                 break
case groovytokentypes literal_break                     v visitliteralbreak ast n                   break
case groovytokentypes literal_byte                      v visitliteralbyte ast n                    break
case groovytokentypes literal_case                      v visitliteralcase ast n                    break
case groovytokentypes literal_catch                     v visitliteralcatch ast n                   break
case groovytokentypes literal_char                      v visitliteralchar ast n                    break
case groovytokentypes literal_class                     v visitliteralclass ast n                   break
case groovytokentypes literal_continue                  v visitliteralcontinue ast n                break
case groovytokentypes literal_def                       v visitliteraldef ast n                     break
case groovytokentypes literal_default                   v visitliteraldefault ast n                 break
case groovytokentypes literal_double                    v visitliteraldouble ast n                  break
case groovytokentypes literal_else                      v visitliteralelse ast n                    break
case groovytokentypes literal_enum                      v visitliteralenum ast n                    break
case groovytokentypes literal_extends                   v visitliteralextends ast n                 break
case groovytokentypes literal_false                     v visitliteralfalse ast n                   break
case groovytokentypes literal_finally                   v visitliteralfinally ast n                 break
case groovytokentypes literal_float                     v visitliteralfloat ast n                   break
case groovytokentypes literal_for                       v visitliteralfor ast n                     break
case groovytokentypes literal_if                        v visitliteralif ast n                      break
case groovytokentypes literal_implements                v visitliteralimplements ast n              break
case groovytokentypes literal_import                    v visitliteralimport ast n                  break
case groovytokentypes literal_in                        v visitliteralin ast n                      break
case groovytokentypes literal_instanceof                v visitliteralinstanceof ast n              break
case groovytokentypes literal_int                       v visitliteralint ast n                     break
case groovytokentypes literal_interface                 v visitliteralinterface ast n               break
case groovytokentypes literal_long                      v visitliterallong ast n                    break
case groovytokentypes literal_native                    v visitliteralnative ast n                  break
case groovytokentypes literal_new                       v visitliteralnew ast n                     break
case groovytokentypes literal_null                      v visitliteralnull ast n                    break
case groovytokentypes literal_package                   v visitliteralpackage ast n                 break
case groovytokentypes literal_private                   v visitliteralprivate ast n                 break
case groovytokentypes literal_protected                 v visitliteralprotected ast n               break
case groovytokentypes literal_public                    v visitliteralpublic ast n                  break
case groovytokentypes literal_return                    v visitliteralreturn ast n                  break
case groovytokentypes literal_short                     v visitliteralshort ast n                   break
case groovytokentypes literal_static                    v visitliteralstatic ast n                  break
case groovytokentypes literal_super                     v visitliteralsuper ast n                   break
case groovytokentypes literal_switch                    v visitliteralswitch ast n                  break
case groovytokentypes literal_synchronized              v visitliteralsynchronized ast n            break
case groovytokentypes literal_this                      v visitliteralthis ast n                    break
case groovytokentypes literal_threadsafe                v visitliteralthreadsafe ast n              break
case groovytokentypes literal_throw                     v visitliteralthrow ast n                   break
case groovytokentypes literal_throws                    v visitliteralthrows ast n                  break
case groovytokentypes literal_transient                 v visitliteraltransient ast n               break
case groovytokentypes literal_true                      v visitliteraltrue ast n                    break
case groovytokentypes literal_try                       v visitliteraltry ast n                     break
case groovytokentypes literal_void                      v visitliteralvoid ast n                    break
case groovytokentypes literal_volatile                  v visitliteralvolatile ast n                break
case groovytokentypes literal_while                     v visitliteralwhile ast n                   break
case groovytokentypes lnot                              v visitlnot ast n                           break
case groovytokentypes lor                               v visitlor ast n                            break
case groovytokentypes lparen                            v visitlparen ast n                         break
case groovytokentypes lt                                v visitlt ast n                             break
case groovytokentypes map_constructor                   v visitmapconstructor ast n                 break
case groovytokentypes member_pointer                    v visitmemberpointer ast n                  break
case groovytokentypes method_call                       v visitmethodcall ast n                     break
case groovytokentypes method_def                        v visitmethoddef ast n                      break
case groovytokentypes minus                             v visitminus ast n                          break
case groovytokentypes minus_assign                      v visitminusassign ast n                    break
case groovytokentypes ml_comment                        v visitmlcomment ast n                      break
case groovytokentypes mod                               v visitmod ast n                            break
case groovytokentypes modifiers                         v visitmodifiers ast n                      break
case groovytokentypes mod_assign                        v visitmodassign ast n                      break
case groovytokentypes nls                               v visitnls ast n                            break
case groovytokentypes not_equal                         v visitnotequal ast n                       break
case groovytokentypes null_tree_lookahead               v visitnulltreelookahead ast n              break
case groovytokentypes num_big_decimal                   v visitnumbigdecimal ast n                  break
case groovytokentypes num_big_int                       v visitnumbigint ast n                      break
case groovytokentypes num_double                        v visitnumdouble ast n                      break
case groovytokentypes num_float                         v visitnumfloat ast n                       break
case groovytokentypes num_int                           v visitnumint ast n                         break
case groovytokentypes num_long                          v visitnumlong ast n                        break
case groovytokentypes objblock                          v visitobjblock ast n                       break
case groovytokentypes one_nl                            v visitonenl ast n                          break
case groovytokentypes optional_dot                      v visitoptionaldot ast n                    break
case groovytokentypes package_def                       v visitpackagedef ast n                     break
case groovytokentypes parameters                        v visitparameters ast n                     break
case groovytokentypes parameter_def                     v visitparameterdef ast n                   break
case groovytokentypes plus                              v visitplus ast n                           break
case groovytokentypes plus_assign                       v visitplusassign ast n                     break
case groovytokentypes post_dec                          v visitpostdec ast n                        break
case groovytokentypes post_inc                          v visitpostinc ast n                        break
case groovytokentypes question                          v visitquestion ast n                       break
case groovytokentypes range_exclusive                   v visitrangeexclusive ast n                 break
case groovytokentypes range_inclusive                   v visitrangeinclusive ast n                 break
case groovytokentypes rbrack                            v visitrbrack ast n                         break
case groovytokentypes rcurly                            v visitrcurly ast n                         break
case groovytokentypes regexp_ctor_end                   v visitregexpctorend ast n                  break
case groovytokentypes regexp_literal                    v visitregexpliteral ast n                  break
case groovytokentypes regexp_symbol                     v visitregexpsymbol ast n                   break
case groovytokentypes regex_find                        v visitregexfind ast n                      break
case groovytokentypes regex_match                       v visitregexmatch ast n                     break
case groovytokentypes rparen                            v visitrparen ast n                         break
case groovytokentypes select_slot                       v visitselectslot ast n                     break
case groovytokentypes semi                              v visitsemi ast n                           break
case groovytokentypes sh_comment                        v visitshcomment ast n                      break
case groovytokentypes sl                                v visitsl ast n                             break
case groovytokentypes slist                             v visitslist ast n                          break
case groovytokentypes sl_assign                         v visitslassign ast n                       break
case groovytokentypes sl_comment                        v visitslcomment ast n                      break
case groovytokentypes spread_arg                        v visitspreadarg ast n                      break
case groovytokentypes spread_dot                        v visitspreaddot ast n                      break
case groovytokentypes spread_map_arg                    v visitspreadmaparg ast n                   break
case groovytokentypes sr                                v visitsr ast n                             break
case groovytokentypes sr_assign                         v visitsrassign ast n                       break
case groovytokentypes star                              v visitstar ast n                           break
case groovytokentypes star_assign                       v visitstarassign ast n                     break
case groovytokentypes star_star                         v visitstarstar ast n                       break
case groovytokentypes star_star_assign                  v visitstarstarassign ast n                 break
case groovytokentypes static_import                     v visitstaticimport ast n                   break
case groovytokentypes static_init                       v visitstaticinit ast n                     break
case groovytokentypes strictfp                          v visitstrictfp ast n                       break
case groovytokentypes string_ch                         v visitstringch ast n                       break
case groovytokentypes string_constructor                v visitstringconstructor ast n              break
case groovytokentypes string_ctor_end                   v visitstringctorend ast n                  break
case groovytokentypes string_ctor_middle                v visitstringctormiddle ast n               break
case groovytokentypes string_ctor_start                 v visitstringctorstart ast n                break
case groovytokentypes string_literal                    v visitstringliteral ast n                  break
case groovytokentypes string_nl                         v visitstringnl ast n                       break
case groovytokentypes super_ctor_call                   v visitsuperctorcall ast n                  break
case groovytokentypes triple_dot                        v visittripledot ast n                      break
case groovytokentypes type                              v visittype ast n                           break
case groovytokentypes typecast                          v visittypecast ast n                       break
case groovytokentypes type_argument                     v visittypeargument ast n                   break
case groovytokentypes type_arguments                    v visittypearguments ast n                  break
case groovytokentypes type_lower_bounds                 v visittypelowerbounds ast n                break
case groovytokentypes type_parameter                    v visittypeparameter ast n                  break
case groovytokentypes type_parameters                   v visittypeparameters ast n                 break
case groovytokentypes type_upper_bounds                 v visittypeupperbounds ast n                break
case groovytokentypes unary_minus                       v visitunaryminus ast n                     break
case groovytokentypes unary_plus                        v visitunaryplus ast n                      break
case groovytokentypes unused_const                      v visitunusedconst ast n                    break
case groovytokentypes unused_do                         v visitunuseddo ast n                       break
case groovytokentypes unused_goto                       v visitunusedgoto ast n                     break
case groovytokentypes variable_def                      v visitvariabledef ast n                    break
case groovytokentypes variable_parameter_def            v visitvariableparameterdef ast n           break
case groovytokentypes vocab                             v visitvocab ast n                          break
case groovytokentypes wildcard_type                     v visitwildcardtype ast n                   break
case groovytokentypes ws                                v visitws ast n                             break
default                                                 v visitdefault ast n                        break
else
// the supplied ast was null
v visitdefault null n
protected abstract void accept groovysourceast currentnode
protected void accept_v_firstchildsfirstchild_v_child2_child3_v_child4_v___v_lastchild groovysourceast t
openingvisit t
groovysourceast expr2   t childat 0
skip expr2
accept expr2 childat 0
closingvisit t
groovysourceast sibling    groovysourceast expr2 getnextsibling
boolean firstslist   true
while  sibling    null
if   firstslist
subsequentvisit t
firstslist   false
accept sibling
sibling    groovysourceast sibling getnextsibling
protected void accept_v_firstchildsfirstchild_v_restofthechildren groovysourceast t
openingvisit t
groovysourceast expr   t childat 0
skip expr
accept expr childat 0
closingvisit t
acceptsiblings expr
protected void accept_firstchild_v_secondchild groovysourceast t
accept t childat 0
subsequentvisit t
accept t childat 1
protected void accept_firstchild_v_secondchild_v groovysourceast t
accept t childat 0
openingvisit t
accept t childat 1
closingvisit t
protected void accept_firstchild_v_secondchildschildren_v groovysourceast t
accept t childat 0
openingvisit t
groovysourceast secondchild   t childat 1
if  secondchild    null
acceptchildren secondchild
closingvisit t
protected void accept_v_firstchild_secondchild_v_thirdchild_v groovysourceast t
openingvisit t
accept t childat 0
accept t childat 1
subsequentvisit t
accept t childat 2
closingvisit t
protected void accept_firstchild_v_secondchild_v_thirdchild_v groovysourceast t
accept t childat 0
openingvisit t
accept t childat 1
subsequentvisit t
accept t childat 2
closingvisit t
protected void accept_firstsecondandthirdchild_v_v_forthchild groovysourceast t
groovysourceast child1    groovysourceast t getfirstchild
if  child1    null
accept child1
groovysourceast child2    groovysourceast child1 getnextsibling
if  child2    null
accept child2
groovysourceast child3    groovysourceast child2 getnextsibling
if  child3    null
accept child3
openingvisit t
groovysourceast child4    groovysourceast child3 getnextsibling
if  child4    null
subsequentvisit t
accept child4
protected void accept_v_firstchild_2ndv_secondchild_v___lastchild_v groovysourceast t
openingvisit t
groovysourceast child    groovysourceast t getfirstchild
if  child    null
accept child
groovysourceast sibling    groovysourceast child getnextsibling
if  sibling    null
secondvisit t
accept sibling
sibling    groovysourceast sibling getnextsibling
while  sibling    null
subsequentvisit t
accept sibling
sibling    groovysourceast sibling getnextsibling
closingvisit t
protected void accept_v_firstchild_v_secondchild_v___lastchild_v groovysourceast t
openingvisit t
groovysourceast child    groovysourceast t getfirstchild
if  child    null
accept child
groovysourceast sibling    groovysourceast child getnextsibling
while  sibling    null
subsequentvisit t
accept sibling
sibling    groovysourceast sibling getnextsibling
closingvisit t
protected void accept_v_firstchild_v groovysourceast t
openingvisit t
accept t childat 0
closingvisit t
protected void accept_v_siblings_v groovysourceast t
openingvisit t
acceptsiblings t
closingvisit t
protected void accept_v_allchildren_v_siblings groovysourceast t
openingvisit t
acceptchildren t
closingvisit t
acceptsiblings t
protected void accept_v_allchildren_v groovysourceast t
openingvisit t
acceptchildren t
closingvisit t
protected void accept_firstchild_v_restofthechildren groovysourceast t
accept t childat 0
openingvisit t
closingvisit t
acceptsiblings t childat 0
protected void accept_firstchild_v_restofthechildren_v_lastchild groovysourceast t
int count   0
accept t childat 0
count
openingvisit t
if  t childat 0     null
groovysourceast sibling    groovysourceast t childat 0  getnextsibling
while  sibling    null
if  count    t getnumberofchildren     1   closingvisit t
accept sibling
count
sibling    groovysourceast sibling getnextsibling
protected void accept_firstchild_v_restofthechildren_v groovysourceast t
accept t childat 0
openingvisit t
acceptsiblings t childat 0
closingvisit t
protected void accept_v_firstchild_v_restofthechildren groovysourceast t
accept_v_firstchild_v t
acceptsiblings t childat 0
protected void accept_v_firstchild_v_restofthechildren_v groovysourceast t
openingvisit t
accept t childat 0
subsequentvisit t
acceptsiblings t childat 0
closingvisit t
protected void acceptsiblings groovysourceast t
if  t    null
groovysourceast sibling    groovysourceast t getnextsibling
while  sibling    null
accept sibling
sibling    groovysourceast sibling getnextsibling
protected void acceptchildren groovysourceast t
if  t    null
groovysourceast child    groovysourceast t getfirstchild
if  child    null
accept child
acceptsiblings child
protected void skip groovysourceast expr
unvisitednodes remove expr
protected void openingvisit groovysourceast t
unvisitednodes remove t
int n   visitor opening_visit
visitnode t  n
protected void secondvisit groovysourceast t
int n   visitor second_visit
visitnode t  n
protected void subsequentvisit groovysourceast t
int n   visitor subsequent_visit
visitnode t  n
protected void closingvisit groovysourceast t
int n   visitor closing_visit
visitnode t  n
public ast process ast t
groovysourceast node    groovysourceast  t
// process each node in turn
setup node
accept node
acceptsiblings node
teardown node
return null