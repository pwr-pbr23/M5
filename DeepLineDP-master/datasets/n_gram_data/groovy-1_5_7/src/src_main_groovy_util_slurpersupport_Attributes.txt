/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy util slurpersupport
import groovy lang closure
import groovy lang groovyobject
import groovy lang groovyruntimeexception
import java io ioexception
import java io writer
import java util map
import java util iterator
import java util list
import java util arraylist
/**
* @author john wilson
*/
class attributes extends nodechildren
final string attributename
public attributes final gpathresult parent  final string name  final string namespaceprefix  final map namespacetaghints
super parent  name  namespaceprefix  namespacetaghints
this attributename   this name substring 1
public attributes final gpathresult parent  final string name  final map namespacetaghints
this parent  name     namespacetaghints
public string name
// this name contains @name we need to return name
return this name substring 1
public iterator childnodes
throw new groovyruntimeexception     this parent name         name
public iterator iterator
return new nodeiterator nodeiterator
protected object getnextnode final iterator iter
while  iter hasnext
final object next   iter next
if  next instanceof attribute
return next
else
final string value    string    node  next  attributes   get attributes this attributename
if  value    null
return new attribute attributes this attributename
value
new nodechild  node  next  attributes this parent parent     attributes this namespacetaghints
attributes this namespacetaghints
return null
public iterator nodeiterator
return this parent nodeiterator
public gpathresult parents
return super parents
public string text
final stringbuffer buf   new stringbuffer
final iterator iter   iterator
while  iter hasnext
buf append iter next
return buf tostring
public list list
final iterator iter   iterator
final list result   new arraylist
while  iter hasnext
result add iter next
return result
public gpathresult findall final closure closure
return new filteredattributes this  closure  this namespacetaghints
public writer writeto final writer out  throws ioexception
out write text
return out
public void build final groovyobject builder
builder getproperty
builder invokemethod    new object text