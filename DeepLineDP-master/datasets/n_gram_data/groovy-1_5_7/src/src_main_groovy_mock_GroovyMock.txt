/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy mock
import groovy lang groovyobject
import groovy lang closure
import groovy lang groovyobjectsupport
import com mockobjects verifiable
import com mockobjects dynamic
/**
*
* @author joe walnes
* @author chris stevenson
* @deprecated  as of groovy 1.5 replaced by mockfor (or use an external mocking package)
*              {@link groovy.mock.interceptor.mockfor}
*/
public class groovymock extends groovyobjectsupport implements verifiable
private callbag calls   new callbag
private callfactory callfactory   new defaultcallfactory
private mock mock   new mock i class
interface i
private groovyobject instance   new groovyobjectsupport
public object invokemethod string name  object args
return callmethod name  args
public object invokemethod string name  object args
if  name equals
verify
else
expectmethod name  args
return null
public groovyobject getinstance
return instance
public static groovymock newinstance
return new groovymock
private void expectmethod string name  object args
constraintmatcher constraintmatcher   creatematcher args
calls addexpect
callfactory createcallexpectation
callfactory createcallsignature name  constraintmatcher  callfactory createvoidstub
private constraintmatcher creatematcher object args
if args getclass   isarray
object argarray    object  args
if  argarray instanceof closure
closure closure    closure  argarray
return c args new closureconstraintmatcher closure
return c args c eq args
private object callmethod string name  object args
try
return calls call mock  name  new object   args
catch  throwable throwable
throw new runtimeexception throwable
public void verify
calls verify