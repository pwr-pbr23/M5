/*
* copyright 2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org codehaus groovy binding
import groovy lang closure
/**
* @author <a href="mailto:shemnon@yahoo.com">danno ferrin</a>
* @version $revision$
* @since groovy 1.1
*/
public abstract class abstractfullbinding  implements fullbinding
protected sourcebinding sourcebinding
protected targetbinding targetbinding
protected closure validator
protected closure converter
protected closure reverseconverter
private void firebinding
if   sourcebinding    null      targetbinding    null
// should we throw invalid binding exception?  or fail quietly?
return
object result   sourcebinding getsourcevalue
if  getvalidator      null
object validation   getvalidator   call
if   validation    null
validation instanceof boolean        boolean validation  booleanvalue
// should we throw a validation failed exception?  or fail quietly?
return
if  getconverter      null
result   getconverter   call result
targetbinding updatetargetvalue result
public void update
firebinding
private void firereversebinding
if    sourcebinding instanceof targetbinding       targetbinding instanceof sourcebinding
throw new runtimeexception
object result     sourcebinding targetbinding  getsourcevalue
if  getreverseconverter      null
result   getreverseconverter   call result
targetbinding sourcebinding  updatetargetvalue result
public void reverseupdate
firereversebinding
public sourcebinding getsourcebinding
return sourcebinding
public void setsourcebinding sourcebinding sourcebinding
this sourcebinding   sourcebinding
public targetbinding gettargetbinding
return targetbinding
public void settargetbinding targetbinding targetbinding
this targetbinding   targetbinding
public closure getvalidator
return validator
public void setvalidator closure validator
this validator   validator
public closure getconverter
return converter
public void setconverter closure converter
this converter   converter
public closure getreverseconverter
return reverseconverter
public void setreverseconverter closure reverseconverter
this reverseconverter   reverseconverter