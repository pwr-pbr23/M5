/*
* copyright 2003-2007 the original author or authors.
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package groovy model
import groovy lang closure
import org codehaus groovy runtime invokerhelper
import javax swing table abstracttablemodel
import javax swing table defaulttablecolumnmodel
import javax swing table tablecolumnmodel
import javax swing table tablecolumn
import java util collections
import java util list
/**
* a default table model made up of propertymodels on a value model.
*
* @author <a href="mailto:james@coredevelopers.net">james strachan</a>
* @version $revision$
*/
public class defaulttablemodel extends abstracttablemodel
private valuemodel rowmodel
private valuemodel rowsmodel
private mytablecolumnmodel columnmodel   new mytablecolumnmodel
public defaulttablemodel valuemodel rowsmodel
this rowsmodel  new valueholder
public defaulttablemodel valuemodel rowsmodel  valuemodel rowmodel
this rowmodel   rowmodel
this rowsmodel   rowsmodel
/**
* @return the column definitions.
*/
public list getcolumnlist
return columnmodel getcolumnlist
public tablecolumnmodel getcolumnmodel
return columnmodel
/**
* adds a property model column to the table
*/
public defaulttablecolumn addpropertycolumn object headervalue  string property  class type
return addcolumn headervalue  new propertymodel rowmodel  property  type
/**
* adds a property model column to the table
*/
public defaulttablecolumn addpropertycolumn object headervalue  string property  class type  boolean editable
return addcolumn headervalue  new propertymodel rowmodel  property  type  editable
/**
* adds a closure based column to the table
*/
public defaulttablecolumn addclosurecolumn object headervalue  closure readclosure  closure writeclosure  class type
return addcolumn headervalue  new closuremodel rowmodel  readclosure  writeclosure  type
public defaulttablecolumn addcolumn object headervalue  valuemodel columnvaluemodel
defaulttablecolumn answer   new defaulttablecolumn headervalue  columnvaluemodel
addcolumn answer
return answer
/**
* adds a new column definition to the table
*/
public void addcolumn defaulttablecolumn column
column setmodelindex columnmodel getcolumncount
columnmodel addcolumn column
/**
* removes a column definition from the table
*/
public void removecolumn defaulttablecolumn column
columnmodel removecolumn column
public int getrowcount
return getrows   size
public int getcolumncount
return columnmodel getcolumncount
public string getcolumnname int columnindex
string answer   null
if  columnindex < 0    columnindex >  columnmodel getcolumncount
return answer
object value   columnmodel getcolumn columnindex  getheadervalue
if  value    null
return value tostring
return answer
public class getcolumnclass int columnindex
return getcolumnmodel columnindex  gettype
public boolean iscelleditable int rowindex  int columnindex
return getcolumnmodel columnindex  iseditable
public object getvalueat int rowindex  int columnindex
list rows   getrows
object answer   null
if  rowindex < 0    rowindex >  rows size
return answer
if  columnindex < 0    columnindex >  columnmodel getcolumncount
return answer
object row   getrows   get rowindex
rowmodel setvalue row
defaulttablecolumn column    defaulttablecolumn  columnmodel getcolumn columnindex
if  row    null    column    null
return answer
return column getvalue row  rowindex  columnindex
public void setvalueat object value  int rowindex  int columnindex
list rows   getrows
if  rowindex < 0    rowindex >  rows size
return
if  columnindex < 0    columnindex >  columnmodel getcolumncount
return
object row   getrows   get rowindex
rowmodel setvalue row
defaulttablecolumn column    defaulttablecolumn  columnmodel getcolumn columnindex
if  row    null    column    null
return
column setvalue row  value  rowindex  columnindex
protected valuemodel getcolumnmodel int columnindex
defaulttablecolumn column    defaulttablecolumn  columnmodel getcolumn columnindex
return column getvaluemodel
protected list getrows
object value   rowsmodel getvalue
if  value    null
return collections empty_list
return invokerhelper aslist value
protected static class mytablecolumnmodel extends defaulttablecolumnmodel
public list getcolumnlist
return tablecolumns
public void removecolumn tablecolumn column
super removecolumn column
renumbertablecolumns
public void movecolumn int columnindex  int newindex
super movecolumn columnindex  newindex
renumbertablecolumns
public void renumbertablecolumns
for  int i   tablecolumns size     1  i >  0  i
defaulttablecolumn tablecolumns get i   setmodelindex i
public valuemodel getrowmodel
return rowmodel
public valuemodel getrowsmodel
return rowsmodel