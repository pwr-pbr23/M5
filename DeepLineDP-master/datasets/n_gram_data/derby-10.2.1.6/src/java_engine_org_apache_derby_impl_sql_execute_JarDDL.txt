/*
derby - class org.apache.derby.impl.sql.execute.jarddl
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby impl sql execute
import org apache derby iapi services context contextservice
import org apache derby iapi error standardexception
import org apache derby iapi sql conn languageconnectioncontext
import org apache derby iapi sql execute constantaction
import org apache derby iapi sql execute executioncontext
import org apache derby iapi store access fileresource
public class jarddl
/**
add a jar file to the current connection's database.
@exception standardexception opps
*/
static public void
add string schemaname  string sqlname  string externalpath
throws standardexception
schemaname   jarddl getschemaname schemaname
genericconstantactionfactory caf   getconstantactionfactory
constantaction ca
caf getaddjarconstantaction null schemaname sqlname externalpath
ca executeconstantaction null
/**
drop a jar file from the current connection's database.
@exception standardexception opps
*/
static public void
drop string schemaname  string sqlname
throws standardexception
schemaname   jarddl getschemaname schemaname
genericconstantactionfactory caf   getconstantactionfactory
constantaction ca
caf getdropjarconstantaction null schemaname sqlname
ca executeconstantaction null
/**
replace a jar file from the current connection's database with the content of an
external file.
@exception standardexception opps
*/
static public void
replace string schemaname  string sqlname string externalpath
throws standardexception
schemaname   jarddl getschemaname schemaname
genericconstantactionfactory caf   getconstantactionfactory
constantaction ca
caf getreplacejarconstantaction null schemaname sqlname externalpath
ca executeconstantaction null
private static genericconstantactionfactory getconstantactionfactory
executioncontext ec
executioncontext contextservice getcontext executioncontext context_id
genericexecutionfactory gef
genericexecutionfactory ec getexecutionfactory
genericconstantactionfactory caf   gef getconstantactionfactory
return caf
private static string getschemaname string schemaname
if  schemaname    null
return schemaname
// find the language context.
languageconnectioncontext lcc    languageconnectioncontext  contextservice getcontext languageconnectioncontext context_id
schemaname   lcc getcurrentschemaname
return schemaname
/**
make an external name for a file stored in the database.
*/
public static string mkexternalname string schemaname  string sqlname  char separatorchar
stringbuffer sb   new stringbuffer 30
sb append fileresource jar_directory_name
sb append separatorchar
sb append schemaname
sb append separatorchar
sb append sqlname
sb append
return sb tostring