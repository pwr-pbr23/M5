/*
derby - class org.apache.derby.impl.sql.compile.aggregatedefinition
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package	org apache derby impl sql compile
import java lang stringbuffer
import org apache derby catalog typedescriptor
import java sql sqlexception
/**
* an aggregatedefinition defines an aggregate.
*
* it is used
* by cloudscape during query compilation to determine what
* aggregator is used to aggregate a particular data type
* and what datatype the aggregator will emit.  a single
* aggregatedefinition may map to one or more aggregators
* depending on the input type.  for example, a user defined
* stdev aggregate may use one aggregator implementation for the
* integer type and another for a user defined type that implements
* a point.  in this case, both the aggregators would have a
* single aggregatedefinition that would chose the appropriate
* aggregator based on the input type.  on the other hand, if
* only a single aggregator is needed to aggregate over all
* of the input types (e.g. count()), then it may be convenient
* to implement both the aggregatedefinition and the aggregator
* interfaces by the same class.
*
* @see org.apache.derby.catalog.typedescriptor
*/
interface aggregatedefinition
/**
* get the aggregator that performs the aggregation on the
* input datatype at execution time.  if the input type can be handled,
* return a type descriptor with the resultant type information and
* fill in the string buffer with the name of the class that
* is used to perform the aggregation over the input type.
* if the aggregate cannot be performed on this type, then
* a null should be returned.
* <p>
* the aggregator class must implement a zero argument
* constructor.  the aggregator class can be the same class
* as the aggregatedefinition if it implements both interfaces.
* <p>
* the result datatype may be the same as the input datatype
* or a different datatype.  to create your own type descriptor
* to return to this method, see <i>com.ibm.db2j.types.typefactory</i>.
*
* @param inputtype	the input type descriptor
* @param aggregatorclassname	output parameter, filled in
*		with the class name that implements <i>com.ibm.db2j.aggregates.aggregator</i>
*
* @return the output type descriptor (which may or may not
*		be the same as the input type -- it is ok to simply
*		return the input type).  null is returned
*		if the aggregate cannot process the input type.
*		note that the output type may be a type that maps
* 		directly to a standard sql (e.g. <i>java.lang.integer</i>)
*		or any other java type (e.g. <i>java.sql.resultset</i>,
*		<i>java.util.vector</i>, <i>java.util.timezone</i> or whatever).
*		to construct a type descriptor see <i>com.ibm.db2j.types.typefactory</i>.
*
* @see org.apache.derby.catalog.typedescriptor
*
* @exception sqlexception thrown on error.
*/
public	typedescriptor getaggregator typedescriptor inputtype
stringbuffer aggregatorclassname
throws sqlexception