/*
derby - class org.apache.derby.iapi.types.xmldatavalue
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby iapi types
import org apache derby iapi error standardexception
public interface xmldatavalue extends datavaluedescriptor
/**
* method to parse an xml string and, if it's valid,
* store the _serialized_ version locally and then return
* this xmldatavalue.
*
* @param text the string value to check.
* @param preservews whether or not to preserve
*  ignorable whitespace.
* @param sqlxutil contains sql/xml objects and util
*  methods that facilitate execution of xml-related
*  operations
* @return if 'text' constitutes a valid xml document,
*  it has been stored in this xml value and this xml
*  value returned; otherwise, an exception is thrown.
* @exception standardexception thrown on error.
*/
public xmldatavalue xmlparse string text  boolean preservews
sqlxmlutil sqlxutil  throws standardexception
/**
* the sql/xml xmlserialize operator.
* serializes this xml value into a string with a user-specified
* character type, and returns that string via the received
* stringdatavalue (if the received stringdatavalue is non-null
* and of the correct type; else, a new stringdatavalue is
* returned).
*
* @param result the result of a previous call to this method,
*  null if not called yet.
* @param targettype the string type to which we want to serialize.
* @param targetwidth the width of the target type.
* @return a serialized (to string) version of this xml object,
*  in the form of a stringdatavalue object.
* @exception standardexception thrown on error
*/
public stringdatavalue xmlserialize stringdatavalue result
int targettype  int targetwidth  throws standardexception
/**
* the sql/xml xmlexists operator.
* checks to see if evaluation of the query expression contained
* within the received util object against this xml value returns
* at least one item. note: for now, the query expression must be
* xpath only (xquery not supported) because that's what xalan
* supports.
*
* @param sqlxutil contains sql/xml objects and util
*  methods that facilitate execution of xml-related
*  operations
* @return true if evaluation of the query expression stored
*  in sqlxutil returns at least one node for this xml value;
*  unknown if the xml value is null; false otherwise.
* @exception standardexception thrown on error
*/
public booleandatavalue xmlexists sqlxmlutil sqlxutil
throws standardexception
/**
* evaluate the xml query expression contained within the received
* util object against this xml value and store the results into
* the received xmldatavalue "result" param (assuming "result" is
* non-null; else create a new xmldatavalue).
*
* @param result the result of a previous call to this method; null
*  if not called yet.
* @param sqlxutil contains sql/xml objects and util methods that
*  facilitate execution of xml-related operations
* @return an xmldatavalue whose content corresponds to the serialized
*  version of the results from evaluation of the query expression.
*  note: this xmldatavalue may not be storable into derby xml
*  columns.
* @exception exception thrown on error (and turned into a
*  standardexception by the caller).
*/
public xmldatavalue xmlquery xmldatavalue result  sqlxmlutil sqlxutil
throws standardexception
/* ****
* helper classes and methods.
* */
/**
* set this xml value's qualified type.
*/
public void setxtype int xtype
/**
* retrieve this xml value's qualified type.
*/
public int getxtype
/**
* take note of the fact this xml value represents an xml
* sequence that has one or more top-level attribute nodes.
*/
public void markashavingtoplevelattr
/**
* return whether or not this xml value represents a sequence
* that has one or more top-level attribute nodes.
*/
public boolean hastoplevelattr