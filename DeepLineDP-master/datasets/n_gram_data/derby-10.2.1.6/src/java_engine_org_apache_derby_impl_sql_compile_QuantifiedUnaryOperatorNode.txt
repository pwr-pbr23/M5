/*
derby - class org.apache.derby.impl.sql.compile.quantifiedunaryoperatornode
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package	org apache derby impl sql compile
import org apache derby iapi sql dictionary datadictionary
import org apache derby iapi error standardexception
import org apache derby iapi services sanity sanitymanager
import org apache derby iapi util jbitset
import java util vector
/**
* a quantifiedunaryoperatornode represents a unary quantified predicate
* that is used with a subquery, such as exists and not exists.  quantified
* predicates all return boolean values.  all quantified operators will be
* removed from the tree by the time we get to code generation - they will
* be replaced by other constructs that can be compiled. for example,
* an exists node may be converted to a type of join.
*
* @author jeff lichtman
*/
public class quantifiedunaryoperatornode extends unaryoperatornode
/*
** for not exists (select * ...), the parser will generate a not
** node and an exists node.  later, normalization will change this
** to a not_exists node.
*/
public final static int exists		  1
public final static int not_exists	  2
subquerynode	operand
/**
* prints the sub-nodes of this object.  see querytreenode.java for
* how tree printing is supposed to work.
*
* @param depth		the depth of this node in the tree
*/
public void printsubnodes int depth
if  sanitymanager debug
super printsubnodes depth
if  operand    null
printlabel depth
operand treeprint depth   1
/**
* bind this expression.  this means binding the sub-expressions,
* as well as figuring out what the return type is for this expression.
*
* @param fromlist		the from list for the query this
*				expression is in, for binding columns.
* @param subquerylist		the subquery list being built as we find subquerynodes
* @param aggregatevector	the aggregate vector being built as we find aggregatenodes
*
* @return	the new top of the expression tree.
*
* @exception standardexception		thrown on error
*/
public valuenode bindexpression fromlist fromlist  subquerylist subquerylist
vector	aggregatevector
throws standardexception
operand bind
/* resolve: need to bind this node */
/* resolve: need to set the subqueryoperator in the subquerynode */
return this