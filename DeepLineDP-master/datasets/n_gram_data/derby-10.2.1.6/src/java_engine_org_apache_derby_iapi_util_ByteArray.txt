/*
derby - class org.apache.derby.iapi.util.bytearray
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby iapi util
import java io objectoutput
import java io objectinput
import java io ioexception
/**
bytearray wraps java byte arrays (byte[]) to allow
byte arrays to be used as keys in hashtables.
this is required because the equals function on
byte[] directly uses reference equality.
<p>
this class also allows the trio of array, offset and length
to be carried around as a single object.
*/
public final class bytearray
private byte array
private int    offset
private int    length
/**
create an instance of this class that wraps ths given array.
this class does not make a copy of the array, it just saves
the reference.
*/
public bytearray byte array  int offset  int length
this array   array
this offset   offset
this length   length
public bytearray byte array
this array  0  array length
public bytearray
public void setbytes byte array
this array   array
offset   0
length   array length
public void setbytes byte array  int length
this array   array
this offset   0
this length   length
public void setbytes byte array  int offset  int length
this array   array
this offset   offset
this length   length
/**
value equality for byte arrays.
*/
public boolean equals object other
if  other instanceof bytearray
bytearray ob    bytearray  other
return bytearray equals array  offset  length  ob array  ob offset  ob length
return false
/**
*/
public int hashcode
byte larray   array
int hash   length
for  int i   0  i < length  i
hash    larray
return hash
public final byte getarray
return array
public final int getoffset
return offset
public final int getlength
return length
public final void setlength int newlength
length   newlength
/**
* read this object from a stream of stored objects.
*
* @param in read this.
*
* @exception ioexception					thrown on error
*/
public void readexternal  objectinput in   throws ioexception
int len   length   in readint
offset   0
array   new byte
in readfully array  0  len
/**
* write the byte array out w/o compression
*
* @param out write bytes here.
*
* @exception ioexception		thrown on error
*/
public void writeexternal objectoutput out  throws ioexception
out writeint length
out write array  offset  length
/**
compare two byte arrays using value equality.
two byte arrays are equal if their length is
identical and their contents are identical.
*/
private static boolean equals byte a  int aoffset  int alength  byte b  int boffset  int blength
if  alength    blength
return false
for  int i   0  i < alength  i
if  a    b
return false
return true