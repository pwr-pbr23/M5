/*
derby - class org.apache.derby.impl.tools.ij.attributeholder
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby impl tools ij
import org apache derby iapi reference attribute
import org apache derby iapi tools i18n localizedresource
import org apache derby tools urlcheck
import java util locale
import java util vector
import java util properties
import java util enumeration
import java util stringtokenizer
import java lang reflect field
import java sql sqlexception
public class attributeholder
//this is an inner class.  this class hold the details about each
//specific attribute which includes what the attribute is and
//any error found.
string name
string value
string token
vector errors   new vector
public string getname
return name
public void setname string astring
name   astring
string getvalue
return value
public void setvalue string astring
value   astring
string gettoken
return token
public void settoken string astring
token   astring
public void adderror string astring
//keep track of error message for later display.
if   errors contains astring
errors addelement astring
public void check  vector validprops
checkname  validprops
//checkvalue();
displayerrors
void displayerrors
//if no error are found then nothing is displayed.
enumeration e   errors elements
//in the first line, show the exact token that was parsed from
//the url.
if  e hasmoreelements
display localizedresource getmessage       gettoken
//show all errors.  more than one error can be found for an attribute.
while  e hasmoreelements
string astring    string e nextelement
displayindented astring
void checkname  vector validprops
if  validprops    null
return     valid properties are unknown
string anatt   getname
try
//check the found name against valid names.
if   validprops contains anatt
//check for case spelling of the name.
if  validprops contains anatt tolowercase java util locale english
errors addelement localizedresource getmessage
//check if this is even a valid attribute name.
else
errors addelement localizedresource getmessage
else
//this is a valid attribute.
catch  exception ex
ex printstacktrace
void checkvalue
string anatt   getname
string avalue   getvalue
try
//check all attribute that require a boolean.
if  urlcheck getbooleanattributes   contains anatt
if   checkboolean avalue
errors addelement localizedresource getmessage
catch  exception ex
ex printstacktrace
boolean checkboolean string avalue
if  avalue    null
return false
return avalue tolowercase locale english  equals
avalue tolowercase locale english  equals
void display string astring
localizedresource outputwriter   println astring
void displayindented string astring
localizedresource outputwriter   println     astring