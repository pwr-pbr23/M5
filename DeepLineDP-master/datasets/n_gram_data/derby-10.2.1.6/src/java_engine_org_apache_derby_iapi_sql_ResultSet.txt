/*
derby - class org.apache.derby.iapi.sql.resultset
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby iapi sql
import org apache derby iapi error standardexception
import org apache derby iapi sql execute execrow
import org apache derby iapi sql execute noputresultset
import org apache derby iapi sql row
import java sql timestamp
import java sql sqlwarning
/**
* the resultset interface provides a method to tell whether a statement
* returns rows, and if so, a method to get the rows. it also provides a
* method to get metadata about the contents of the rows. it also provide
* a method to accept rows as input.
* <p>
* there is no single implementation of the resultset interface. instead,
* the various support operations involved in executing statements
* implement this interface.
* <p>
* although execrow is used on the interface, it is not available to
* users of the api. they should use row, the exposed super-interface
* of execrow.  <<i couldn't find another way to perform this mapping...>>
* <p>
* valid transitions: <ul>
* <li> open->close</li>
* <li> close->open</li>
* <li> close->finished</li>
* <li> finished->open</li>
* </ul>
*
* @author jeff lichtman
*/
public interface resultset
/* get time only spent in this resultset */
public static final int current_resultset_only   0
/* get time spent in this resultset and below */
public static final int entire_resultset_tree   1
// cursor check positioning
public static final int isbeforefirst   101
public static final int isfirst   102
public static final int islast   103
public static final int isafterlast   104
/**
* returns true if the statement returns rows (i.e. is a select
* or fetch statement), false if it returns no rows.
*
* @return	true if the statement returns rows, false if not.
*/
boolean	returnsrows
/**
* returns the number of rows affected by the statement.
only valid of returnsrows() returns false.
* for other dml statements, it returns the number of rows
* modified by the statement. for statements that do not affect rows
* (like ddl statements), it returns zero.
*
* @return	the number of rows affect by the statement, so far.
*/
int	modifiedrowcount
/**
* returns a resultdescription object, which describes the results
* of the statement this resultset is in. this will *not* be a
* description of this particular resultset, if this is not the
* outermost resultset.
*
* @return	a resultdescription describing the results of the
*		statement.
*/
resultdescription	getresultdescription
activation getactivation
/**
* needs to be called before the result set will do anything.
* need to call before getnextrow(), or for a result set
* that doesn't return rows, this is the call that will
* cause all the work to be done.
*
* @exception standardexception		thrown on failure
*/
void	open   throws standardexception
/**
* returns the row at the absolute position from the query,
* and returns null when there is no such position.
* (negative position means from the end of the result set.)
* moving the cursor to an invalid position leaves the cursor
* positioned either before the first row (negative position)
* or after the last row (positive position).
* note: an exception will be thrown on 0.
*
* @param row	the position.
* @return	the row at the absolute position, or null if no such position.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	getabsoluterow int row  throws standardexception
/**
* returns the row at the relative position from the current
* cursor position, and returns null when there is no such position.
* (negative position means toward the beginning of the result set.)
* moving the cursor to an invalid position leaves the cursor
* positioned either before the first row (negative position)
* or after the last row (positive position).
* note: 0 is valid.
* note: an exception is thrown if the cursor is not currently
* positioned on a row.
*
* @param row	the position.
* @return	the row at the relative position, or null if no such position.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	getrelativerow int row  throws standardexception
/**
* sets the current position to before the first row and returns null
* because there is no current row.
*
* @return	null.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	setbeforefirstrow   throws standardexception
/**
* returns the first row from the query, and returns null when there
* are no rows.
*
* @return	the first row, or null if no rows.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	getfirstrow   throws standardexception
/**
* returns the next row from the query, and returns null when there
* are no more rows.
*
* @return	the next row, or null if no more rows.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	getnextrow   throws standardexception
/**
* returns the previous row from the query, and returns null when there
* are no more previous rows.
*
* @return	the previous row, or null if no more previous rows.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	getpreviousrow   throws standardexception
/**
* returns the last row from the query, and returns null when there
* are no rows.
*
* @return	the last row, or null if no rows.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	getlastrow   throws standardexception
/**
* sets the current position to after the last row and returns null
* because there is no current row.
*
* @return	null.
*
* @exception standardexception		thrown on failure
* @see row
*/
execrow	setafterlastrow   throws standardexception
/**
* clear the current row. the cursor keeps it current position,
* however it cannot be used for positioned updates or deletes
* until a fetch is done.
* this is done after a commit on holdable
* result sets.
* a fetch is achieved by calling one of the positioning
* methods: getlastrow(), getnextrow(), getpreviousrow(),
* getfirstrow(), getrelativerow(..) or getabsoluterow(..).
*/
void clearcurrentrow
/**
determine if the result set is at one of the positions
according to the constants above (isbeforefirst etc).
only valid and called for scrollable cursors.
* @return true if at the requested position.
* @exception standardexception thrown on error.
*/
public boolean checkrowposition int istype  throws standardexception
/**
* returns the row number of the current row.  row
* numbers start from 1 and go to 'n'.  corresponds
* to row numbering used to position current row
* in the result set (as per jdbc).
only valid and called for scrollable cursors.
* @return	the row number, or 0 if not on a row
*
*/
int	getrownumber
/**
* tells the system that there will be no more calls to getnextrow()
* (until the next open() call), so it can free up the resources
* associated with the resultset.
*
* @exception standardexception		thrown on error.
*/
void	close   throws standardexception
/**
* tells the system to clean up on an error.
*
* @exception standardexception		thrown on error.
*/
void	cleanup   throws standardexception
/**
find out if the resultset is closed or not.
will report true for result sets that do not return rows.
@return true if the resultset has been closed.
*/
boolean isclosed
/**
* tells the system that there will be no more access
* to any database information via this result set;
* in particular, no more calls to open().
* will close the result set if it is not already closed.
*
* @exception standardexception	on error
*/
void	finish   throws standardexception
/**
* get the execution time in milliseconds.
*
* @return long		the execution time in milliseconds.
*/
public long getexecutetime
/**
* get the timestamp for the beginning of execution.
*
* @return timestamp		the timestamp for the beginning of execution.
*/
public timestamp getbeginexecutiontimestamp
/**
* get the timestamp for the end of execution.
*
* @return timestamp		the timestamp for the end of execution.
*/
public timestamp getendexecutiontimestamp
/**
* return the total amount of time spent in this resultset
*
* @param type	current_resultset_only - time spent only in this resultset
*				entire_resultset_tree  - time spent in this resultset and below.
*
* @return long		the total amount of time spent (in milliseconds).
*/
public long gettimespent int type
/**
* get the subquery resultset tracking array from the top resultset.
* (used for tracking open subqueries when closing down on an error.)
*
* @param numsubqueries		the size of the array (for allocation on demand.)
*
* @return noputresultset[]	array of noputresultsets for subqueries.
*/
public noputresultset getsubquerytrackingarray int numsubqueries
/**
* resultset for rows inserted into the table (contains auto-generated keys columns only)
*
* @return noputresultset	noputresultsets for rows inserted into the table.
*/
public resultset getautogeneratedkeysresultset
/**
* returns the name of the cursor, if this is cursor statement of some
* type (declare, open, fetch, positioned update, positioned delete,
* close).
*
* @return	a string with the name of the cursor, if any. returns
*		null if this is not a cursor statement.
*/
public string	getcursorname
/**
return the set of warnings generated during the execution of
this result set. the warnings are cleared once this call returns.
*/
public sqlwarning getwarnings