/*
derby - class org.apache.derby.client.net.netxacallinfo
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
/**********************************************************************
*
*
*  component name =
*
*  package name = org.apache.derby.client.net
*
*  descriptive name = xacallinfo class
*
*  function = handle xa information
*
*  list of classes
*              - netxacallinfo
*
*  restrictions : none
*
**********************************************************************/
package org apache derby client net
import javax transaction xa xaresource
import javax transaction xa xid
import org apache derby client am connection
public class netxacallinfo
xid xid_                             current xid
int xaflags_                         current xaflags
// may not be needed!!!~~~
int xafunction_                      queued xa function being performed
int xaretval_                        xaretval from server
boolean xainprogress_                set at start    reset at commit
//  rollback(), or prepare() on rdonly
boolean xawassuspended               used to indicate an xa tyrans was suspended
//  one or more times, overrides empty transaction
boolean currconnection_              set when actualconn_ is the current connection
boolean freeentry_                   set when no actualconn_  entry is free   available
boolean convreleased_                release coversation  reuse successfull   true
netxaresource xaresource_             netxaresource containing this netxacallinfo
netxaconnection actualconn_     the actual connection object  not necessarily
// the user's connection object
/* only the first connection object is actually used. the other connection
* objects are used only for their tcp/ip variables to simulate
* suspend / resume
*/
private byte crrtkn_
private java io inputstream in_
private java io outputstream out_
private byte uowid_      unit of work id
private boolean readonlytransaction_      readonlytransaction flag
public netxacallinfo
xid_   null
xaflags_   xaresource tmnoflags
xainprogress_   false
currconnection_   false
freeentry_   true
convreleased_   false
actualconn_   null
readonlytransaction_   true
xaresource_   null
xaretval_   0
xawassuspended   false
public netxacallinfo xid xid  int flags  netxaresource xares  netxaconnection actualconn
xid_   xid
xaflags_   flags
xainprogress_   false
currconnection_   false
freeentry_   true
actualconn_   actualconn
readonlytransaction_   true
xaresource_   xares
xaretval_   0
xawassuspended   false
public void saveconnectionvariables
in_   actualconn_ getnetconnection   getinputstream
out_   actualconn_ getnetconnection   getoutputstream
crrtkn_   actualconn_ getcorrelatortoken
public java io inputstream getinputstream
return in_
public java io outputstream getoutputstream
return out_
public byte getcorrelatortoken
return crrtkn_
protected void setuowid byte uowid
uowid_   uowid
protected byte getuowid
return uowid_
protected void setreadonlytransactionflag boolean flag
readonlytransaction_   flag
protected boolean getreadonlytransactionflag
return readonlytransaction_