/*
derby - class org.apache.derby.impl.sql.catalog.datadictionarycontextimpl
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby impl sql catalog
import org apache derby iapi services context contextimpl
import org apache derby iapi services context contextmanager
import org apache derby iapi error standardexception
import org apache derby iapi sql dictionary datadictionary
import org apache derby iapi sql dictionary datadictionarycontext
import org apache derby iapi error exceptionseverity
/*
* datadictionarycontextimpl
*
* this class supports both nested and outer data dictionaries. the
* outer data dictionary defines the name space for a database.
* a nested data dictionary defines a name space for a publication
* (or schema in the future).
*
* during error processing, a nested data dictionary context is popped
* for statement errors or higher. the outer data dictionary context
* is not popped by cleanuponerror.
*/
class datadictionarycontextimpl
extends contextimpl
implements datadictionarycontext
//
// datadictionarycontext interface
//
// we might want these to refuse to return
// anything if they are in-use -- would require
// the interface provide a 'done' call, and
// we would mark them in-use whenever a get happened.
public datadictionary getdatadictionary
return datadictionary
public void cleanuponerror throwable error
if  error instanceof standardexception
standardexception se    standardexception error
if  se getseverity   < exceptionseverity session_severity
return
popme
//
// class interface
//
// this constructor is called with the data dictionary
// to be saved when the context
// is created
datadictionarycontextimpl contextmanager cm  datadictionary datadictionary
super cm  datadictionarycontext context_id
this datadictionary   datadictionary
final datadictionary			datadictionary