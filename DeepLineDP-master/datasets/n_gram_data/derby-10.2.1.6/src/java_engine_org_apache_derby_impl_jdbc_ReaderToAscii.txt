/*
derby - class org.apache.derby.impl.jdbc.readertoascii
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby impl jdbc
import java io inputstream
import java io reader
import java io ioexception
import java sql sqlexception
/**
readertoascii converts reader (with characters) to a stream of ascii characters.
*/
public final class readertoascii extends inputstream
private final reader data
private char	conv
private boolean closed
public readertoascii reader data
this data   data
if    data instanceof utf8reader
conv   new char
public int read   throws ioexception
if  closed
throw new ioexception
int c   data read
if  c     1
return  1
if  c <  255
return c   0xff
else
return       question mark   out of range character
public int read byte buf  int off  int len  throws ioexception
if  closed
throw new ioexception
if  data instanceof utf8reader
return   utf8reader  data  readasciiinto buf  off  len
if  len > conv length
len   conv length
len   data read conv  0  len
if  len     1
return  1
for  int i   0  i < len  i
char c   conv
byte cb
if  c <  255
cb    byte  c
else
cb    byte        question mark   out of range character
buf   cb
return len
public long skip long len  throws ioexception
if  closed
throw new ioexception
return data skip len
public void close   throws ioexception
if   closed
closed   true
data close