/*
derby - class org.apache.derby.iapi.store.raw.logicalundoable
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby iapi store raw
import org apache derby iapi error standardexception
import org apache derby iapi store access conglomerate logicalundo
import org apache derby iapi types datavaluedescriptor
import org apache derby iapi services io limitobjectinput
import java io ioexception
/**
a logicalundoable is a log operation that operates on the content of a page
and the log operation needs logical undo.  this interface is used by
logicalundo to extract information out of the log record, and to pass back
to the logging system the real location where the roll back should happen.
<p>
it has specific page information such as its segment id, container id, page
number, and it knows how to restore a storable row from the information
stored in the log record.
@see org.apache.derby.iapi.store.access.conglomerate.logicalundo
*/
public interface logicalundoable extends undoable
/**
return the containerhandle used by this log operation.  logical cannot
change container identity between roll forward and roll back.  this
method should only be called by logicalundo to extract information from
the log record.
@exception standardexception standard cloudscape error policy
*/
public containerhandle getcontainer   throws standardexception
/**
return the recordhandle stored in the log operation that correspond to
the record that was changed in the rollforward.  this method should
only be called by logicalundo to extract information from the log
record.
*/
public recordhandle getrecordhandle
/**
restore the row stored in the log operation.   this method should only
be called by logicalundo to extract information from the log record.
@param row an in/out parameter, caller passed in the row with
the correct column number and type, the log operation will restore the
row with the optional data stored in the log record.
@exception standardexception standard cloudscape error policy
@exception ioexception method may read from in
@see logicalundo
*/
public void restoreloggedrow object row  limitobjectinput in
throws standardexception  ioexception
/**
if the row has moved, reset the record handle that the undo should be applied on.
@param rh the recordhandle that represents the row's new location
*/
public void resetrecordhandle recordhandle rh