/*
derby - class org.apache.derby.client.am.types
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby client am
import org apache derby iapi reference drdaconstants
import org apache derby iapi reference jdbc30translation
import org apache derby iapi reference jdbc40translation
// this enumeration of types represents the typing scheme used by our jdbc driver.
// once this is finished, we need to review our switches to make sure they are exhaustive
public class types
// -------------------------------- driver types -------------------------------------------------
// not currently supported as a derby column type.  mapped to smallint.
// public final static int bit        =  java.sql.types.bit;          // -7;
// not currently supported as a derby column type.  mapped to smallint.
//public final static int tinyint 	= java.sql.types.tinyint;       // -6;
public final static int boolean   jdbc30translation boolean           16
public final static int smallint   java sql types smallint          5
public final static int integer   java sql types integer           4
public final static int bigint   java sql types bigint             5
// we type using double
//public final static int float 	= java.sql.types.float;         // 6;
public final static int real   java sql types real              7
public final static int double   java sql types double            8
// we type using decimal
//public final static int numeric 	= java.sql.types.numeric;       // 2;
public final static int decimal   java sql types decimal           3
public final static int char   java sql types char              1
public final static int varchar   java sql types varchar           12
public final static int longvarchar   java sql types longvarchar        1
public final static int date   java sql types date              91
public final static int time   java sql types time              92
public final static int timestamp   java sql types timestamp         93
public final static int binary   java sql types binary             2
public final static int varbinary   java sql types varbinary          3
public final static int longvarbinary   java sql types longvarbinary      4
public final static int blob   java sql types blob              2004
public final static int clob   java sql types clob              2005
// hide the default constructor
private types
static public string gettypestring int type
switch  type
case bigint         return
case binary         return
case blob           return
case boolean        return
case char           return
case clob           return
case date           return
case decimal        return
case double         return
case integer        return
case longvarbinary  return
case longvarchar    return
case real           return
case smallint       return
case time           return
case timestamp      return
case varbinary      return
case varchar        return
// types we don't support:
case java sql types array  return
case java sql types datalink  return
case jdbc40translation nchar  return
case jdbc40translation nclob  return
case jdbc40translation nvarchar  return
case jdbc40translation longnvarchar  return
case java sql types ref  return
case jdbc40translation rowid  return
case jdbc40translation sqlxml  return
case java sql types struct  return
// unknown type:
default             return
static public int mapderbytypetodrivertype boolean isdescribed  int sqltype  long length  int ccsid
switch  utils getnonnullablesqltype sqltype        mask the isnullable bit
case drdaconstants db2_sqltype_small
return smallint
case drdaconstants db2_sqltype_integer
return integer
case drdaconstants db2_sqltype_bigint
return bigint
case drdaconstants db2_sqltype_float
if  length    16                      can map to either numeric or decimal
return decimal
else if  length    8                  can map to either double or float
return double
else if  length    4
return real
else
return 0
case drdaconstants db2_sqltype_decimal                can map to either numeric or decimal
case drdaconstants db2_sqltype_numeric                can map to either numeric or decimal
return decimal
case drdaconstants db2_sqltype_char        mixed and single byte
if  isdescribed     ccsid    0xffff    ccsid    0
return binary
else
return char
case drdaconstants db2_sqltype_cstr        null terminated sbcs mixed
return char
// use ccsid to distinguish between binary and char, varbinary and varchar, long...
case drdaconstants db2_sqltype_varchar       variable character sbcs mixed
if  isdescribed     ccsid    0xffff    ccsid    0
return varbinary
else
return varchar
case drdaconstants db2_sqltype_long          long varchar sbcs mixed
if  isdescribed     ccsid    0xffff    ccsid    0
return longvarbinary
else
return longvarchar
case drdaconstants db2_sqltype_date
return date
case drdaconstants db2_sqltype_time
return time
case drdaconstants db2_sqltype_timestamp
return timestamp
case drdaconstants db2_sqltype_clob        large object character sbcs mixed
return types clob
case drdaconstants db2_sqltype_blob        large object bytes
return java sql types blob
default
return 0