/*
derby - class org.apache.derby.iapi.services.classfile.membertable
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby iapi services classfile
import java io ioexception
import java util hashtable
import java util vector
class membertable
protected vector entries
private hashtable hashtable
private membertablehash	mutablemth   null
public membertable int count
entries   new vector count
hashtable   new hashtable  count > 50  ? count   50
mutablemth   new membertablehash null  null
void addentry classmember item
membertablehash mth  new membertablehash
item getname
item getdescriptor
entries size
/* add to the vector */
entries addelement item
/* add to the hashtable */
hashtable put mth  mth
classmember find string name  string descriptor
/* set up the mutable mth for the search */
mutablemth name   name
mutablemth descriptor   descriptor
mutablemth sethashcode
/* search the hash table */
membertablehash mth    membertablehash  hashtable get mutablemth
if  mth    null
return null
return  classmember  entries elementat mth index
void put classformatoutput out  throws ioexception
vector lentries   entries
int count   lentries size
for  int i   0  i < count  i
classmember  lentries elementat i   put out
int size
return entries size
int classfilesize
int size   0
vector lentries   entries
int count   lentries size
for  int i   0  i < count  i
size      classmember  lentries elementat i   classfilesize
return size
class membertablehash
string name
string descriptor
int	   index
int	   hashcode
membertablehash string name  string descriptor  int index
this name   name
this descriptor   descriptor
this index   index
/* only set hashcode if both name and descriptor are non-null */
if  name    null    descriptor    null
sethashcode
membertablehash string name  string descriptor
this name  descriptor   1
void sethashcode
hashcode   name hashcode     descriptor hashcode
public boolean equals object other
membertablehash mth    membertablehash  other
if  other    null
return false
if  name equals mth name     descriptor equals mth descriptor
return true
else
return false
public int hashcode
return hashcode