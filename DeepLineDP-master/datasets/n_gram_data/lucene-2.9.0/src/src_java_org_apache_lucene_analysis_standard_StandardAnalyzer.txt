package org apache lucene analysis standard
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import org apache lucene analysis
import org apache lucene util version
import java io file
import java io ioexception
import java io reader
import java util set
/**
* filters {@link standardtokenizer} with {@link standardfilter}, {@link
* lowercasefilter} and {@link stopfilter}, using a list of
* english stop words.
*
* <a name="version"/>
* <p>you must specify the required {@link version}
* compatibility when creating standardanalyzer:
* <ul>
*   <li> as of 2.9, stopfilter preserves position
*        increments by default
*   <li> as of 2.9, tokens incorrectly identified as acronyms
*        are corrected (see <a href="https://issues.apache.org/jira/browse/lucene-1068">lucene-1608</a>
* </ul>
*
* @version $id$
*/
public class standardanalyzer extends analyzer
private set stopset
/**
* specifies whether deprecated acronyms should be replaced with host type.
* this is false by default to support backward compatibility.
*
* @deprecated this should be removed in the next release (3.0).
*
* see https://issues.apache.org/jira/browse/lucene-1068
*/
private boolean replaceinvalidacronym   defaultreplaceinvalidacronym
private static boolean defaultreplaceinvalidacronym
private boolean enablestoppositionincrements
// @deprecated
private boolean usedefaultstoppositionincrements
// default to true (fixed the bug), unless the system prop is set
static
final string v   system getproperty
if  v    null    v equals
defaultreplaceinvalidacronym   true
else
defaultreplaceinvalidacronym   false
/**
*
* @return true if new instances of standardtokenizer will
* replace mischaracterized acronyms
*
* see https://issues.apache.org/jira/browse/lucene-1068
* @deprecated this will be removed (hardwired to true) in 3.0
*/
public static boolean getdefaultreplaceinvalidacronym
return defaultreplaceinvalidacronym
/**
*
* @param replaceinvalidacronym set to true to have new
* instances of standardtokenizer replace mischaracterized
* acronyms by default.  set to false to preserve the
* previous (before 2.4) buggy behavior.  alternatively,
* set the system property
* org.apache.lucene.analysis.standard.standardanalyzer.replaceinvalidacronym
* to false.
*
* see https://issues.apache.org/jira/browse/lucene-1068
* @deprecated this will be removed (hardwired to true) in 3.0
*/
public static void setdefaultreplaceinvalidacronym boolean replaceinvalidacronym
defaultreplaceinvalidacronym   replaceinvalidacronym
/** an array containing some common english words that are usually not
useful for searching.
@deprecated use {@link #stop_words_set} instead */
public static final string stop_words   stopanalyzer english_stop_words
/** an unmodifiable set containing some common english words that are usually not
useful for searching. */
public static final set  <string>   stop_words_set   stopanalyzer english_stop_words_set
/** builds an analyzer with the default stop words ({@link
* #stop_words_set}).
* @deprecated use {@link #standardanalyzer(version)} instead. */
public standardanalyzer
this version lucene_24  stop_words_set
/** builds an analyzer with the default stop words ({@link
* #stop_words}).
* @param matchversion lucene version to match see {@link
* <a href="#version">above</a>}
*/
public standardanalyzer version matchversion
this matchversion  stop_words_set
/** builds an analyzer with the given stop words.
* @deprecated use {@link #standardanalyzer(version, set)}
* instead */
public standardanalyzer set stopwords
this version lucene_24  stopwords
/** builds an analyzer with the given stop words.
* @param matchversion lucene version to match see {@link
* <a href="#version">above</a>}
* @param stopwords stop words */
public standardanalyzer version matchversion  set stopwords
stopset   stopwords
init matchversion
/** builds an analyzer with the given stop words.
* @deprecated use {@link #standardanalyzer(version, set)} instead */
public standardanalyzer string stopwords
this version lucene_24  stopfilter makestopset stopwords
/** builds an analyzer with the stop words from the given file.
* @see wordlistloader#getwordset(file)
* @deprecated use {@link #standardanalyzer(version, file)}
* instead
*/
public standardanalyzer file stopwords  throws ioexception
this version lucene_24  stopwords
/** builds an analyzer with the stop words from the given file.
* @see wordlistloader#getwordset(file)
* @param matchversion lucene version to match see {@link
* <a href="#version">above</a>}
* @param stopwords file to read stop words from */
public standardanalyzer version matchversion  file stopwords  throws ioexception
stopset   wordlistloader getwordset stopwords
init matchversion
/** builds an analyzer with the stop words from the given reader.
* @see wordlistloader#getwordset(reader)
* @deprecated use {@link #standardanalyzer(version, reader)}
* instead
*/
public standardanalyzer reader stopwords  throws ioexception
this version lucene_24  stopwords
/** builds an analyzer with the stop words from the given reader.
* @see wordlistloader#getwordset(reader)
* @param matchversion lucene version to match see {@link
* <a href="#version">above</a>}
* @param stopwords reader to read stop words from */
public standardanalyzer version matchversion  reader stopwords  throws ioexception
stopset   wordlistloader getwordset stopwords
init matchversion
/**
*
* @param replaceinvalidacronym set to true if this analyzer should replace mischaracterized acronyms in the standardtokenizer
*
* see https://issues.apache.org/jira/browse/lucene-1068
*
* @deprecated remove in 3.x and make true the only valid value
*/
public standardanalyzer boolean replaceinvalidacronym
this version lucene_24  stop_words_set
this replaceinvalidacronym   replaceinvalidacronym
usedefaultstoppositionincrements   true
/**
*  @param stopwords the stopwords to use
* @param replaceinvalidacronym set to true if this analyzer should replace mischaracterized acronyms in the standardtokenizer
*
* see https://issues.apache.org/jira/browse/lucene-1068
*
* @deprecated remove in 3.x and make true the only valid value
*/
public standardanalyzer reader stopwords  boolean replaceinvalidacronym  throws ioexception
this version lucene_24  stopwords
this replaceinvalidacronym   replaceinvalidacronym
/**
* @param stopwords the stopwords to use
* @param replaceinvalidacronym set to true if this analyzer should replace mischaracterized acronyms in the standardtokenizer
*
* see https://issues.apache.org/jira/browse/lucene-1068
*
* @deprecated remove in 3.x and make true the only valid value
*/
public standardanalyzer file stopwords  boolean replaceinvalidacronym  throws ioexception
this version lucene_24  stopwords
this replaceinvalidacronym   replaceinvalidacronym
/**
*
* @param stopwords the stopwords to use
* @param replaceinvalidacronym set to true if this analyzer should replace mischaracterized acronyms in the standardtokenizer
*
* see https://issues.apache.org/jira/browse/lucene-1068
*
* @deprecated remove in 3.x and make true the only valid value
*/
public standardanalyzer string  stopwords  boolean replaceinvalidacronym  throws ioexception
this version lucene_24  stopfilter makestopset stopwords
this replaceinvalidacronym   replaceinvalidacronym
/**
* @param stopwords the stopwords to use
* @param replaceinvalidacronym set to true if this analyzer should replace mischaracterized acronyms in the standardtokenizer
*
* see https://issues.apache.org/jira/browse/lucene-1068
*
* @deprecated remove in 3.x and make true the only valid value
*/
public standardanalyzer set stopwords  boolean replaceinvalidacronym  throws ioexception
this version lucene_24  stopwords
this replaceinvalidacronym   replaceinvalidacronym
private final void init version matchversion
setoverridestokenstreammethod standardanalyzer class
if  matchversion onorafter version lucene_29
enablestoppositionincrements   true
else
usedefaultstoppositionincrements   true
/** constructs a {@link standardtokenizer} filtered by a {@link
standardfilter}, a {@link lowercasefilter} and a {@link stopfilter}. */
public tokenstream tokenstream string fieldname  reader reader
standardtokenizer tokenstream   new standardtokenizer reader  replaceinvalidacronym
tokenstream setmaxtokenlength maxtokenlength
tokenstream result   new standardfilter tokenstream
result   new lowercasefilter result
if  usedefaultstoppositionincrements
result   new stopfilter result  stopset
else
result   new stopfilter enablestoppositionincrements  result  stopset
return result
private static final class savedstreams
standardtokenizer tokenstream
tokenstream filteredtokenstream
/** default maximum allowed token length */
public static final int default_max_token_length   255
private int maxtokenlength   default_max_token_length
/**
* set maximum allowed token length.  if a token is seen
* that exceeds this length then it is discarded.  this
* setting only takes effect the next time tokenstream or
* reusabletokenstream is called.
*/
public void setmaxtokenlength int length
maxtokenlength   length
/**
* @see #setmaxtokenlength
*/
public int getmaxtokenlength
return maxtokenlength
/** @deprecated use {@link #tokenstream} instead */
public tokenstream reusabletokenstream string fieldname  reader reader  throws ioexception
if  overridestokenstreammethod
// lucene-1678: force fallback to tokenstream() if we
// have been subclassed and that subclass overrides
// tokenstream but not reusabletokenstream
return tokenstream fieldname  reader
savedstreams streams    savedstreams  getprevioustokenstream
if  streams    null
streams   new savedstreams
setprevioustokenstream streams
streams tokenstream   new standardtokenizer reader
streams filteredtokenstream   new standardfilter streams tokenstream
streams filteredtokenstream   new lowercasefilter streams filteredtokenstream
if  usedefaultstoppositionincrements
streams filteredtokenstream   new stopfilter streams filteredtokenstream  stopset
else
streams filteredtokenstream   new stopfilter enablestoppositionincrements  streams filteredtokenstream  stopset
else
streams tokenstream reset reader
streams tokenstream setmaxtokenlength maxtokenlength
streams tokenstream setreplaceinvalidacronym replaceinvalidacronym
return streams filteredtokenstream
/**
*
* @return true if this analyzer is replacing mischaracterized acronyms in the standardtokenizer
*
* see https://issues.apache.org/jira/browse/lucene-1068
* @deprecated this will be removed (hardwired to true) in 3.0
*/
public boolean isreplaceinvalidacronym
return replaceinvalidacronym
/**
*
* @param replaceinvalidacronym set to true if this analyzer is replacing mischaracterized acronyms in the standardtokenizer
*
* see https://issues.apache.org/jira/browse/lucene-1068
* @deprecated this will be removed (hardwired to true) in 3.0
*/
public void setreplaceinvalidacronym boolean replaceinvalidacronym
this replaceinvalidacronym   replaceinvalidacronym