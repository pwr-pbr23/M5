package org apache lucene benchmark bytask feeds
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import org apache lucene analysis analyzer
import org apache lucene index term
import org apache lucene queryparser queryparser
import org apache lucene search query
import org apache lucene search wildcardquery
import org apache lucene search spans spanfirstquery
import org apache lucene search spans spannearquery
import org apache lucene search spans spanquery
import org apache lucene search spans spantermquery
import java util arraylist
import java util arrays
import java util list
/**
* a querymaker that makes queries devised manually (by grant ingersoll) for
* searching in the reuters collection.
*/
public class reutersquerymaker extends abstractquerymaker implements querymaker
private static string  standard_queries
//start with some short queries
//try some phrase queries
sony japan     food needs
world bank     world bank
ford credit
//try some longer queries
private static query getprebuiltqueries string field
//  be wary of unanalyzed text
return new query
new spanfirstquery new spantermquery new term field       5
new spannearquery new spanquery new spantermquery new term field       new spantermquery new term field        4  false
new spannearquery new spanquery new spanfirstquery new spantermquery new term field       10   new spantermquery new term field        10  false
new wildcardquery new term field
/**
* parse the strings containing lucene queries.
*
* @param qs array of strings containing query expressions
* @param a  analyzer to use when parsing queries
* @return array of lucene queries
*/
private static query createqueries list qs  analyzer a
queryparser qp   new queryparser docmaker body_field  a
list queries   new arraylist
for  int i   0  i < qs size    i
try
object query   qs get i
query q   null
if  query instanceof string
q   qp parse  string  query
else if  query instanceof query
q    query  query
else
system err println     query
if  q    null
queries add q
catch  exception e
e printstacktrace
return  query  queries toarray new query
protected query preparequeries   throws exception
// analyzer (default is standard analyzer)
analyzer anlzr   analyzer  class forname config get
newinstance
list querylist   new arraylist 20
querylist addall arrays aslist standard_queries
querylist addall arrays aslist getprebuiltqueries docmaker body_field
return createqueries querylist  anlzr