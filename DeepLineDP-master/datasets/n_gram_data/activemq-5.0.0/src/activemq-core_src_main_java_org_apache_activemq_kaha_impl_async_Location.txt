/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq kaha impl async
import java io datainput
import java io dataoutput
import java io ioexception
import java util concurrent countdownlatch
/**
* used as a location in the data store.
*
* @version $revision: 1.2 $
*/
public final class location implements comparable<location>
public static final byte mark_type    1
public static final byte user_type   1
public static final byte not_set_type   0
public static final int not_set    1
private int datafileid   not_set
private int offset   not_set
private int size   not_set
private byte type   not_set_type
private countdownlatch latch
public location
location location item
this datafileid   item datafileid
this offset   item offset
this size   item size
this type   item type
boolean isvalid
return datafileid    not_set
/**
* @return the size of the data record including the header.
*/
public int getsize
return size
/**
* @param size the size of the data record including the header.
*/
public void setsize int size
this size   size
/**
* @return the size of the payload of the record.
*/
public int getpaylodsize
return size   asyncdatamanager item_head_foot_space
public int getoffset
return offset
public void setoffset int offset
this offset   offset
public int getdatafileid
return datafileid
public void setdatafileid int file
this datafileid   file
public byte gettype
return type
public void settype byte type
this type   type
public string tostring
string result       offset       datafileid       size
type
return result
public void writeexternal dataoutput dos  throws ioexception
dos writeint datafileid
dos writeint offset
dos writeint size
dos writebyte type
public void readexternal datainput dis  throws ioexception
datafileid   dis readint
offset   dis readint
size   dis readint
type   dis readbyte
public countdownlatch getlatch
return latch
public void setlatch countdownlatch latch
this latch   latch
public int compareto location o
location l    location o
if  datafileid    l datafileid
int rc   offset   l offset
return rc
return datafileid   l datafileid
public boolean equals object o
boolean result   false
if  o instanceof location
result   compareto  location o     0
return result
public int hashcode
return datafileid ^ offset