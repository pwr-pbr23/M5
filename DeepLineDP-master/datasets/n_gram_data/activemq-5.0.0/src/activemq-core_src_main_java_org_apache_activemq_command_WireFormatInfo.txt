/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq command
import java io datainputstream
import java io dataoutputstream
import java io ioexception
import java util arrays
import java util collections
import java util hashmap
import java util map
import org apache activemq state commandvisitor
import org apache activemq util bytearrayinputstream
import org apache activemq util bytearrayoutputstream
import org apache activemq util bytesequence
import org apache activemq util marshallingsupport
import org apache activemq wireformat wireformat
/**
* @openwire:marshaller code="1"
* @version $revision$
*/
public class wireformatinfo implements command  marshallaware
public static final byte data_structure_type   commandtypes wireformat_info
private static final int max_property_size   1024   4
private static final byte magic   new byte
protected byte magic   magic
protected int version
protected bytesequence marshalledproperties
protected transient map<string  object> properties
private transient endpoint from
private transient endpoint to
public byte getdatastructuretype
return data_structure_type
public boolean iswireformatinfo
return true
public boolean ismarshallaware
return true
/**
* @openwire:property version=1 size=8 testsize=-1
*/
public byte getmagic
return magic
public void setmagic byte magic
this magic   magic
/**
* @openwire:property version=1
*/
public int getversion
return version
public void setversion int version
this version   version
/**
* @openwire:property version=1
*/
public bytesequence getmarshalledproperties
return marshalledproperties
public void setmarshalledproperties bytesequence marshalledproperties
this marshalledproperties   marshalledproperties
/**
* the endpoint within the transport where this message came from.
*/
public endpoint getfrom
return from
public void setfrom endpoint from
this from   from
/**
* the endpoint within the transport where this message is going to - null
* means all endpoints.
*/
public endpoint getto
return to
public void setto endpoint to
this to   to
// ////////////////////
//
// implementation methods.
//
// ////////////////////
public object getproperty string name  throws ioexception
if  properties    null
if  marshalledproperties    null
return null
properties   unmarsallproperties marshalledproperties
return properties get name
@suppresswarnings
public map<string  object> getproperties   throws ioexception
if  properties    null
if  marshalledproperties    null
return collections empty_map
properties   unmarsallproperties marshalledproperties
return collections unmodifiablemap properties
public void clearproperties
marshalledproperties   null
properties   null
public void setproperty string name  object value  throws ioexception
lazycreateproperties
properties put name  value
protected void lazycreateproperties   throws ioexception
if  properties    null
if  marshalledproperties    null
properties   new hashmap<string  object>
else
properties   unmarsallproperties marshalledproperties
marshalledproperties   null
private map<string  object> unmarsallproperties bytesequence marshalledproperties  throws ioexception
return marshallingsupport unmarshalprimitivemap new datainputstream new bytearrayinputstream marshalledproperties    max_property_size
public void beforemarshall wireformat wireformat  throws ioexception
// need to marshal the properties.
if  marshalledproperties    null    properties    null
bytearrayoutputstream baos   new bytearrayoutputstream
dataoutputstream os   new dataoutputstream baos
marshallingsupport marshalprimitivemap properties  os
os close
marshalledproperties   baos tobytesequence
public void aftermarshall wireformat wireformat  throws ioexception
public void beforeunmarshall wireformat wireformat  throws ioexception
public void afterunmarshall wireformat wireformat  throws ioexception
public boolean isvalid
return magic    null    arrays equals magic  magic
public void setresponserequired boolean responserequired
/**
* @throws ioexception
*/
public boolean iscacheenabled   throws ioexception
return boolean true    getproperty
public void setcacheenabled boolean cacheenabled  throws ioexception
setproperty    cacheenabled ? boolean true   boolean false
/**
* @throws ioexception
*/
public boolean isstacktraceenabled   throws ioexception
return boolean true    getproperty
public void setstacktraceenabled boolean stacktraceenabled  throws ioexception
setproperty    stacktraceenabled ? boolean true   boolean false
/**
* @throws ioexception
*/
public boolean istcpnodelayenabled   throws ioexception
return boolean true    getproperty
public void settcpnodelayenabled boolean tcpnodelayenabled  throws ioexception
setproperty    tcpnodelayenabled ? boolean true   boolean false
/**
* @throws ioexception
*/
public boolean issizeprefixdisabled   throws ioexception
return boolean true    getproperty
public void setsizeprefixdisabled boolean prefixpacketsize  throws ioexception
setproperty    prefixpacketsize ? boolean true   boolean false
/**
* @throws ioexception
*/
public boolean istightencodingenabled   throws ioexception
return boolean true    getproperty
public void settightencodingenabled boolean tightencodingenabled  throws ioexception
setproperty    tightencodingenabled ? boolean true   boolean false
/**
* @throws ioexception
*/
public long getmaxinactivityduration   throws ioexception
long l    long getproperty
return l    null ? 0   l longvalue
public void semaxinactivityduration long maxinactivityduration  throws ioexception
setproperty    new long maxinactivityduration
/**
* @throws ioexception
*/
public int getcachesize   throws ioexception
integer i    integer getproperty
return i    null ? 0   i intvalue
public void setcachesize int cachesize  throws ioexception
setproperty    new integer cachesize
public response visit commandvisitor visitor  throws exception
return visitor processwireformat this
public string tostring
map<string  object> p   null
try
p   getproperties
catch  ioexception ignore
return     version       p       tostring magic
private string tostring byte data
stringbuffer sb   new stringbuffer
sb append
for  int i   0  i < data length  i
if  i    0
sb append
sb append  char data
sb append
return sb tostring
// /////////////////////////////////////////////////////////////
//
// this are not implemented.
//
// /////////////////////////////////////////////////////////////
public void setcommandid int value
public int getcommandid
return 0
public boolean isresponserequired
return false
public boolean isresponse
return false
public boolean isbrokerinfo
return false
public boolean ismessagedispatch
return false
public boolean ismessage
return false
public boolean ismessageack
return false
public boolean ismessagedispatchnotification
return false
public boolean isshutdowninfo
return false
public void setcachedmarshalledform wireformat wireformat  bytesequence data
public bytesequence getcachedmarshalledform wireformat wireformat
return null