/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq openwire tool
import java io file
import java io printwriter
import java util arraylist
import java util collections
import java util comparator
import java util iterator
import java util list
import org codehaus jam jannotation
import org codehaus jam jannotationvalue
import org codehaus jam jclass
import org codehaus jam jproperty
/**
* @version $revision: 384390 $
*/
public class csharpmarshallinggenerator extends javamarshallinggenerator
protected string targetdir
public object run
filepostfix
if  destdir    null
destdir   new file targetdir       getopenwireversion
return super run
// ////////////////////////////////////////////////////////////////////////////////////
// this section is for the tight wire format encoding generator
// ////////////////////////////////////////////////////////////////////////////////////
protected void generatetightunmarshalbodyforproperty printwriter out  jproperty property  jannotationvalue size
string propertyname   property getsimplename
string type   property gettype   getsimplename
if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals       type equals
if  size    null
out println     propertyname       size asint
else
out println     propertyname
else if  isthrowable property gettype
out println     propertyname
else if  iscachedproperty property
out println     propertyname       type
else
out println     propertyname       type
protected void generatetightunmarshalbodyforarrayproperty printwriter out  jproperty property  jannotationvalue size
jclass propertytype   property gettype
string arraytype   propertytype getarraycomponenttype   getsimplename
string propertyname   property getsimplename
out println
if  size    null
out println
out println     arraytype       arraytype       size asint
out println         size asint
out println     arraytype
out println
out println     propertyname
out println
else
out println
out println
out println     arraytype       arraytype
out println
out println     arraytype
out println
out println     propertyname
out println
out println
out println     propertyname
out println
protected int generatetightmarshal1body printwriter out
list properties   getproperties
int basesize   0
for  iterator iter   properties iterator    iter hasnext
jproperty property    jproperty iter next
jannotation annotation   property getannotation
jannotationvalue size   annotation getvalue
jclass propertytype   property gettype
string type   propertytype getsimplename
string getter       property getsimplename
if  type equals
out println     getter
else if  type equals
basesize    1
else if  type equals
basesize    2
else if  type equals
basesize    2
else if  type equals
basesize    4
else if  type equals
out println     getter
else if  type equals
out print
out println     getter
else if  type equals       type equals
if  size    null
out println     getter
out println     getter       getter
else
basesize    size asint
else if  propertytype isarraytype
if  size    null
out println     getter       size asint
else
out println     getter
else if  isthrowable propertytype
out println     getter
else
if  iscachedproperty property
out println     getter
else
out println     getter
return basesize
protected void generatetightmarshal2body printwriter out
list properties   getproperties
for  iterator iter   properties iterator    iter hasnext
jproperty property    jproperty iter next
jannotation annotation   property getannotation
jannotationvalue size   annotation getvalue
jclass propertytype   property gettype
string type   propertytype getsimplename
string getter       property getsimplename
if  type equals
out println
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals       type equals
if  size    null
out println     getter       size asint
else
out println
out println     getter
out println     getter
out println
else if  propertytype isarraytype
if  size    null
out println     getter       size asint
else
out println     getter
else if  isthrowable propertytype
out println     getter
else
if  iscachedproperty property
out println     getter
else
out println     getter
// ////////////////////////////////////////////////////////////////////////////////////
// this section is for the loose wire format encoding generator
// ////////////////////////////////////////////////////////////////////////////////////
protected void generatelooseunmarshalbodyforproperty printwriter out  jproperty property  jannotationvalue size
string propertyname   property getsimplename
string type   property gettype   getsimplename
if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals
out println     propertyname
else if  type equals       type equals
if  size    null
out println     propertyname       size asint
else
out println     propertyname
else if  isthrowable property gettype
out println     propertyname
else if  iscachedproperty property
out println     propertyname       type
else
out println     propertyname       type
protected void generatelooseunmarshalbodyforarrayproperty printwriter out  jproperty property  jannotationvalue size
jclass propertytype   property gettype
string arraytype   propertytype getarraycomponenttype   getsimplename
string propertyname   property getsimplename
out println
if  size    null
out println
out println     arraytype       arraytype       size asint
out println         size asint
out println     arraytype
out println
out println     propertyname
out println
else
out println
out println
out println     arraytype       arraytype
out println
out println     arraytype
out println
out println     propertyname
out println
out println
out println     propertyname
out println
protected void generateloosemarshalbody printwriter out
list properties   getproperties
for  iterator iter   properties iterator    iter hasnext
jproperty property    jproperty iter next
jannotation annotation   property getannotation
jannotationvalue size   annotation getvalue
jclass propertytype   property gettype
string type   propertytype getsimplename
string getter       property getsimplename
if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals       type equals
if  size    null
out println     getter       size asint
else
out println     getter
out println     getter
out println     getter
out println     getter
out println
else if  propertytype isarraytype
if  size    null
out println     getter       size asint
else
out println     getter
else if  isthrowable propertytype
out println     getter
else
if  iscachedproperty property
out println     getter
else
out println     getter
public string gettargetdir
return targetdir
public void settargetdir string targetdir
this targetdir   targetdir
private void generatelicence printwriter out
out println
out.println(" * licensed to the apache software foundation (asf) under one or more");
out.println(" * contributor license agreements.  see the notice file distributed with");
out.println(" * this work for additional information regarding copyright ownership.");
out.println(" * the asf licenses this file to you under the apache license, version 2.0");
out.println(" * (the \"license\"); you may not use this file except in compliance with");
out.println(" * the license.  you may obtain a copy of the license at");
out.println(" *");
out.println(" *      http://www.apache.org/licenses/license-2.0");
out.println(" *");
out.println(" * unless required by applicable law or agreed to in writing, software");
out.println(" * distributed under the license is distributed on an \"as is\" basis,");
out.println(" * without warranties or conditions of any kind, either express or implied.");
out.println(" * see the license for the specific language governing permissions and");
out.println(" * limitations under the license.");
out println
protected void generatefile printwriter out  throws exception
generatelicence out
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println     getopenwireversion
out println
out println     getopenwireversion
out println
out println
out println     jclass getsimplename
out println
out println     getabstractclasstext         getclassname         getbaseclass
out println
if   isabstractclass
out println
out println
out println
out println
out println     jclass getsimplename
out println
out println
out println
out println
out println     jclass getsimplename         jclass getsimplename
out println
/*
* generate the tight encoding marshallers
*/
out println
out println
out println
out println
out println
out println
out println
if   getproperties   isempty      ismarshalleraware
out println
out println     jclass getsimplename         jclass getsimplename
if  ismarshalleraware
out println
out println
out println
generatetightunmarshalbody out
if  ismarshalleraware
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println     jclass getsimplename         jclass getsimplename
if  ismarshalleraware
out println
out println
out println
out println
int basesize   generatetightmarshal1body out
out println
out println     basesize
out println
out println
out println
out println
out println
out println
out println
if   getproperties   isempty      ismarshalleraware
out println
out println     jclass getsimplename         jclass getsimplename
generatetightmarshal2body out
if  ismarshalleraware
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
if   getproperties   isempty      ismarshalleraware
out println
out println     jclass getsimplename         jclass getsimplename
if  ismarshalleraware
out println
out println
out println
generatelooseunmarshalbody out
if  ismarshalleraware
out println
out println
out println
out println
out println
out println
out println
out println
out println
if   getproperties   isempty      ismarshalleraware
out println
out println     jclass getsimplename         jclass getsimplename
if  ismarshalleraware
out println
out println
out println
out println
generateloosemarshalbody out
if  ismarshalleraware
out println
out println
out println
out println
out println
out println
public void generatefactory printwriter out
generatelicence out
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println     getopenwireversion
out println
out println     getopenwireversion
out println
out println
out println
out println
out println
out println
out println
out println
out println
list list   new arraylist getconcreteclasses
collections sort list  new comparator
public int compare object o1  object o2
jclass c1    jclass o1
jclass c2    jclass o2
return c1 getsimplename   compareto c2 getsimplename
for  iterator iter   list iterator    iter hasnext
jclass jclass    jclass iter next
out println     jclass getsimplename
out println
out println
out println
out println