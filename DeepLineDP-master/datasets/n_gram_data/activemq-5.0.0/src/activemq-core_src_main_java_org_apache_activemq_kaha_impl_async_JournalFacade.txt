/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq kaha impl async
import java io ioexception
import org apache activeio journal invalidrecordlocationexception
import org apache activeio journal journal
import org apache activeio journal journaleventlistener
import org apache activeio journal recordlocation
import org apache activeio packet bytearraypacket
import org apache activeio packet packet
import org apache activemq util bytesequence
/**
* provides a journal facade to the datamanager.
*
* @version $revision: 1.1.1.1 $
*/
public final class journalfacade implements journal
private final asyncdatamanager datamanager
public static class recordlocationfacade implements recordlocation
private final location location
public recordlocationfacade location location
this location   location
public location getlocation
return location
public int compareto object o
recordlocationfacade rlf    recordlocationfacade o
int rc   location compareto rlf location
return rc
public journalfacade asyncdatamanager datamanager
this datamanager   datamanager
private static recordlocation converttorecordlocation location location
if  location    null
return null
return new recordlocationfacade location
private static location convertfromrecordlocation recordlocation location
if  location    null
return null
return   recordlocationfacade location  getlocation
public void close   throws ioexception
datamanager close
public recordlocation getmark   throws illegalstateexception
return converttorecordlocation datamanager getmark
public recordlocation getnextrecordlocation recordlocation location  throws invalidrecordlocationexception  ioexception  illegalstateexception
return converttorecordlocation datamanager getnextlocation convertfromrecordlocation location
public packet read recordlocation location  throws invalidrecordlocationexception  ioexception  illegalstateexception
bytesequence rc   datamanager read convertfromrecordlocation location
if  rc    null
return null
return new bytearraypacket rc getdata    rc getoffset    rc getlength
public void setjournaleventlistener journaleventlistener listener  throws illegalstateexception
public void setmark recordlocation location  boolean sync  throws invalidrecordlocationexception  ioexception  illegalstateexception
datamanager setmark convertfromrecordlocation location   sync
public recordlocation write packet packet  boolean sync  throws ioexception  illegalstateexception
org apache activeio packet bytesequence data   packet asbytesequence
bytesequence sequence   new bytesequence data getdata    data getoffset    data getlength
return converttorecordlocation datamanager write sequence  sync