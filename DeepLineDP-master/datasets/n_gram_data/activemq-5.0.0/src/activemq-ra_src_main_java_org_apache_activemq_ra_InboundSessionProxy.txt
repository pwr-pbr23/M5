/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq ra
import java io serializable
import javax jms bytesmessage
import javax jms destination
import javax jms jmsexception
import javax jms mapmessage
import javax jms message
import javax jms messageconsumer
import javax jms messagelistener
import javax jms messageproducer
import javax jms objectmessage
import javax jms queue
import javax jms queuebrowser
import javax jms queuereceiver
import javax jms queuesender
import javax jms queuesession
import javax jms session
import javax jms streammessage
import javax jms temporaryqueue
import javax jms temporarytopic
import javax jms textmessage
import javax jms topic
import javax jms topicpublisher
import javax jms topicsession
import javax jms topicsubscriber
/**
* a {@link session} implementation which can be used with the activemq jca
* resource adapter to publish messages using the same jms session that is used
* to dispatch messages.
*
* @version $revision$
*/
public class inboundsessionproxy implements session  queuesession  topicsession
private inboundcontext sessionandproducer
public session getsession   throws jmsexception
return getsessionandproducer   getsession
public queuesession getqueuesession   throws jmsexception
session session   getsession
if  session instanceof queuesession
return  queuesession session
else
throw new jmsexception     session
public topicsession gettopicsession   throws jmsexception
session session   getsession
if  session instanceof topicsession
return  topicsession session
else
throw new jmsexception     session
public inboundcontext getsessionandproducer   throws jmsexception
if  sessionandproducer    null
sessionandproducer   inboundcontextsupport getactivesessionandproducer
if  sessionandproducer    null
throw new jmsexception
return sessionandproducer
public messageproducer createproducer destination destination  throws jmsexception
return new inboundmessageproducerproxy getsessionandproducer   getmessageproducer    destination
public void close   throws jmsexception
// we don't allow users to close this session
// as its used by the jca container
public void commit   throws jmsexception
// the jca container will handle transactions
public void rollback   throws jmsexception
// the jca container will handle transactions
public void recover   throws jmsexception
// the jca container will handle recovery
public void run
try
getsession   run
catch  jmsexception e
throw new runtimeexception     e  e
// straightforward delegation methods
// -------------------------------------------------------------------------
public queuebrowser createbrowser queue queue  throws jmsexception
return getsession   createbrowser queue
public queuebrowser createbrowser queue queue  string s  throws jmsexception
return getsession   createbrowser queue  s
public bytesmessage createbytesmessage   throws jmsexception
return getsession   createbytesmessage
public messageconsumer createconsumer destination destination  throws jmsexception
return getsession   createconsumer destination
public messageconsumer createconsumer destination destination  string s  throws jmsexception
return getsession   createconsumer destination  s
public messageconsumer createconsumer destination destination  string s  boolean b  throws jmsexception
return getsession   createconsumer destination  s  b
public topicsubscriber createdurablesubscriber topic topic  string s  throws jmsexception
return getsession   createdurablesubscriber topic  s
public topicsubscriber createdurablesubscriber topic topic  string s  string s1  boolean b  throws jmsexception
return getsession   createdurablesubscriber topic  s  s1  b
public mapmessage createmapmessage   throws jmsexception
return getsession   createmapmessage
public message createmessage   throws jmsexception
return getsession   createmessage
public objectmessage createobjectmessage   throws jmsexception
return getsession   createobjectmessage
public objectmessage createobjectmessage serializable serializable  throws jmsexception
return getsession   createobjectmessage serializable
public queue createqueue string s  throws jmsexception
return getsession   createqueue s
public streammessage createstreammessage   throws jmsexception
return getsession   createstreammessage
public temporaryqueue createtemporaryqueue   throws jmsexception
return getsession   createtemporaryqueue
public temporarytopic createtemporarytopic   throws jmsexception
return getsession   createtemporarytopic
public textmessage createtextmessage   throws jmsexception
return getsession   createtextmessage
public textmessage createtextmessage string s  throws jmsexception
return getsession   createtextmessage s
public topic createtopic string s  throws jmsexception
return getsession   createtopic s
public int getacknowledgemode   throws jmsexception
return getsession   getacknowledgemode
public messagelistener getmessagelistener   throws jmsexception
return getsession   getmessagelistener
public boolean gettransacted   throws jmsexception
return getsession   gettransacted
public void setmessagelistener messagelistener messagelistener  throws jmsexception
getsession   setmessagelistener messagelistener
public void unsubscribe string s  throws jmsexception
getsession   unsubscribe s
public queuereceiver createreceiver queue queue  throws jmsexception
return getqueuesession   createreceiver queue
public queuereceiver createreceiver queue queue  string s  throws jmsexception
return getqueuesession   createreceiver queue  s
public queuesender createsender queue queue  throws jmsexception
return new inboundmessageproducerproxy getsessionandproducer   getmessageproducer    queue
public topicsubscriber createsubscriber topic topic  throws jmsexception
return gettopicsession   createsubscriber topic
public topicsubscriber createsubscriber topic topic  string s  boolean b  throws jmsexception
return gettopicsession   createsubscriber topic  s  b
public topicpublisher createpublisher topic topic  throws jmsexception
return gettopicsession   createpublisher topic
public string tostring
try
return     getsession
catch  jmsexception e
return