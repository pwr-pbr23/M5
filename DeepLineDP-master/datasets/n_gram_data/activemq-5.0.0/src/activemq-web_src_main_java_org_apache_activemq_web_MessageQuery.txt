/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq web
import java util enumeration
import java util hashmap
import java util map
import javax jms jmsexception
import javax jms mapmessage
import javax jms message
import javax jms objectmessage
import javax jms textmessage
/**
* allow the user to browse a message on a queue by its id
*
* @version $revision$
*/
public class messagequery extends queuebrowsequery
private string id
private message message
public messagequery brokerfacade brokerfacade  sessionpool sessionpool  throws jmsexception
super brokerfacade  sessionpool
public string getid
return id
public void setid string id
this id   id
public void setmessage message message
this message   message
public message getmessage   throws jmsexception
if  message    null
if  id    null
enumeration iter   getbrowser   getenumeration
while  iter hasmoreelements
message item    message  iter nextelement
if  id equals item getjmsmessageid
message   item
break
return message
public object getbody   throws jmsexception
message message   getmessage
if  message instanceof textmessage
return   textmessage  message  gettext
if  message instanceof objectmessage
return   objectmessage  message  getobject
if  message instanceof mapmessage
return createmapbody  mapmessage  message
return null
public map<string  object> getpropertiesmap   throws jmsexception
map<string  object> answer   new hashmap<string  object>
message amessage   getmessage
enumeration iter   amessage getpropertynames
while  iter hasmoreelements
string name    string  iter nextelement
object value   amessage getobjectproperty name
if  value    null
answer put name  value
return answer
protected map<string  object> createmapbody mapmessage mapmessage  throws jmsexception
map<string  object> answer   new hashmap<string  object>
enumeration iter   mapmessage getmapnames
while  iter hasmoreelements
string name    string  iter nextelement
object value   mapmessage getobject name
if  value    null
answer put name  value
return answer