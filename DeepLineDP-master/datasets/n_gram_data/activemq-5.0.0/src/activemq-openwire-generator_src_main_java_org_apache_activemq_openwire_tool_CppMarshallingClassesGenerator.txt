/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq openwire tool
import java io printwriter
import java util arraylist
import java util collections
import java util comparator
import java util iterator
import java util list
import org codehaus jam jannotation
import org codehaus jam jannotationvalue
import org codehaus jam jclass
import org codehaus jam jproperty
/**
* @version $revision: 381410 $
*/
public class cppmarshallingclassesgenerator extends cppmarshallingheadersgenerator
protected string getfilepostfix
return
protected void generateunmarshalbodyforproperty printwriter out  jproperty property  jannotationvalue size
out print
string setter   property getsetter   getsimplename
string type   property gettype   getsimplename
if  type equals
out println     setter
else if  type equals
out println     setter
else if  type equals
out println     setter
else if  type equals
out println     setter
else if  type equals
out println     setter
else if  type equals
out println     setter
else if  type equals
out println     setter
else if  type equals       type equals
if  size    null
out println     setter       size asint
else
out println     setter
else if  isthrowable property gettype
out println     setter
else if  iscachedproperty property
out println     setter       type
else
out println     setter       type
protected void generateunmarshalbodyforarrayproperty printwriter out  jproperty property  jannotationvalue size
jclass propertytype   property gettype
string arraytype   propertytype getarraycomponenttype   getsimplename
string setter   property getgetter   getsimplename
out println
if  size    null
out println
out println     arraytype       arraytype       size asint
out println         size asint
out println     arraytype
out println
out println     setter
out println
else
out println
out println
out println     arraytype       arraytype
out println
out println     arraytype
out println
out println     setter
out println
out println
out println     setter
out println
protected int generatemarshal1body printwriter out
list properties   getproperties
int basesize   0
for  iterator iter   properties iterator    iter hasnext
jproperty property    jproperty iter next
jannotation annotation   property getannotation
jannotationvalue size   annotation getvalue
jclass propertytype   property gettype
string type   propertytype getsimplename
string getter       property getgetter   getsimplename
out print indent
if  type equals
out println     getter
else if  type equals
basesize    1
else if  type equals
basesize    1
else if  type equals
basesize    1
else if  type equals
basesize    1
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals       type equals
if  size    null
out println     getter
out println     getter       getter
else
basesize    size asint
else if  propertytype isarraytype
if  size    null
out println     getter       size asint
else
out println     getter
else if  isthrowable propertytype
out println     getter
else
if  iscachedproperty property
out println     getter
else
out println     getter
return basesize
protected void generatemarshal2body printwriter out
list properties   getproperties
for  iterator iter   properties iterator    iter hasnext
jproperty property    jproperty iter next
jannotation annotation   property getannotation
jannotationvalue size   annotation getvalue
jclass propertytype   property gettype
string type   propertytype getsimplename
string getter       property getgetter   getsimplename
out print indent
if  type equals
out println
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals
out println     getter
else if  type equals       type equals
if  size    null
out println     getter       size asint
else
out println
out println     getter
out println     getter
out println
else if  propertytype isarraytype
if  size    null
out println     getter       size asint
else
out println     getter
else if  isthrowable propertytype
out println     getter
else
if  iscachedproperty property
out println     getter
else
out println     getter
protected void generatefile printwriter out  throws exception
generatelicence out
out println  marshal   hpp
out println
out println
out println
out println
out.println(" *  marshalling code for open wire format for " + jclass.getsimplename() + "");
out.println(" *");
out.println(" * note!: this file is autogenerated - do not modify!");
out.println(" *        if you need to make a change, please see the groovy scripts in the");
out.println(" *        activemq-core module");
out println
out println
out println     classname       classname
out println
out println
out println
out println
out println     classname       classname
out println
out println
out println
out println
if   isabstractclass
out println
out println
out println     classname
out println
out println     jclass getsimplename
out println
out println
out println     classname
out println
out println     jclass getsimplename         jclass getsimplename
out println
out println
out println
out.println("     * un-marshal an object instance from the data input stream");
out println
out println     classname
out println
out println
list properties   getproperties
boolean marshalleraware   ismarshalleraware
if   properties isempty      marshalleraware
out println
out println     jclass getsimplename         jclass getsimplename
if  marshalleraware
out println
out println
out println
generatetightunmarshalbody out
if  marshalleraware
out println
out println
out println
out println
out println
out println
out println
out.println(" * write the booleans that this object uses to a booleanstream");
out println
out println     classname
out println     jclass getsimplename         jclass getsimplename
if  marshalleraware
out println
out println
out println
out println
int basesize   generatemarshal1body out
out println
out println     basesize
out println
out println
out println
out.println(" * write a object instance to data output stream");
out println
out println     classname
out println
if   properties isempty      marshalleraware
out println
out println     jclass getsimplename         jclass getsimplename
generatemarshal2body out
if  marshalleraware
out println
out println
out println
out println
@suppresswarnings
public void generatefactory printwriter out
generatelicence out
out println
out println
out println
out println
out println
out println
out println
out println
out println
out println  marshal   hpp
out println
list list   new arraylist getconcreteclasses
collections sort list  new comparator
public int compare object o1  object o2
jclass c1    jclass o1
jclass c2    jclass o2
return c1 getsimplename   compareto c2 getsimplename
for  iterator iter   list iterator    iter hasnext
jclass jclass    jclass iter next
out println  marshal  marshaller hpp
out println
out println
out println
out println
out println
out println
out println
for  iterator iter   list iterator    iter hasnext
jclass jclass    jclass iter next
out println     jclass getsimplename
out println
out println