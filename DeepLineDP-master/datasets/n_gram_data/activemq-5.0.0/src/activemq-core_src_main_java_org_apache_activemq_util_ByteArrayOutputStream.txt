/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq util
import java io outputstream
/**
* very similar to the java.io.bytearrayoutputstream but this version
* is not thread safe and the resulting data is returned in a bytesequence
* to avoid an extra byte[] allocation.
*/
public class bytearrayoutputstream extends outputstream
byte buffer
int size
public bytearrayoutputstream
this 1028
public bytearrayoutputstream int capacity
buffer   new byte
public void write int b
int newsize   size   1
checkcapacity newsize
buffer    byte  b
size   newsize
public void write byte b  int off  int len
int newsize   size   len
checkcapacity newsize
system arraycopy b  off  buffer  size  len
size   newsize
/**
* ensures the the buffer has at least the minimumcapacity specified.
* @param i
*/
private void checkcapacity int minimumcapacity
if  minimumcapacity > buffer length
byte b   new byte
system arraycopy buffer  0  b  0  size
buffer   b
public void reset
size   0
public bytesequence tobytesequence
return new bytesequence buffer  0  size
public byte tobytearray
byte rc   new byte
system arraycopy buffer  0  rc  0  size
return rc
public int size
return size