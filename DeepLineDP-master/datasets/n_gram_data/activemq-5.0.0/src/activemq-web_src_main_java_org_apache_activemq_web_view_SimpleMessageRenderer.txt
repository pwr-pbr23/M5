/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq web view
import java io ioexception
import java io printwriter
import java util enumeration
import javax jms jmsexception
import javax jms message
import javax jms queuebrowser
import javax servlet servletexception
import javax servlet http httpservletrequest
import javax servlet http httpservletresponse
/**
* a simple rendering of the contents of a queue appear as a list of message
* elements which just contain an id attribute.
*
* @version $revision: $
*/
public class simplemessagerenderer implements messagerenderer
private string contenttype
private int maxmessages
public void rendermessages httpservletrequest request  httpservletresponse response  queuebrowser browser  throws ioexception  jmsexception  servletexception
// lets use xml by default
response setcontenttype getcontenttype
printwriter writer   response getwriter
printheader writer  browser  request
enumeration iter   browser getenumeration
for  int counter   0  iter hasmoreelements       maxmessages <  0    counter < maxmessages   counter
message message    message iter nextelement
rendermessage writer  request  response  browser  message
printfooter writer  browser  request
public void rendermessage printwriter writer  httpservletrequest request  httpservletresponse response  queuebrowser browser  message message  throws jmsexception  servletexception
// lets just write the message ids for now
writer print
writer print message getjmsmessageid
writer println
// properties
// -------------------------------------------------------------------------
public int getmaxmessages
return maxmessages
public void setmaxmessages int maxmessages
this maxmessages   maxmessages
public string getcontenttype
return contenttype
public void setcontenttype string contenttype
this contenttype   contenttype
// implementation methods
// -------------------------------------------------------------------------
protected void printheader printwriter writer  queuebrowser browser  httpservletrequest request  throws ioexception  jmsexception  servletexception
writer println
writer print
writer print browser getqueue
writer print
string selector   browser getmessageselector
if  selector    null
writer print
writer print selector
writer print
writer println
protected void printfooter printwriter writer  queuebrowser browser  httpservletrequest request  throws ioexception  jmsexception  servletexception
writer println