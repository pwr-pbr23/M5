/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq usage
import java util list
import java util concurrent copyonwritearraylist
import org apache activemq service
import org apache activemq kaha store
import org apache activemq store persistenceadapter
/**
* holder for usage instances for memory, store and temp files main use case is
* manage memory usage.
*
* @org.apache.xbean.xbean
* @version $revision: 1.3 $
*/
public class systemusage implements service
private systemusage parent
private string name
private memoryusage memoryusage
private storeusage storeusage
private tempusage tempusage
/**
* true if someone called setsendfailifnospace() on this particular usage
* manager
*/
private boolean sendfailifnospaceexplicityset
private boolean sendfailifnospace
private list<systemusage> children   new copyonwritearraylist<systemusage>
public systemusage
this    null  null
public systemusage string name  persistenceadapter adapter  store tempstore
this parent   null
this name   name
this memoryusage   new memoryusage name
this storeusage   new storeusage name      adapter
this tempusage   new tempusage name      tempstore
public systemusage systemusage parent  string name
this parent   parent
this name   name
this memoryusage   new memoryusage parent memoryusage  name
this storeusage   new storeusage parent storeusage  name
this tempusage   new tempusage parent tempusage  name
public string getname
return name
/**
* @return the memoryusage
*/
public memoryusage getmemoryusage
return this memoryusage
/**
* @return the storeusage
*/
public storeusage getstoreusage
return this storeusage
/**
* @return the tempdiskusage
*/
public tempusage gettempusage
return this tempusage
public string tostring
return     getname
public void start
if  parent    null
parent addchild this
this memoryusage start
this storeusage start
this tempusage start
public void stop
if  parent    null
parent removechild this
this memoryusage stop
this storeusage stop
this tempusage stop
/**
* sets whether or not a send() should fail if there is no space free. the
* default value is false which means to block the send() method until space
* becomes available
*/
public void setsendfailifnospace boolean failproducerifnospace
sendfailifnospaceexplicityset   true
this sendfailifnospace   failproducerifnospace
public boolean issendfailifnospace
if  sendfailifnospaceexplicityset    parent    null
return sendfailifnospace
else
return parent issendfailifnospace
private void addchild systemusage child
children add child
private void removechild systemusage child
children remove child
public systemusage getparent
return parent
public void setparent systemusage parent
this parent   parent
public boolean issendfailifnospaceexplicityset
return sendfailifnospaceexplicityset
public void setsendfailifnospaceexplicityset boolean sendfailifnospaceexplicityset
this sendfailifnospaceexplicityset   sendfailifnospaceexplicityset
public void setname string name
this name   name
this memoryusage setname name
this storeusage setname name
this tempusage setname name
public void setmemoryusage memoryusage memoryusage
if  memoryusage getname      null
memoryusage setname this memoryusage getname
if  parent    null
memoryusage setparent parent memoryusage
this memoryusage   memoryusage
public void setstoreusage storeusage storeusage
if  storeusage getstore      null
storeusage setstore this storeusage getstore
if  storeusage getname      null
storeusage setname this storeusage getname
if  parent    null
storeusage setparent parent storeusage
this storeusage   storeusage
public void settempusage tempusage tempdiskusage
if  tempdiskusage getstore      null
tempdiskusage setstore this tempusage getstore
if  tempdiskusage getname      null
tempdiskusage setname this tempusage getname
if  parent    null
tempdiskusage setparent parent tempusage
this tempusage   tempdiskusage