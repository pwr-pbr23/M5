/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq management
import java util list
import org apache activemq activemqmessageconsumer
import org apache activemq activemqmessageproducer
import org apache activemq util indentprinter
/**
* statistics for a jms session
*
* @version $revision: 1.2 $
*/
public class jmssessionstatsimpl extends statsimpl
private list producers
private list consumers
private countstatisticimpl messagecount
private countstatisticimpl pendingmessagecount
private countstatisticimpl expiredmessagecount
private timestatisticimpl messagewaittime
private countstatisticimpl durablesubscriptioncount
private timestatisticimpl messageratetime
public jmssessionstatsimpl list producers  list consumers
this producers   producers
this consumers   consumers
this messagecount   new countstatisticimpl
this pendingmessagecount   new countstatisticimpl
this expiredmessagecount   new countstatisticimpl
this messagewaittime   new timestatisticimpl
this durablesubscriptioncount   new countstatisticimpl
this messagewaittime   new timestatisticimpl
this messageratetime   new timestatisticimpl
// lets add named stats
addstatistic    messagecount
addstatistic    pendingmessagecount
addstatistic    expiredmessagecount
addstatistic    messagewaittime
addstatistic    durablesubscriptioncount
addstatistic    messageratetime
public jmsproducerstatsimpl getproducers
// lets make a snapshot before we process them
object producerarray   producers toarray
int size   producerarray length
jmsproducerstatsimpl answer   new jmsproducerstatsimpl
for  int i   0  i < size  i
activemqmessageproducer producer    activemqmessageproducer producerarray
answer   producer getproducerstats
return answer
public jmsconsumerstatsimpl getconsumers
// lets make a snapshot before we process them
object consumerarray   consumers toarray
int size   consumerarray length
jmsconsumerstatsimpl answer   new jmsconsumerstatsimpl
for  int i   0  i < size  i
activemqmessageconsumer consumer    activemqmessageconsumer consumerarray
answer   consumer getconsumerstats
return answer
public void reset
super reset
jmsconsumerstatsimpl cstats   getconsumers
int size   cstats length
for  int i   0  i < size  i
cstats reset
jmsproducerstatsimpl pstats   getproducers
size   pstats length
for  int i   0  i < size  i
pstats reset
/**
* @param enabled the enabled to set
*/
public void setenabled boolean enabled
super setenabled enabled
jmsconsumerstatsimpl cstats   getconsumers
int size   cstats length
for  int i   0  i < size  i
cstats setenabled enabled
jmsproducerstatsimpl pstats   getproducers
size   pstats length
for  int i   0  i < size  i
pstats setenabled enabled
public countstatisticimpl getmessagecount
return messagecount
public countstatisticimpl getpendingmessagecount
return pendingmessagecount
public countstatisticimpl getexpiredmessagecount
return expiredmessagecount
public timestatisticimpl getmessagewaittime
return messagewaittime
public countstatisticimpl getdurablesubscriptioncount
return durablesubscriptioncount
public timestatisticimpl getmessageratetime
return messageratetime
public string tostring
stringbuffer buffer   new stringbuffer
buffer append messagecount
buffer append
buffer append messageratetime
buffer append
buffer append pendingmessagecount
buffer append
buffer append expiredmessagecount
buffer append
buffer append messagewaittime
buffer append
buffer append durablesubscriptioncount
buffer append
jmsproducerstatsimpl producerarray   getproducers
for  int i   0  i < producerarray length  i
if  i > 0
buffer append
buffer append integer tostring i
buffer append
buffer append producerarray
buffer append
jmsconsumerstatsimpl consumerarray   getconsumers
for  int i   0  i < consumerarray length  i
if  i > 0
buffer append
buffer append integer tostring i
buffer append
buffer append consumerarray
buffer append
return buffer tostring
public void dump indentprinter out
out printindent
out println messagecount
out printindent
out println messageratetime
out printindent
out println pendingmessagecount
out printindent
out println expiredmessagecount
out printindent
out println messagewaittime
out printindent
out println durablesubscriptioncount
out println
out printindent
out println
out incrementindent
jmsproducerstatsimpl producerarray   getproducers
for  int i   0  i < producerarray length  i
jmsproducerstatsimpl producer    jmsproducerstatsimpl producerarray
producer dump out
out decrementindent
out printindent
out println
out printindent
out println
out incrementindent
jmsconsumerstatsimpl consumerarray   getconsumers
for  int i   0  i < consumerarray length  i
jmsconsumerstatsimpl consumer    jmsconsumerstatsimpl consumerarray
consumer dump out
out decrementindent
out printindent
out println
public void oncreatedurablesubscriber
durablesubscriptioncount increment
public void onremovedurablesubscriber
durablesubscriptioncount decrement