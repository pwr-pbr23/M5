/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq console filter
import java util hashmap
import java util iterator
import java util map
import java util set
public class grouppropertiesviewfilter extends propertiesviewfilter
/**
* creates a group properties filter that is able to filter the display
* result based on a group prefix
*
* @param next - the next query filter
*/
public grouppropertiesviewfilter queryfilter next
super next
/**
* creates a group properties filter that is able to filter the display
* result based on a group prefix
*
* @param groupview - the group filter to use
* @param next - the next query filter
*/
public grouppropertiesviewfilter set groupview  queryfilter next
super groupview  next
/**
* filter the properties that matches the group prefix only.
*
* @param data - map data to filter
* @return - filtered map data
*/
protected map filterview map data
// if no view specified, display all attributes
if  viewfilter    null    viewfilter isempty
return data
map newdata
try
// lets try to use the same class as the original
newdata   data getclass   newinstance
catch  exception e
// lets use a default hashmap
newdata   new hashmap
// filter the keys to view
for  iterator<string> i   data keyset   iterator    i hasnext
string key   i next
// checks if key matches any of the group filter
for  iterator j   viewfilter iterator    j hasnext
string group    string j next
if  key startswith group
newdata put key  data get key
break
return newdata