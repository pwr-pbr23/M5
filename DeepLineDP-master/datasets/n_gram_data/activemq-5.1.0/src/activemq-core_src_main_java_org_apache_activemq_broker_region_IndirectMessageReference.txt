/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq broker region
import org apache activemq command consumerid
import org apache activemq command message
import org apache activemq command messageid
/**
* keeps track of a message that is flowing through the broker. this object may
* hold a hard reference to the message or only hold the id of the message if
* the message has been persisted on in a messagestore.
*
* @version $revision: 1.15 $
*/
public class indirectmessagereference implements queuemessagereference
/** the subscription that has locked the message */
private lockowner lockowner
/** has the message been dropped? */
private boolean dropped
/** has the message been acked? */
private boolean acked
/** direct reference to the message */
private final message message
/**
* @param message
*/
public indirectmessagereference final message message
this message   message
message getmessageid
message getgroupid
message getgroupsequence
public message getmessagehardref
return message
public int getreferencecount
return message getreferencecount
public int incrementreferencecount
return message incrementreferencecount
public int decrementreferencecount
return message decrementreferencecount
public message getmessage
return message
public string tostring
return     message getmessageid         dropped        lockowner    null
public void incrementredeliverycounter
message incrementredeliverycounter
public synchronized boolean isdropped
return dropped
public synchronized void drop
dropped   true
lockowner   null
message decrementreferencecount
public boolean lock lockowner subscription
synchronized  this
if  dropped     lockowner    null    lockowner    subscription
return false
lockowner   subscription
return true
public synchronized boolean unlock
boolean result   lockowner    null
lockowner   null
return result
public synchronized lockowner getlockowner
return lockowner
public int getredeliverycounter
return message getredeliverycounter
public messageid getmessageid
return message getmessageid
public destination getregiondestination
return message getregiondestination
public boolean ispersistent
return message ispersistent
public synchronized boolean islocked
return lockowner    null
public synchronized boolean isacked
return acked
public synchronized void setacked boolean b
acked   b
public string getgroupid
return message getgroupid
public int getgroupsequence
return message getgroupsequence
public consumerid gettargetconsumerid
return message gettargetconsumerid
public long getexpiration
return message getexpiration
public boolean isexpired
return message isexpired
public synchronized int getsize
return message getsize