package org jruby ext etc
import org jruby anno jrubymethod
import org jruby anno jrubymodule
import org jruby common irubywarnings id
import org jruby exceptions raiseexception
import jnr posix passwd
import jnr posix group
import jnr posix posix
import jnr posix util platform
import org jruby ruby
import org jruby rubymodule
import org jruby rubynumeric
import org jruby rubystruct
import org jruby runtime block
import org jruby runtime threadcontext
import org jruby runtime builtin irubyobject
@jrubymodule name
public class rubyetc
public static rubymodule createetcmodule ruby runtime
rubymodule etcmodule   runtime definemodule
runtime setetc etcmodule
etcmodule defineannotatedmethods rubyetc class
definepasswdstruct runtime
definegroupstruct runtime
return etcmodule
private static void definepasswdstruct ruby runtime
irubyobject args   new irubyobject
runtime newstring
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime setpasswdstruct rubystruct newinstance runtime getstructclass    args  block null_block
private static void definegroupstruct ruby runtime
irubyobject args   new irubyobject
runtime newstring
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime newsymbol
runtime setgroupstruct rubystruct newinstance runtime getstructclass    args  block null_block
private static irubyobject setuppasswd ruby runtime  passwd passwd
irubyobject args   new irubyobject
runtime newstring passwd getloginname
runtime newstring passwd getpassword
runtime newfixnum passwd getuid
runtime newfixnum passwd getgid
runtime newstring passwd getgecos
runtime newstring passwd gethome
runtime newstring passwd getshell
runtime newfixnum passwd getpasswdchangetime
runtime newstring passwd getaccessclass
runtime newfixnum passwd getexpire
return rubystruct newstruct runtime getpasswdstruct    args  block null_block
private static irubyobject setupgroup ruby runtime  group group
irubyobject args   new irubyobject
runtime newstring group getname
runtime newstring group getpassword
runtime newfixnum group getgid
intostringarray runtime  group getmembers
return rubystruct newstruct runtime getgroupstruct    args  block null_block
private static irubyobject intostringarray ruby runtime  string members
irubyobject arr   new irubyobject
for int i   0  i<arr length  i
arr   runtime newstring members
return runtime newarraynocopy arr
@jrubymethod name      optional 1  module   true
public static irubyobject getpwuid irubyobject recv  irubyobject args
ruby runtime   recv getruntime
posix posix   runtime getposix
try
int uid   args length    0 ? posix getuid     rubynumeric fix2int args
passwd pwd   posix getpwuid uid
if pwd    null
if  platform is_windows        mri behavior
return recv getruntime   getnil
throw runtime newargumenterror     uid
return setuppasswd runtime  pwd
catch  raiseexception re
if  runtime getnotimplementederror   isinstance re getexception
return runtime getnil
throw re
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      required 1  module   true
public static irubyobject getpwnam irubyobject recv  irubyobject name
ruby runtime   recv getruntime
string nam   name converttostring   tostring
try
passwd pwd   runtime getposix   getpwnam nam
if pwd    null
if  platform is_windows        mri behavior
return runtime getnil
throw runtime newargumenterror     nam
return setuppasswd recv getruntime    pwd
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod module   true
public static irubyobject passwd irubyobject recv  block block
ruby runtime   recv getruntime
posix posix   runtime getposix
try
// call getpwent to fail early if unsupported
posix getpwent
if block isgiven
threadcontext context   runtime getcurrentcontext
posix setpwent
passwd pw
while  pw   posix getpwent       null
block yield context  setuppasswd runtime  pw
posix endpwent
passwd pw   posix getpwent
if  pw    null
return setuppasswd runtime  pw
else
return runtime getnil
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      module   true
public static irubyobject getlogin irubyobject recv
ruby runtime   recv getruntime
try
string login   runtime getposix   getlogin
if  login    null
return runtime newstring login
login   system getenv
if  login    null
return runtime newstring login
return runtime getnil
catch  exception e
// fall back on env entry for user
return runtime newstring system getproperty
@jrubymethod name      module   true
public static irubyobject endpwent irubyobject recv
ruby runtime   recv getruntime
try
runtime getposix   endpwent
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      module   true
public static irubyobject setpwent irubyobject recv
ruby runtime   recv getruntime
try
runtime getposix   setpwent
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      module   true
public static irubyobject getpwent irubyobject recv
ruby runtime   recv getruntime
try
passwd passwd   runtime getposix   getpwent
if  passwd    null
return setuppasswd runtime  passwd
else
return runtime getnil
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      required 1  module   true
public static irubyobject getgrnam irubyobject recv  irubyobject name
ruby runtime   recv getruntime
string nam   name converttostring   tostring
try
group grp   runtime getposix   getgrnam nam
if grp    null
if  platform is_windows        mri behavior
return runtime getnil
throw runtime newargumenterror     nam
return setupgroup runtime  grp
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      optional 1  module   true
public static irubyobject getgrgid irubyobject recv  irubyobject args
ruby runtime   recv getruntime
posix posix   runtime getposix
try
int gid   args length    0 ? posix getgid     rubynumeric fix2int args
group gr   posix getgrgid gid
if gr    null
if  platform is_windows        mri behavior
return runtime getnil
throw runtime newargumenterror     gid
return setupgroup runtime  gr
catch  raiseexception re
throw re
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      module   true
public static irubyobject endgrent irubyobject recv
ruby runtime   recv getruntime
try
runtime getposix   endgrent
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod module   true
public static irubyobject setgrent irubyobject recv
ruby runtime   recv getruntime
try
runtime getposix   setgrent
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod module   true
public static irubyobject group irubyobject recv  block block
ruby runtime   recv getruntime
posix posix   runtime getposix
try
// try to read grent to fail fast
posix getgrent
if block isgiven
threadcontext context   runtime getcurrentcontext
posix setgrent
group gr
while  gr   posix getgrent       null
block yield context  setupgroup runtime  gr
posix endgrent
group gr   posix getgrent
if  gr    null
return setupgroup runtime  gr
else
return runtime getnil
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil
@jrubymethod name      module   true
public static irubyobject getgrent irubyobject recv
ruby runtime   recv getruntime
try
group gr   runtime getposix   getgrent
if  gr    null
return setupgroup recv getruntime    gr
else
return runtime getnil
catch  exception e
if  runtime getdebug   istrue
runtime getwarnings   warn id not_implemented
return runtime getnil