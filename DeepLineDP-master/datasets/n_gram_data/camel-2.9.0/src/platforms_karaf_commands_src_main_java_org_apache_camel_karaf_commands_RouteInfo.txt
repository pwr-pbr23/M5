/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel karaf commands
import java text simpledateformat
import java util date
import java util iterator
import java util set
import javax management mbeanserver
import javax management objectname
import org apache camel camelcontext
import org apache camel route
import org apache camel management defaultmanagementagent
import org apache camel model modelhelper
import org apache camel model routedefinition
import org apache felix gogo commands argument
import org apache felix gogo commands command
import org apache karaf shell console osgicommandsupport
import org apache karaf util stringescapeutils
/**
* command to display detailed information about a camel route.
*/
@command scope      name      description
public class routeinfo extends osgicommandsupport
@argument index   0  name      description      required   true  multivalued   false
string route
@argument index   1  name      description      required   false  multivalued   false
string context
private camelcontroller camelcontroller
public void setcamelcontroller camelcontroller camelcontroller
this camelcontroller   camelcontroller
public object doexecute   throws exception
route camelroute   camelcontroller getroute route  context
if  camelroute    null
system err println     route
return null
system out println stringescapeutils unescapejava     camelroute getid
system out println stringescapeutils unescapejava     camelroute getroutecontext   getcamelcontext   getname
system out println
system out println stringescapeutils unescapejava
for  string property   camelroute getproperties   keyset
system out println stringescapeutils unescapejava     property       camelroute getproperties   get property
system out println
system out println stringescapeutils unescapejava
camelcontext camelcontext   camelroute getroutecontext   getcamelcontext
if  camelcontext    null
mbeanserver mbeanserver   camelcontext getmanagementstrategy   getmanagementagent   getmbeanserver
set<objectname> set   mbeanserver querynames new objectname defaultmanagementagent default_domain          null
iterator<objectname> iterator   set iterator
if  iterator hasnext
objectname routembean   iterator next
long exchangestotal    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     exchangestotal
long exchangescompleted    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     exchangescompleted
long exchangesfailed    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     exchangesfailed
long minprocessingtime    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     minprocessingtime
long maxprocessingtime    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     maxprocessingtime
long meanprocessingtime    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     meanprocessingtime
long totalprocessingtime    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     totalprocessingtime
long lastprocessingtime    long  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     lastprocessingtime
date firstexchangetimestamp    date  mbeanserver getattribute routembean
simpledateformat format   new simpledateformat
system out println stringescapeutils unescapejava     format format firstexchangetimestamp
date lastexchangecompletedtimestamp    date  mbeanserver getattribute routembean
system out println stringescapeutils unescapejava     format format lastexchangecompletedtimestamp
system out println
system out println stringescapeutils unescapejava
routedefinition definition   camelcontroller getroutedefinition route  camelroute getroutecontext   getcamelcontext   getname
system out println stringescapeutils unescapejava modelhelper dumpmodelasxml definition
return null