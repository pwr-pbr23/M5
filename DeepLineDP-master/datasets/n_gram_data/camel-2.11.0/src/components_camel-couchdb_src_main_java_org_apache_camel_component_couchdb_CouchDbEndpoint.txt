/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component couchdb
import java net uri
import com google gson jsonobject
import org apache camel consumer
import org apache camel exchange
import org apache camel processor
import org apache camel producer
import org apache camel impl defaultendpoint
import org lightcouch couchdbclient
public class couchdbendpoint extends defaultendpoint
public static final string default_style
public static final long default_heartbeat   30000
public static final int default_port   5984
private static final string uri_error
private string protocol
private string hostname
private string style   default_style
private string username
private string database
private string password
private int port
private long heartbeat   default_heartbeat
private boolean createdatabase
private boolean deletes   true
private boolean updates   true
public couchdbendpoint
public couchdbendpoint string endpointuri  string remaining  couchdbcomponent component  throws exception
super endpointuri  component
uri uri   new uri remaining
protocol   uri getscheme
if  protocol    null
throw new illegalargumentexception uri_error
port   uri getport       1 ? default_port   uri getport
if  uri getpath      null    uri getpath   trim   length      0
throw new illegalargumentexception uri_error
database   uri getpath   substring 1
hostname   uri gethost
if  hostname    null
throw new illegalargumentexception uri_error
@override
public consumer createconsumer processor processor  throws exception
return new couchdbconsumer this  createclient    processor
@override
public producer createproducer   throws exception
return new couchdbproducer this  createclient
@override
public boolean issingleton
return true
public exchange createexchange string seq  string id  jsonobject obj  boolean deleted
exchange exchange   super createexchange
exchange getin   setheader couchdbconstants header_database  database
exchange getin   setheader couchdbconstants header_seq  seq
exchange getin   setheader couchdbconstants header_doc_id  id
exchange getin   setheader couchdbconstants header_doc_rev  obj get    getasstring
exchange getin   setheader couchdbconstants header_method  deleted ?
exchange getin   setbody obj
return exchange
protected couchdbclientwrapper createclient
return new couchdbclientwrapper new couchdbclient database  createdatabase  protocol  hostname  port  username  password
public string getprotocol
return protocol
public void setprotocol string protocol
this protocol   protocol
public string gethostname
return hostname
public void sethostname string hostname
this hostname   hostname
public string getstyle
return style
public void setstyle string style
this style   style
public string getusername
return username
public void setusername string username
this username   username
public string getdatabase
return database
public void setdatabase string database
this database   database
public string getpassword
return password
public void setpassword string password
this password   password
public int getport
return port
public void setport int port
this port   port
public long getheartbeat
return heartbeat
public void setheartbeat long heartbeat
this heartbeat   heartbeat
public boolean iscreatedatabase
return createdatabase
public void setcreatedatabase boolean createdatabase
this createdatabase   createdatabase
public boolean isdeletes
return deletes
public void setdeletes boolean deletes
this deletes   deletes
public boolean isupdates
return updates
public void setupdates boolean updates
this updates   updates