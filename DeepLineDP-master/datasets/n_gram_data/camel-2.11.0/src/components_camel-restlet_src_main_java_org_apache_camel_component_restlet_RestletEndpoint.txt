/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component restlet
import java util list
import java util map
import org apache camel consumer
import org apache camel exchangepattern
import org apache camel processor
import org apache camel producer
import org apache camel impl defaultendpoint
import org apache camel spi headerfilterstrategy
import org apache camel spi headerfilterstrategyaware
import org apache camel util collectionstringbuffer
import org restlet data method
/**
* represents a <a href="http://www.restlet.org/"> endpoint</a>
*
* @version
*/
public class restletendpoint extends defaultendpoint implements headerfilterstrategyaware
private static final int default_port   80
private static final string default_protocol
private static final string default_host
private method restletmethod   method get
// optional and for consumer only. this allows a single route to service multiple methods.
// if it is non-null then restletmethod is ignored.
private method restletmethods
private string protocol   default_protocol
private string host   default_host
private int port   default_port
private string uripattern
// optional and for consumer only. this allows a single route to service multiple uri patterns.
// the uri pattern defined in the endpoint will still be honored.
private list<string> restleturipatterns
private map<string  string> restletrealm
private headerfilterstrategy headerfilterstrategy
private restletbinding restletbinding
private boolean throwexceptiononfailure   true
public restletendpoint restletcomponent component  string remaining  throws exception
super remaining  component
public boolean issingleton
return true
@override
public boolean islenientproperties
// true to allow dynamic uri options to be configured and passed to external system.
return true
public consumer createconsumer processor processor  throws exception
return new restletconsumer this  processor
public producer createproducer   throws exception
return new restletproducer this
public void connect restletconsumer restletconsumer  throws exception
restletcomponent  getcomponent    connect restletconsumer
public void disconnect restletconsumer restletconsumer  throws exception
restletcomponent  getcomponent    disconnect restletconsumer
public method getrestletmethod
return restletmethod
public void setrestletmethod method restletmethod
this restletmethod   restletmethod
public string getprotocol
return protocol
public void setprotocol string protocol
this protocol   protocol
public string gethost
return host
public void sethost string host
this host   host
public int getport
return port
public void setport int port
this port   port
public string geturipattern
return uripattern
public void seturipattern string uripattern
this uripattern   uripattern
public restletbinding getrestletbinding
return restletbinding
public void setrestletbinding restletbinding restletbinding
this restletbinding   restletbinding
public void setheaderfilterstrategy headerfilterstrategy headerfilterstrategy
this headerfilterstrategy   headerfilterstrategy
if  restletbinding instanceof headerfilterstrategyaware
headerfilterstrategyaware  restletbinding  setheaderfilterstrategy headerfilterstrategy
public headerfilterstrategy getheaderfilterstrategy
return headerfilterstrategy
public void setrestletrealm map<string  string> restletrealm
this restletrealm   restletrealm
public map<string  string> getrestletrealm
return restletrealm
@override
public exchangepattern getexchangepattern
// should always use in out for restlet
return exchangepattern inout
public void setrestletmethods method restletmethods
this restletmethods   restletmethods
public method getrestletmethods
return restletmethods
public void setrestleturipatterns list<string> restleturipatterns
this restleturipatterns   restleturipatterns
public list<string> getrestleturipatterns
return restleturipatterns
public boolean isthrowexceptiononfailure
return throwexceptiononfailure
public void setthrowexceptiononfailure boolean throwexceptiononfailure
this throwexceptiononfailure   throwexceptiononfailure
// update the endpointuri with the restlet method information
protected void updateendpointuri
string endpointuri   getendpointuri
collectionstringbuffer methods   new collectionstringbuffer
if  getrestletmethods      null    getrestletmethods   length > 0
// list the method(s) as a comma seperated list
for  method method   getrestletmethods
methods append method getname
else
// otherwise consider the single method we own
methods append getrestletmethod
// update the uri
endpointuri   endpointuri       methods
setendpointuri endpointuri
@override
protected void dostart   throws exception
if  headerfilterstrategy    null
headerfilterstrategy   new restletheaderfilterstrategy
if  restletbinding    null
restletbinding   new defaultrestletbinding
if  restletbinding instanceof headerfilterstrategyaware
headerfilterstrategyaware  restletbinding  setheaderfilterstrategy getheaderfilterstrategy
@override
protected void dostop   throws exception
// noop