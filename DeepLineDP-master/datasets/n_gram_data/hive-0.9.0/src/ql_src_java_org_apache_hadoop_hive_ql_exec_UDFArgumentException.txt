/**
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hive ql exec
import java lang reflect method
import java lang reflect type
import java util arraylist
import java util list
import org apache hadoop hive ql parse semanticexception
import org apache hadoop hive serde2 objectinspector objectinspectorutils
import org apache hadoop hive serde2 typeinfo typeinfo
/**
* exception class, thrown when udf argument have something wrong.
*/
public class udfargumentexception extends semanticexception
public udfargumentexception
super
public udfargumentexception string message
super message
public udfargumentexception throwable cause
super cause
/**
* constructor.
*
* @param funcclass
*          the udf or udaf class.
* @param argtypeinfos
*          the list of argument types that lead to an ambiguity.
* @param methods
*          all potential matches.
*/
public udfargumentexception string message
class<?> funcclass
list<typeinfo> argtypeinfos
list<method> methods
super getmessage message  funcclass  argtypeinfos  methods
this funcclass   funcclass
this argtypeinfos   argtypeinfos
this methods   methods
private static string getmessage string message
class<?> funcclass
list<typeinfo> argtypeinfos
list<method> methods
stringbuilder sb   new stringbuilder
sb append message
if  methods    null
sb append
for  method m  methods
type types   m getgenericparametertypes
sb append
list<string> typenames   new arraylist<string> types length
for  int t   0  t < types length  t
if  t > 0
sb append
sb append objectinspectorutils gettypenamefromjavaclass types
sb append
return sb tostring
/**
* the udf or udaf class that has the ambiguity.
*/
private class<?> funcclass
/**
* the list of parameter types.
*/
private list<typeinfo> argtypeinfos
/**
* the list of matched methods.
*/
private list<method> methods
public class<?> getfunctionclass
return funcclass
public list<typeinfo> getargtypelist
return argtypeinfos
public list<method> getmethods
return methods