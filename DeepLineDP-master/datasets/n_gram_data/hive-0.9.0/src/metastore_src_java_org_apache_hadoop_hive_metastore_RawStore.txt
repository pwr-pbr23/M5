/**
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hive metastore
import java util list
import java util map
import org apache hadoop conf configurable
import org apache hadoop hive metastore api database
import org apache hadoop hive metastore api index
import org apache hadoop hive metastore api invalidobjectexception
import org apache hadoop hive metastore api invalidpartitionexception
import org apache hadoop hive metastore api metaexception
import org apache hadoop hive metastore api nosuchobjectexception
import org apache hadoop hive metastore api partition
import org apache hadoop hive metastore api partitioneventtype
import org apache hadoop hive metastore api principalprivilegeset
import org apache hadoop hive metastore api principaltype
import org apache hadoop hive metastore api privilegebag
import org apache hadoop hive metastore api role
import org apache hadoop hive metastore api table
import org apache hadoop hive metastore api type
import org apache hadoop hive metastore api unknowndbexception
import org apache hadoop hive metastore api unknownpartitionexception
import org apache hadoop hive metastore api unknowntableexception
import org apache hadoop hive metastore model mdbprivilege
import org apache hadoop hive metastore model mglobalprivilege
import org apache hadoop hive metastore model mpartitioncolumnprivilege
import org apache hadoop hive metastore model mpartitionprivilege
import org apache hadoop hive metastore model mrolemap
import org apache hadoop hive metastore model mtablecolumnprivilege
import org apache hadoop hive metastore model mtableprivilege
public interface rawstore extends configurable
public abstract void shutdown
/**
* opens a new one or the one already created every call of this function must
* have corresponding commit or rollback function call
*
* @return an active transaction
*/
public abstract boolean opentransaction
/**
* if this is the commit of the first open call then an actual commit is
* called.
*
* @return true or false
*/
public abstract boolean committransaction
/**
* rolls back the current transaction if it is active
*/
public abstract void rollbacktransaction
public abstract void createdatabase database db
throws invalidobjectexception  metaexception
public abstract database getdatabase string name
throws nosuchobjectexception
public abstract boolean dropdatabase string dbname  throws nosuchobjectexception  metaexception
public abstract boolean alterdatabase string dbname  database db  throws nosuchobjectexception  metaexception
public abstract list<string> getdatabases string pattern  throws metaexception
public abstract list<string> getalldatabases   throws metaexception
public abstract boolean createtype type type
public abstract type gettype string typename
public abstract boolean droptype string typename
public abstract void createtable table tbl  throws invalidobjectexception
metaexception
public abstract boolean droptable string dbname  string tablename
throws metaexception
public abstract table gettable string dbname  string tablename
throws metaexception
public abstract boolean addpartition partition part
throws invalidobjectexception  metaexception
public abstract partition getpartition string dbname  string tablename
list<string> part_vals  throws metaexception  nosuchobjectexception
public abstract boolean droppartition string dbname  string tablename
list<string> part_vals  throws metaexception
public abstract list<partition> getpartitions string dbname
string tablename  int max  throws metaexception
public abstract void altertable string dbname  string name  table newtable
throws invalidobjectexception  metaexception
public list<string> gettables string dbname  string pattern
throws metaexception
/**
* @param dbname
*        the name of the database from which to retrieve the tables
* @param tablenames
*        the names of the tables to retrieve.
* @return a list of the tables retrievable from the database
*          whose names are in the list tablenames.
*         if there are duplicate names, only one instance of the table will be returned
* @throws metaexception
*/
public list<table> gettableobjectsbyname string dbname  list<string> tablenames
throws metaexception  unknowndbexception
public list<string> getalltables string dbname  throws metaexception
/**
* gets a list of tables based on a filter string and filter type.
* @param dbname
*          the name of the database from which you will retrieve the table names
* @param filter
*          the filter string
* @param max_tables
*          the maximum number of tables returned
* @return  a list of table names that match the desired filter
* @throws metaexception
* @throws unknowndbexception
*/
public abstract list<string> listtablenamesbyfilter string dbname
string filter  short max_tables  throws metaexception  unknowndbexception
public abstract list<string> listpartitionnames string db_name
string tbl_name  short max_parts  throws metaexception
public abstract list<string> listpartitionnamesbyfilter string db_name
string tbl_name  string filter  short max_parts  throws metaexception
public abstract void alterpartition string db_name  string tbl_name  list<string> part_vals
partition new_part  throws invalidobjectexception  metaexception
public abstract boolean addindex index index
throws invalidobjectexception  metaexception
public abstract index getindex string dbname  string origtablename  string indexname  throws metaexception
public abstract boolean dropindex string dbname  string origtablename  string indexname  throws metaexception
public abstract list<index> getindexes string dbname
string origtablename  int max  throws metaexception
public abstract list<string> listindexnames string dbname
string origtablename  short max  throws metaexception
public abstract void alterindex string dbname  string basetblname  string name  index newindex
throws invalidobjectexception  metaexception
public abstract list<partition> getpartitionsbyfilter
string dbname  string tblname  string filter  short maxparts
throws metaexception  nosuchobjectexception
public abstract list<partition> getpartitionsbynames
string dbname  string tblname  list<string> partnames
throws metaexception  nosuchobjectexception
public abstract table markpartitionforevent string dbname  string tblname  map<string string> partvals  partitioneventtype evttype  throws metaexception  unknowntableexception  invalidpartitionexception  unknownpartitionexception
public abstract boolean ispartitionmarkedforevent string dbname  string tblname  map<string  string> partname  partitioneventtype evttype  throws metaexception  unknowntableexception  invalidpartitionexception  unknownpartitionexception
public abstract boolean addrole string rowname  string ownername
throws invalidobjectexception  metaexception  nosuchobjectexception
public abstract boolean removerole string rolename  throws metaexception  nosuchobjectexception
public abstract boolean grantrole role role  string username  principaltype principaltype
string grantor  principaltype grantortype  boolean grantoption
throws metaexception  nosuchobjectexception  invalidobjectexception
public abstract boolean revokerole role role  string username  principaltype principaltype
throws metaexception  nosuchobjectexception
public abstract principalprivilegeset getuserprivilegeset string username
list<string> groupnames  throws invalidobjectexception  metaexception
public abstract principalprivilegeset getdbprivilegeset  string dbname  string username
list<string> groupnames   throws invalidobjectexception  metaexception
public abstract principalprivilegeset gettableprivilegeset  string dbname  string tablename
string username  list<string> groupnames  throws invalidobjectexception  metaexception
public abstract principalprivilegeset getpartitionprivilegeset  string dbname  string tablename
string partition  string username  list<string> groupnames  throws invalidobjectexception  metaexception
public abstract principalprivilegeset getcolumnprivilegeset  string dbname  string tablename  string partitionname
string columnname  string username  list<string> groupnames  throws invalidobjectexception  metaexception
public abstract list<mglobalprivilege> listprincipalglobalgrants string principalname
principaltype principaltype
public abstract list<mdbprivilege> listprincipaldbgrants string principalname
principaltype principaltype  string dbname
public abstract list<mtableprivilege> listalltablegrants
string principalname  principaltype principaltype  string dbname
string tablename
public abstract list<mpartitionprivilege> listprincipalpartitiongrants
string principalname  principaltype principaltype  string dbname
string tablename  string partname
public abstract list<mtablecolumnprivilege> listprincipaltablecolumngrants
string principalname  principaltype principaltype  string dbname
string tablename  string columnname
public abstract list<mpartitioncolumnprivilege> listprincipalpartitioncolumngrants
string principalname  principaltype principaltype  string dbname
string tablename  string partname  string columnname
public abstract boolean grantprivileges  privilegebag privileges
throws invalidobjectexception  metaexception  nosuchobjectexception
public abstract boolean revokeprivileges   privilegebag privileges
throws invalidobjectexception  metaexception  nosuchobjectexception
public abstract org apache hadoop hive metastore api role getrole
string rolename  throws nosuchobjectexception
public list<string> listrolenames
public list<mrolemap> listroles string principalname
principaltype principaltype
public abstract partition getpartitionwithauth string dbname  string tblname
list<string> partvals  string user_name  list<string> group_names
throws metaexception  nosuchobjectexception  invalidobjectexception
public abstract list<partition> getpartitionswithauth string dbname
string tblname  short maxparts  string username  list<string> groupnames
throws metaexception  nosuchobjectexception  invalidobjectexception
/**
* lists partition names that match a given partial specification
* @param db_name
*          the name of the database which has the partitions
* @param tbl_name
*          the name of the table which has the partitions
* @param part_vals
*          a partial list of values for partitions in order of the table's partition keys.
*          entries can be empty if you only want to specify latter partitions.
* @param max_parts
*          the maximum number of partitions to return
* @return a list of partition names that match the partial spec.
* @throws metaexception
* @throws nosuchobjectexception
*/
public abstract list<string> listpartitionnamesps string db_name  string tbl_name
list<string> part_vals  short max_parts
throws metaexception  nosuchobjectexception
/**
* lists partitions that match a given partial specification and sets their auth privileges.
*   if username and groupnames null, then no auth privileges are set.
* @param db_name
*          the name of the database which has the partitions
* @param tbl_name
*          the name of the table which has the partitions
* @param part_vals
*          a partial list of values for partitions in order of the table's partition keys
*          entries can be empty if you need to specify latter partitions.
* @param max_parts
*          the maximum number of partitions to return
* @param username
*          the user name for the partition for authentication privileges
* @param groupnames
*          the groupnames for the partition for authentication privileges
* @return a list of partitions that match the partial spec.
* @throws metaexception
* @throws nosuchobjectexception
* @throws invalidobjectexception
*/
public abstract list<partition> listpartitionspswithauth string db_name  string tbl_name
list<string> part_vals  short max_parts  string username  list<string> groupnames
throws metaexception  invalidobjectexception  nosuchobjectexception
public abstract long cleanupevents