/**
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hive ql plan
import java io serializable
import java util arraylist
import org apache hadoop fs path
/**
* filesinkdesc.
*
*/
@explain displayname
public class filesinkdesc implements serializable
private static final long serialversionuid   1l
private string dirname
// normally statskeypref will be the same as dirname, but the latter
// could be changed in local execution optimization
private string statskeypref
private tabledesc tableinfo
private boolean compressed
private int desttableid
private string compresscodec
private string compresstype
private boolean multifilespray
private int     totalfiles
private arraylist<exprnodedesc> partitioncols
private int     numfiles
private dynamicpartitionctx dpctx
private string staticspec     static partition spec ends with a
private boolean gatherstats
public filesinkdesc
public filesinkdesc final string dirname  final tabledesc tableinfo
final boolean compressed  final int desttableid  final boolean multifilespray
final int numfiles  final int totalfiles  final arraylist<exprnodedesc> partitioncols
final dynamicpartitionctx dpctx
this dirname   dirname
this tableinfo   tableinfo
this compressed   compressed
this desttableid   desttableid
this multifilespray   multifilespray
this numfiles   numfiles
this totalfiles   totalfiles
this partitioncols   partitioncols
this dpctx   dpctx
public filesinkdesc final string dirname  final tabledesc tableinfo
final boolean compressed
this dirname   dirname
this tableinfo   tableinfo
this compressed   compressed
desttableid   0
this multifilespray   false
this numfiles   1
this totalfiles   1
this partitioncols   null
@explain displayname      normalexplain   false
public string getdirname
return dirname
public void setdirname final string dirname
this dirname   dirname
@explain displayname
public tabledesc gettableinfo
return tableinfo
public void settableinfo final tabledesc tableinfo
this tableinfo   tableinfo
@explain displayname
public boolean getcompressed
return compressed
public void setcompressed boolean compressed
this compressed   compressed
@explain displayname
public int getdesttableid
return desttableid
public void setdesttableid int desttableid
this desttableid   desttableid
public string getcompresscodec
return compresscodec
public void setcompresscodec string intermediatecompressorcodec
compresscodec   intermediatecompressorcodec
public string getcompresstype
return compresstype
public void setcompresstype string intermediatecompresstype
compresstype   intermediatecompresstype
/**
* @return the multifilespray
*/
@explain displayname      normalexplain   false
public boolean ismultifilespray
return multifilespray
/**
* @param multifilespray the multifilespray to set
*/
public void setmultifilespray boolean multifilespray
this multifilespray   multifilespray
/**
* @return the totalfiles
*/
@explain displayname      normalexplain   false
public int gettotalfiles
return totalfiles
/**
* @param totalfiles the totalfiles to set
*/
public void settotalfiles int totalfiles
this totalfiles   totalfiles
/**
* @return the partitioncols
*/
public arraylist<exprnodedesc> getpartitioncols
return partitioncols
/**
* @param partitioncols the partitioncols to set
*/
public void setpartitioncols arraylist<exprnodedesc> partitioncols
this partitioncols   partitioncols
/**
* @return the numfiles
*/
@explain displayname      normalexplain   false
public int getnumfiles
return numfiles
/**
* @param numfiles the numfiles to set
*/
public void setnumfiles int numfiles
this numfiles   numfiles
public void setdynpartctx dynamicpartitionctx dpc
this dpctx   dpc
public dynamicpartitionctx getdynpartctx
return this dpctx
public void setstaticspec string staticspec
this staticspec   staticspec
@explain displayname      normalexplain   false
public string getstaticspec
return staticspec
public void setgatherstats boolean gatherstats
this gatherstats   gatherstats
@explain displayname      normalexplain   false
public boolean isgatherstats
return gatherstats
/**
* construct the key prefix used as (intermediate) statistics publishing
* and aggregation. during stats publishing phase, this key prefix will be
* appended with the optional dynamic partition spec and the task id. the
* whole key uniquely identifies the output of a task for this job. in the
* stats aggregation phase, all rows with the same prefix plus dynamic partition
* specs (obtained at run-time after mr job finishes) will be serving as the
* prefix: all rows with the same prefix (output of all tasks for this job)
* will be aggregated.
* @return key prefix used for stats publishing and aggregation.
*/
@explain displayname      normalexplain   false
public string getstatsaggprefix
// dirname uniquely identifies destination directory of a filesinkoperator.
// if more than one filesinkoperator write to the same partition, this dirname
// should be different.
return statskeypref
/**
* set the stats aggregation key. if the input string is not terminated by path.separator
* aggregation key will add one to make it as a directory name.
* @param k input directory name.
*/
public void setstatsaggprefix string k
if  k endswith path separator
statskeypref   k
else
statskeypref   k   path separator