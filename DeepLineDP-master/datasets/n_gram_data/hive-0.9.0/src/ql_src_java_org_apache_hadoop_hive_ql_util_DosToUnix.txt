/**
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hive ql util
import java io bufferedreader
import java io bufferedwriter
import java io file
import java io fileinputstream
import java io filereader
import java io filewriter
import java io inputstreamreader
public class dostounix
public static string convertwindowsscripttounix file windowsscriptfile  throws exception
string windowsscriptfilename   windowsscriptfile getname
string unixscriptfilename   getunixscriptnamefor windowsscriptfilename
file unixscriptfile   null
if  windowsscriptfile getparent      null
unixscriptfile   new file windowsscriptfile getparent         unixscriptfilename
else
unixscriptfile   new file unixscriptfilename
bufferedwriter writer   new bufferedwriter new filewriter unixscriptfile
try
bufferedreader reader   new bufferedreader new filereader windowsscriptfile
try
int prev   reader read
int next   reader read
while  prev     1
if   prev     1      prev         next
writer write prev
prev   next
next   reader read
finally
reader close
finally
writer close
unixscriptfile setexecutable true
return unixscriptfile getabsolutepath
public static string getunixscriptnamefor string windowsscriptfilename
int pos   windowsscriptfilename indexof
string unixscriptfilename
if   pos >  0
unixscriptfilename   windowsscriptfilename substring 0  pos        windowsscriptfilename substring pos
else
unixscriptfilename   windowsscriptfilename
return unixscriptfilename
public static boolean iswindowsscript file file
try
bufferedreader reader   new bufferedreader new inputstreamreader new fileinputstream file
char buffer   new char
int readlength   reader read buffer
if  readlength >  2    buffer         buffer
for int i 2  i<readlength    i
switch buffer
case
return true
case
return false
catch  exception e
// ignore error reading file, if we can't read it then it isn't a windows script
return false