/**
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hive ql plan
import java io serializable
import java util arraylist
import java util hashmap
import java util iterator
import java util linkedhashmap
import java util list
import java util map
import java util map entry
import java util set
/**
* map join operator descriptor implementation.
*
*/
@explain displayname
public class mapjoindesc extends joindesc implements serializable
private static final long serialversionuid   1l
private map<byte  list<exprnodedesc>> keys
private tabledesc keytbldesc
private list<tabledesc> valuetbldescs
private list<tabledesc> valuefilteredtbldescs
private int posbigtable
private map<byte  list<integer>> retainlist
private transient string bigtablealias
private linkedhashmap<string  linkedhashmap<string  arraylist<string>>> aliasbucketfilenamemapping
private linkedhashmap<string  integer> bucketfilenamemapping
//map join dump file name
private string dumpfileprefix
public mapjoindesc
bucketfilenamemapping   new linkedhashmap<string  integer>
public mapjoindesc mapjoindesc clone
super clone
this keys   clone keys
this keytbldesc   clone keytbldesc
this valuetbldescs   clone valuetbldescs
this posbigtable   clone posbigtable
this retainlist   clone retainlist
this bigtablealias   clone bigtablealias
this aliasbucketfilenamemapping   clone aliasbucketfilenamemapping
this bucketfilenamemapping   clone bucketfilenamemapping
this dumpfileprefix   clone dumpfileprefix
public mapjoindesc final map<byte  list<exprnodedesc>> keys
final tabledesc keytbldesc  final map<byte  list<exprnodedesc>> values
final list<tabledesc> valuetbldescs final list<tabledesc> valuefilteredtbldescs   list<string> outputcolumnnames
final int posbigtable  final joinconddesc conds
final map<byte  list<exprnodedesc>> filters  boolean noouterjoin  string dumpfileprefix
super values  outputcolumnnames  noouterjoin  conds  filters
this keys   keys
this keytbldesc   keytbldesc
this valuetbldescs   valuetbldescs
this valuefilteredtbldescs   valuefilteredtbldescs
this posbigtable   posbigtable
this bucketfilenamemapping   new linkedhashmap<string  integer>
this dumpfileprefix   dumpfileprefix
initretainexprlist
private void initretainexprlist
retainlist   new hashmap<byte  list<integer>>
set<entry<byte  list<exprnodedesc>>> set   super getexprs   entryset
iterator<entry<byte  list<exprnodedesc>>> setiter   set iterator
while  setiter hasnext
entry<byte  list<exprnodedesc>> current   setiter next
list<integer> list   new arraylist<integer>
for  int i   0  i < current getvalue   size    i
list add i
retainlist put current getkey    list
public map<byte  list<integer>> getretainlist
return retainlist
public void setretainlist map<byte  list<integer>> retainlist
this retainlist   retainlist
/**
* @return the dumpfileprefix
*/
public string getdumpfileprefix
return dumpfileprefix
/**
* @param dumpfileprefix
*          the dumpfileprefix to set
*/
public void setdumpfileprefix string dumpfileprefix
this dumpfileprefix   dumpfileprefix
/**
* @return the keys
*/
@explain displayname
public map<byte  list<exprnodedesc>> getkeys
return keys
/**
* @param keys
*          the keys to set
*/
public void setkeys map<byte  list<exprnodedesc>> keys
this keys   keys
/**
* @return the position of the big table not in memory
*/
@explain displayname
public int getposbigtable
return posbigtable
/**
* @param posbigtable
*          the position of the big table not in memory
*/
public void setposbigtable int posbigtable
this posbigtable   posbigtable
/**
* @return the keytbldesc
*/
public tabledesc getkeytbldesc
return keytbldesc
/**
* @param keytbldesc
*          the keytbldesc to set
*/
public void setkeytbldesc tabledesc keytbldesc
this keytbldesc   keytbldesc
public list<tabledesc> getvaluefilteredtbldescs
return valuefilteredtbldescs
public void setvaluefilteredtbldescs list<tabledesc> valuefilteredtbldescs
this valuefilteredtbldescs   valuefilteredtbldescs
/**
* @return the valuetbldescs
*/
public list<tabledesc> getvaluetbldescs
return valuetbldescs
/**
* @param valuetbldescs
*          the valuetbldescs to set
*/
public void setvaluetbldescs list<tabledesc> valuetbldescs
this valuetbldescs   valuetbldescs
/**
* @return bigtablealias
*/
public string getbigtablealias
return bigtablealias
/**
* @param bigtablealias
*/
public void setbigtablealias string bigtablealias
this bigtablealias   bigtablealias
public linkedhashmap<string  linkedhashmap<string  arraylist<string>>> getaliasbucketfilenamemapping
return aliasbucketfilenamemapping
public void setaliasbucketfilenamemapping
linkedhashmap<string  linkedhashmap<string  arraylist<string>>> aliasbucketfilenamemapping
this aliasbucketfilenamemapping   aliasbucketfilenamemapping
public linkedhashmap<string  integer> getbucketfilenamemapping
return bucketfilenamemapping
public void setbucketfilenamemapping linkedhashmap<string  integer> bucketfilenamemapping
this bucketfilenamemapping   bucketfilenamemapping