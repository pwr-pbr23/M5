/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket markup html form
import java util list
import org apache wicket ajax form ajaxformcomponentupdatingbehavior
import org apache wicket markup componenttag
import org apache wicket model imodel
import org apache wicket request handler listenerinterfacerequesthandler
import org apache wicket request handler pageandcomponentprovider
/**
* a choice implemented as a dropdown menu/list.
* <p>
* java:
*
* <pre>
* list sites = arrays.aslist(new string[] { &quot;the server side&quot;, &quot;java lobby&quot;, &quot;java.net&quot; });
*
* // add a dropdown choice component that uses input's 'site' property to designate the
* // current selection, and that uses the sites list for the available options.
* // note that when the selection is null, wicket will lookup a localized string to
* // represent this null with key: &quot;id + '.null'&quot;. in this case, this is 'site.null'
* // which can be found in dropdownchoicepage.properties
* form.add(new dropdownchoice(&quot;site&quot;, sites));
* </pre>
*
* html:
*
* <pre>
*   	&lt;select wicket:id=&quot;site&quot;&gt;
*   		&lt;option&gt;site 1&lt;/option&gt;
*   		&lt;option&gt;site 2&lt;/option&gt;
*   	&lt;/select&gt;
* </pre>
*
* </p>
*
* <p>
* you can can extend this class and override method wantonselectionchangednotifications() to force
* server roundtrips on each selection change.
* </p>
*
* @author jonathan locke
* @author eelco hillenius
* @author johan compagner
*
* @param <t>
*            the model object type
*/
public class dropdownchoice<t> extends abstractsingleselectchoice<t> implements ionchangelistener
private static final long serialversionuid   1l
/**
* constructor.
*
* @param id
*            see component
*/
public dropdownchoice final string id
super id
/**
* constructor.
*
* @param id
*            see component
* @param choices
*            the collection of choices in the dropdown
*/
public dropdownchoice final string id  final list<? extends t> choices
super id  choices
/**
* constructor.
*
* @param id
*            see component
* @param renderer
*            the rendering engine
* @param choices
*            the collection of choices in the dropdown
*/
public dropdownchoice final string id  final list<? extends t> choices
final ichoicerenderer<? super t> renderer
super id  choices  renderer
/**
* constructor.
*
* @param id
*            see component
* @param model
*            see component
* @param choices
*            the collection of choices in the dropdown
*/
public dropdownchoice final string id  imodel<t> model  final list<? extends t> choices
super id  model  choices
/**
* constructor.
*
* @param id
*            see component
* @param model
*            see component
* @param choices
*            the drop down choices
* @param renderer
*            the rendering engine
*/
public dropdownchoice final string id  imodel<t> model  final list<? extends t> choices
final ichoicerenderer<? super t> renderer
super id  model  choices  renderer
/**
* constructor.
*
* @param id
*            see component
* @param choices
*            the collection of choices in the dropdown
*/
public dropdownchoice string id  imodel<? extends list<? extends t>> choices
super id  choices
/**
* constructor.
*
* @param id
*            see component
* @param model
*            see component
* @param choices
*            the drop down choices
*/
public dropdownchoice string id  imodel<t> model  imodel<? extends list<? extends t>> choices
super id  model  choices
/**
* constructor.
*
* @param id
*            see component
* @param choices
*            the drop down choices
* @param renderer
*            the rendering engine
*/
public dropdownchoice string id  imodel<? extends list<? extends t>> choices
ichoicerenderer<? super t> renderer
super id  choices  renderer
/**
* constructor.
*
* @param id
*            see component
* @param model
*            see component
* @param choices
*            the drop down choices
* @param renderer
*            the rendering engine
*/
public dropdownchoice string id  imodel<t> model  imodel<? extends list<? extends t>> choices
ichoicerenderer<? super t> renderer
super id  model  choices  renderer
/**
* called when a selection changes.
*/
public final void onselectionchanged
convertinput
updatemodel
onselectionchanged getmodelobject
/**
* processes the component tag.
*
* @param tag
*            tag to modify
* @see org.apache.wicket.component#oncomponenttag(org.apache.wicket.markup.componenttag)
*/
@override
protected void oncomponenttag final componenttag tag
checkcomponenttag tag
// should a roundtrip be made (have onselectionchanged called) when the
// selection changed?
if  wantonselectionchangednotifications
// we do not want relative url here, because it will be used by
// form#dispatchevent
charsequence url   urlfor new listenerinterfacerequesthandler
new pageandcomponentprovider getpage    this   ionchangelistener interface
form<?> form   findparent form class
if  form    null
tag put    form getjsforinterfaceurl url tostring
else
tag put        url
url tostring   indexof    >  1 ?          getinputname
super oncomponenttag tag
/**
* template method that can be overridden by clients that implement ionchangelistener to be
* notified by onchange events of a select element. this method does nothing by default.
* <p>
* called when a option is selected of a dropdown list that wants to be notified of this event.
* this method is to be implemented by clients that want to be notified of selection events.
*
* @param newselection
*            the newly selected object of the backing model note this is the same as you would
*            get by calling getmodelobject() if the new selection were current
*/
protected void onselectionchanged final t newselection
/**
* whether this component's onselectionchanged event handler should be called using javascript
* <tt>window.location</tt> if the selection changes. if true, a roundtrip will be generated
* with each selection change, resulting in the model being updated (of just this component) and
* onselectionchanged being called. this method returns false by default. if you wish to use
* ajax instead, let {@link #wantonselectionchangednotifications()} return false and add an
* {@link ajaxformcomponentupdatingbehavior} to the component using the <tt>onchange</tt> event.
*
* @return true if this component's onselectionchanged event handler should called using
*         javascript if the selection changes
*/
protected boolean wantonselectionchangednotifications
return false
/**
* {@inheritdoc}
*/
@override
protected boolean getstatelesshint
if  wantonselectionchangednotifications
return false
return super getstatelesshint