/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket markup html link
import org apache wicket iresourcelistener
import org apache wicket request cycle requestcycle
import org apache wicket request handler resource resourcereferencerequesthandler
import org apache wicket request mapper parameter pageparameters
import org apache wicket request resource iresource
import org apache wicket request resource iresource attributes
import org apache wicket request resource resourcereference
/**
* a link to any resourcereference.
*
* @author jonathan locke
* @param <t>
*            type of model object
*/
public class resourcelink<t> extends link<t> implements iresourcelistener
private static final long serialversionuid   1l
/** the resource reference */
private final resourcereference resourcereference
/** the resource */
private final iresource resource
/** the resource parameters */
private final pageparameters resourceparameters
/**
* constructs an resourcelink from an resourcereference. that resource reference will bind its
* resource to the current sharedresources.
*
* @param id
*            see component
* @param resourcereference
*            the shared resource to link to
*/
public resourcelink final string id  final resourcereference resourcereference
this id  resourcereference  null
/**
* constructs an resourcelink from an resourcereference. that resource reference will bind its
* resource to the current sharedresources.
*
* @param id
*            see component
* @param resourcereference
*            the shared resource to link to
* @param resourceparameters
*            the resource parameters
*/
public resourcelink final string id  final resourcereference resourcereference
pageparameters resourceparameters
super id
this resourcereference   resourcereference
this resourceparameters   resourceparameters
resource   null
/**
* constructs a link directly to the provided resource.
*
* @param id
*            see component
* @param resource
*            the resource
*/
public resourcelink final string id  final iresource resource
super id
this resource   resource
resourcereference   null
resourceparameters   null
/**
* @see org.apache.wicket.markup.html.link.link#onclick()
*/
@override
public void onclick
/**
* @see org.apache.wicket.iresourcelistener#onresourcerequested()
*/
public final void onresourcerequested
attributes a   new attributes requestcycle get   getrequest    requestcycle get
getresponse    null
resource respond a
onlinkclicked
/**
* @see org.apache.wicket.markup.html.link.link#geturl()
*/
@override
protected final charsequence geturl
if  resourcereference    null
// todo post 1.2: should we have support for locale changes when the
// resource reference (or resource??) is set manually..
// we should get a new resource reference for the current locale
// then
// that points to the same resource but with another locale if it
// exists.
// something like
// sharedresource.getresourcereferenceforlocale(resourcereference);
if  resourcereference canberegistered
getapplication   getresourcereferenceregistry   registerresourcereference
resourcereference
return getrequestcycle   urlfor
new resourcereferencerequesthandler resourcereference  resourceparameters
return urlfor iresourcelistener interface