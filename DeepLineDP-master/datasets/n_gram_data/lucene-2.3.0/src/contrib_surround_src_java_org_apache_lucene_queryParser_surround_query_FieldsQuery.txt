package org apache lucene queryparser surround query
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java util arraylist
import java util list
import java util iterator
import org apache lucene search query
public class fieldsquery extends srndquery      mostly untested
private srndquery q
private arraylist fieldnames
private final char fieldop
private final string oroperatorname         for expanded queries  not normally visible
public fieldsquery srndquery q  arraylist fieldnames  char fieldop
this q   q
this fieldnames   fieldnames
this fieldop   fieldop
public fieldsquery srndquery q  string fieldname  char fieldop
this q   q
fieldnames   new arraylist
fieldnames add fieldname
this fieldop   fieldop
public boolean isfieldssubqueryacceptable
return false
public query makelucenequerynoboost basicqueryfactory qf
if  fieldnames size      1       single field name  no new queries needed
return q makelucenequeryfieldnoboost  string  fieldnames get 0   qf
else      or query over the fields
arraylist queries   new arraylist
iterator fni   getfieldnames   listiterator
srndquery qc
while  fni hasnext
qc    srndquery  q clone
queries add  new fieldsquery  qc   string  fni next    fieldop
boolean infix   true
orquery oq   new orquery queries
true    infix or for field names
oroperatorname
system out println getclass   tostring         oq tostring        needs testing
return oq makelucenequeryfield null  qf
public query makelucenequeryfieldnoboost string fieldname  basicqueryfactory qf
return makelucenequerynoboost qf      use this fieldnames instead of fieldname
public list getfieldnames    return fieldnames
public char getfieldoperator     return fieldop
public string tostring
stringbuffer r   new stringbuffer
r append
fieldnamestostring r
r append q tostring
r append
return r tostring
protected void fieldnamestostring stringbuffer r
iterator fni   getfieldnames   listiterator
while  fni hasnext
r append  string  fni next
r append getfieldoperator