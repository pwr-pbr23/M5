package org apache lucene search function
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import org apache lucene index indexreader
import org apache lucene search fieldcache
import org apache lucene search function docvalues
import java io ioexception
/**
* expert: obtains int field values from the
* {@link org.apache.lucene.search.fieldcache fieldcache}
* using <code>getints()</code> and makes those values
* available as other numeric types, casting as needed.
*
* <p><font color="#ff0000">
* warning: the status of the <b>search.function</b> package is experimental.
* the apis introduced here might change in the future and will not be
* supported anymore in such a case.</font>
*
* @see org.apache.lucene.search.function.fieldcachesource for requirements
* on the field.
*
*
*/
public class intfieldsource extends fieldcachesource
private fieldcache intparser parser
/**
* create a cached int field source with default string-to-int parser.
*/
public intfieldsource string field
this field  null
/**
* create a cached int field source with a specific string-to-int parser.
*/
public intfieldsource string field  fieldcache intparser parser
super field
this parser   parser
/*(non-javadoc) @see org.apache.lucene.search.function.valuesource#description() */
public string description
return     super description
/*(non-javadoc) @see org.apache.lucene.search.function.fieldcachesource#getcachedvalues(org.apache.lucene.search.fieldcache, java.lang.string, org.apache.lucene.index.indexreader) */
public docvalues getcachedfieldvalues  fieldcache cache  string field  indexreader reader  throws ioexception
final int arr    parser  null  ?
cache getints reader  field
cache getints reader  field  parser
return new docvalues
/*(non-javadoc) @see org.apache.lucene.search.function.docvalues#floatval(int) */
public float floatval int doc
return  float  arr
/*(non-javadoc) @see org.apache.lucene.search.function.docvalues#intval(int) */
public  int intval int doc
return arr
/*(non-javadoc) @see org.apache.lucene.search.function.docvalues#tostring(int) */
public string tostring int doc
return  description         intval doc
/*(non-javadoc) @see org.apache.lucene.search.function.docvalues#getinnerarray() */
object getinnerarray
return arr
/*(non-javadoc) @see org.apache.lucene.search.function.fieldcachesource#cachedfieldsourceequals(org.apache.lucene.search.function.fieldcachesource) */
public boolean cachedfieldsourceequals fieldcachesource o
if  o getclass       intfieldsource class
return false
intfieldsource other    intfieldsource o
return this parser  null ?
other parser  null
this parser getclass      other parser getclass
/*(non-javadoc) @see org.apache.lucene.search.function.fieldcachesource#cachedfieldsourcehashcode() */
public int cachedfieldsourcehashcode
return parser  null ?
integer class hashcode     parser getclass   hashcode