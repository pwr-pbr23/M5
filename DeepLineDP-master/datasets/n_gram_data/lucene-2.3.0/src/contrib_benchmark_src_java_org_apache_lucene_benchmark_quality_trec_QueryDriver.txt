package org apache lucene benchmark quality trec
import org apache lucene benchmark quality trec trecjudge
import org apache lucene benchmark quality trec trectopicsreader
import org apache lucene benchmark quality utils simpleqqparser
import org apache lucene benchmark quality utils submissionreport
import org apache lucene benchmark quality
import org apache lucene search indexsearcher
import org apache lucene search searcher
import java io bufferedreader
import java io file
import java io filereader
import java io printwriter
/**
*
*
**/
public class querydriver
public static void main string args  throws exception
file topicsfile   new file args
file qrelsfile   new file args
searcher searcher   new indexsearcher args
int maxresults   1000
string docnamefield
printwriter logger   new printwriter system out  true
// use trec utilities to read trec topics into quality queries
trectopicsreader qreader   new trectopicsreader
qualityquery qqs   qreader readqueries new bufferedreader new filereader topicsfile
// prepare judge, with trec utilities that read from a qrels file
judge judge   new trecjudge new bufferedreader new filereader qrelsfile
// validate topics & judgments match each other
judge validatedata qqs  logger
// set the parsing of quality queries into lucene queries.
qualityqueryparser qqparser   new simpleqqparser
// run the benchmark
qualitybenchmark qrun   new qualitybenchmark qqs  qqparser  searcher  docnamefield
qrun setmaxresults maxresults
submissionreport submitlog   null
qualitystats stats   qrun execute judge  submitlog  logger
// print an avarage sum of the results
qualitystats avg   qualitystats average stats
avg log    2  logger