package org apache lucene search
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java io ioexception
import org apache lucene index
final class exactphrasescorer extends phrasescorer
exactphrasescorer weight weight  termpositions tps  int offsets  similarity similarity
byte norms
super weight  tps  offsets  similarity  norms
protected final float phrasefreq   throws ioexception
// sort list with pq
pq clear
for  phrasepositions pp   first  pp    null  pp   pp next
pp firstposition
pq put pp  				     build pq from list
pqtolist   					     rebuild list from pq
// for counting how many times the exact phrase is found in current document,
// just count how many times all phraseposition's have exactly the same position.
int freq   0
do  					     find position w  all terms
while  first position < last position   	     scan forward in first
do
if   first nextposition
return  float freq
while  first position < last position
firsttolast
freq   					     all equal  a match
while  last nextposition
return  float freq