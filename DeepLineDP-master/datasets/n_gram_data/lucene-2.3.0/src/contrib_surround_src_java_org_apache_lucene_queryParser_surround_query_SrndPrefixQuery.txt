package org apache lucene queryparser surround query
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import org apache lucene index term
import org apache lucene index termenum
import org apache lucene index indexreader
import java io ioexception
public class srndprefixquery extends simpleterm
public srndprefixquery string prefix  boolean quoted  char truncator
super quoted
this prefix   prefix
this truncator   truncator
private final string prefix
public string getprefix    return prefix
private final char truncator
public char getsuffixoperator    return truncator
public term getluceneprefixterm string fieldname
return new term fieldname  getprefix
public string tostringunquoted    return getprefix
protected void suffixtostring stringbuffer r   r append getsuffixoperator
public void visitmatchingterms
indexreader reader
string fieldname
matchingtermvisitor mtv  throws ioexception
/* inspired by prefixquery.rewrite(): */
termenum enumerator   reader terms getluceneprefixterm fieldname
boolean expanded   false
try
do
term term   enumerator term
if   term    null
term text   startswith getprefix
term field   equals fieldname
mtv visitmatchingterm term
expanded   true
else
break
while  enumerator next
finally
enumerator close
if    expanded
system out println     fieldname       tostring