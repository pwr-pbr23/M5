package org apache lucene queryparser surround query
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
/* create basic queries to be used during rewrite.
* the basic queries are termquery and spantermquery.
* an exception can be thrown when too many of these are used.
* spantermquery and termquery use indexreader.termenum(term), which causes the buffer usage.
*
* use this class to limit the buffer usage for reading terms from an index.
* default is 1024, the same as the max. number of subqueries for a booleanquery.
*/
import org apache lucene index term
import org apache lucene search termquery
import org apache lucene search spans spantermquery
public class basicqueryfactory
public basicqueryfactory int maxbasicqueries
this maxbasicqueries   maxbasicqueries
this queriesmade   0
public basicqueryfactory
this 1024
private int maxbasicqueries
private int queriesmade
public int getnrqueriesmade    return queriesmade
public int getmaxbasicqueries    return maxbasicqueries
private synchronized void checkmax   throws toomanybasicqueries
if  queriesmade >  maxbasicqueries
throw new toomanybasicqueries getmaxbasicqueries
queriesmade
public termquery newtermquery term term  throws toomanybasicqueries
checkmax
return new termquery term
public spantermquery newspantermquery term term  throws toomanybasicqueries
checkmax
return new spantermquery term