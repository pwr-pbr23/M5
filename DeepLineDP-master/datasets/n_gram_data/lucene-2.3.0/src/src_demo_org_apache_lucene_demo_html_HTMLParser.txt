/* generated by:javacc: do not edit this line. htmlparser.java */
package org apache lucene demo html
import java io
import java util properties
public class htmlparser implements htmlparserconstants
public static int summary_length   200
stringbuffer title   new stringbuffer summary_length
stringbuffer summary   new stringbuffer summary_length   2
properties metatags new properties
string currentmetatag null
string currentmetacontent null
int length   0
boolean titlecomplete   false
boolean intitle   false
boolean inmetatag   false
boolean instyle   false
boolean aftertag   false
boolean afterspace   false
string eol   system getproperty
reader pipein   null
writer pipeout
private mypipedinputstream pipeinstream   null
private pipedoutputstream pipeoutstream   null
private class mypipedinputstream extends pipedinputstream
public mypipedinputstream
super
public mypipedinputstream pipedoutputstream src  throws ioexception
super src
public boolean full   throws ioexception
return this available   >  pipedinputstream pipe_size
/**
* @deprecated use htmlparser(fileinputstream) instead
*/
public htmlparser file file  throws filenotfoundexception
this new fileinputstream file
public string gettitle   throws ioexception  interruptedexception
if  pipein    null
getreader                                      spawn parsing thread
while  true
synchronized this
if  titlecomplete    pipeinstream full
break
wait 10
return title tostring   trim
public properties getmetatags   throws ioexception
interruptedexception
if  pipein    null
getreader                                      spawn parsing thread
while  true
synchronized this
if  titlecomplete    pipeinstream full
break
wait 10
return metatags
public string getsummary   throws ioexception  interruptedexception
if  pipein    null
getreader                                      spawn parsing thread
while  true
synchronized this
if  summary length   >  summary_length    pipeinstream full
break
wait 10
if  summary length   > summary_length
summary setlength summary_length
string sum   summary tostring   trim
string tit   gettitle
if  sum startswith tit     sum equals
return tit
else
return sum
public reader getreader   throws ioexception
if  pipein    null
pipeinstream   new mypipedinputstream
pipeoutstream   new pipedoutputstream pipeinstream
pipein   new inputstreamreader pipeinstream
pipeout   new outputstreamwriter pipeoutstream
thread thread   new parserthread this
thread start                                   start parsing
return pipein
void addtosummary string text
if  summary length   < summary_length
summary append text
if  summary length   >  summary_length
synchronized this
notifyall
void addtext string text  throws ioexception
if  instyle
return
if  intitle
title append text
else
addtosummary text
if   titlecomplete     title equals           finished title
synchronized this
titlecomplete   true                       tell waiting threads
notifyall
length    text length
pipeout write text
afterspace   false
void addmetatag
metatags setproperty currentmetatag  currentmetacontent
currentmetatag   null
currentmetacontent   null
return
void addspace   throws ioexception
if   afterspace
if  intitle
title append
else
addtosummary
string space   aftertag ? eol
length    space length
pipeout write space
afterspace   true
final public void htmldocument   throws parseexception  ioexception
token t
label_1
while  true
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case scriptstart
case tagname
case declname
case comment1
case comment2
case word
case entity
case space
case punct
break
default
jj_la1   jj_gen
break label_1
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case tagname
tag
aftertag   true
break
case declname
t   decl
aftertag   true
break
case comment1
case comment2
commenttag
aftertag   true
break
case scriptstart
scripttag
aftertag   true
break
case word
t   jj_consume_token word
addtext t image   aftertag   false
break
case entity
t   jj_consume_token entity
addtext entities decode t image    aftertag   false
break
case punct
t   jj_consume_token punct
addtext t image   aftertag   false
break
case space
jj_consume_token space
addspace    aftertag   false
break
default
jj_la1   jj_gen
jj_consume_token  1
throw new parseexception
jj_consume_token 0
final public void tag   throws parseexception  ioexception
token t1  t2
boolean inimg   false
t1   jj_consume_token tagname
string tagname   t1 image tolowercase
if tags ws_elems contains tagname
addspace
intitle   tagname equalsignorecase        keep track if in <title>
inmetatag   tagname equalsignorecase        keep track if in <meta>
instyle   tagname equalsignorecase        keep track if in <style>
inimg   tagname equalsignorecase            keep track if in <img>
label_2
while  true
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argname
break
default
jj_la1   jj_gen
break label_2
t1   jj_consume_token argname
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argequals
jj_consume_token argequals
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argvalue
case argquote1
case argquote2
t2   argvalue
if  inimg    t1 image equalsignorecase       t2    null
addtext     t2 image
if inmetatag
t1 image equalsignorecase
t1 image equalsignorecase
t2    null
currentmetatag t2 image tolowercase
if currentmetatag    null    currentmetacontent    null
addmetatag
if inmetatag    t1 image equalsignorecase       t2

currentmetacontent t2 image tolowercase
if currentmetatag    null    currentmetacontent    null
addmetatag
break
default
jj_la1   jj_gen
break
default
jj_la1   jj_gen
jj_consume_token tagend
final public token argvalue   throws parseexception
token t   null
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argvalue
t   jj_consume_token argvalue
if  true  return t
break
default
jj_la1   jj_gen
if  jj_2_1 2
jj_consume_token argquote1
jj_consume_token closequote1
if  true  return t
else
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argquote1
jj_consume_token argquote1
t   jj_consume_token quote1text
jj_consume_token closequote1
if  true  return t
break
default
jj_la1   jj_gen
if  jj_2_2 2
jj_consume_token argquote2
jj_consume_token closequote2
if  true  return t
else
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argquote2
jj_consume_token argquote2
t   jj_consume_token quote2text
jj_consume_token closequote2
if  true  return t
break
default
jj_la1   jj_gen
jj_consume_token  1
throw new parseexception
throw new error
final public token decl   throws parseexception
token t
t   jj_consume_token declname
label_3
while  true
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argname
case argequals
case argvalue
case argquote1
case argquote2
break
default
jj_la1   jj_gen
break label_3
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case argname
jj_consume_token argname
break
case argvalue
case argquote1
case argquote2
argvalue
break
case argequals
jj_consume_token argequals
break
default
jj_la1   jj_gen
jj_consume_token  1
throw new parseexception
jj_consume_token tagend
if  true  return t
throw new error
final public void commenttag   throws parseexception
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case comment1
jj_consume_token comment1
label_4
while  true
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case commenttext1
break
default
jj_la1   jj_gen
break label_4
jj_consume_token commenttext1
jj_consume_token commentend1
break
case comment2
jj_consume_token comment2
label_5
while  true
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case commenttext2
break
default
jj_la1   jj_gen
break label_5
jj_consume_token commenttext2
jj_consume_token commentend2
break
default
jj_la1   jj_gen
jj_consume_token  1
throw new parseexception
final public void scripttag   throws parseexception
jj_consume_token scriptstart
label_6
while  true
switch   jj_ntk   1 ?jj_ntk   jj_ntk
case scripttext
break
default
jj_la1   jj_gen
break label_6
jj_consume_token scripttext
jj_consume_token scriptend
final private boolean jj_2_1 int xla
jj_la   xla  jj_lastpos   jj_scanpos   token
try   return  jj_3_1
catch lookaheadsuccess ls    return true
finally   jj_save 0  xla
final private boolean jj_2_2 int xla
jj_la   xla  jj_lastpos   jj_scanpos   token
try   return  jj_3_2
catch lookaheadsuccess ls    return true
finally   jj_save 1  xla
final private boolean jj_3_1
if  jj_scan_token argquote1   return true
if  jj_scan_token closequote1   return true
return false
final private boolean jj_3_2
if  jj_scan_token argquote2   return true
if  jj_scan_token closequote2   return true
return false
public htmlparsertokenmanager token_source
simplecharstream jj_input_stream
public token token  jj_nt
private int jj_ntk
private token jj_scanpos  jj_lastpos
private int jj_la
public boolean lookingahead   false
private boolean jj_semla
private int jj_gen
final private int jj_la1   new int
static private int jj_la1_0
static
jj_la1_0
private static void jj_la1_0
jj_la1_0   new int  0x2c7e 0x2c7e 0x10000 0x380000 0x20000 0x80000 0x100000 0x200000 0x3b0000 0x3b0000 0x8000000 0x20000000 0x30 0x4000
final private jjcalls jj_2_rtns   new jjcalls
private boolean jj_rescan   false
private int jj_gc   0
public htmlparser java io inputstream stream
jj_input_stream   new simplecharstream stream  1  1
token_source   new htmlparsertokenmanager jj_input_stream
token   new token
jj_ntk    1
jj_gen   0
for  int i   0  i < 14  i    jj_la1    1
for  int i   0  i < jj_2_rtns length  i    jj_2_rtns   new jjcalls
public void reinit java io inputstream stream
jj_input_stream reinit stream  1  1
token_source reinit jj_input_stream
token   new token
jj_ntk    1
jj_gen   0
for  int i   0  i < 14  i    jj_la1    1
for  int i   0  i < jj_2_rtns length  i    jj_2_rtns   new jjcalls
public htmlparser java io reader stream
jj_input_stream   new simplecharstream stream  1  1
token_source   new htmlparsertokenmanager jj_input_stream
token   new token
jj_ntk    1
jj_gen   0
for  int i   0  i < 14  i    jj_la1    1
for  int i   0  i < jj_2_rtns length  i    jj_2_rtns   new jjcalls
public void reinit java io reader stream
jj_input_stream reinit stream  1  1
token_source reinit jj_input_stream
token   new token
jj_ntk    1
jj_gen   0
for  int i   0  i < 14  i    jj_la1    1
for  int i   0  i < jj_2_rtns length  i    jj_2_rtns   new jjcalls
public htmlparser htmlparsertokenmanager tm
token_source   tm
token   new token
jj_ntk    1
jj_gen   0
for  int i   0  i < 14  i    jj_la1    1
for  int i   0  i < jj_2_rtns length  i    jj_2_rtns   new jjcalls
public void reinit htmlparsertokenmanager tm
token_source   tm
token   new token
jj_ntk    1
jj_gen   0
for  int i   0  i < 14  i    jj_la1    1
for  int i   0  i < jj_2_rtns length  i    jj_2_rtns   new jjcalls
final private token jj_consume_token int kind  throws parseexception
token oldtoken
if   oldtoken   token  next    null  token   token next
else token   token next   token_source getnexttoken
jj_ntk    1
if  token kind    kind
jj_gen
if    jj_gc > 100
jj_gc   0
for  int i   0  i < jj_2_rtns length  i
jjcalls c   jj_2_rtns
while  c    null
if  c gen < jj_gen  c first   null
c   c next
return token
token   oldtoken
jj_kind   kind
throw generateparseexception
static private final class lookaheadsuccess extends java lang error
final private lookaheadsuccess jj_ls   new lookaheadsuccess
final private boolean jj_scan_token int kind
if  jj_scanpos    jj_lastpos
jj_la
if  jj_scanpos next    null
jj_lastpos   jj_scanpos   jj_scanpos next   token_source getnexttoken
else
jj_lastpos   jj_scanpos   jj_scanpos next
else
jj_scanpos   jj_scanpos next
if  jj_rescan
int i   0  token tok   token
while  tok    null    tok    jj_scanpos    i    tok   tok next
if  tok    null  jj_add_error_token kind  i
if  jj_scanpos kind    kind  return true
if  jj_la    0    jj_scanpos    jj_lastpos  throw jj_ls
return false
final public token getnexttoken
if  token next    null  token   token next
else token   token next   token_source getnexttoken
jj_ntk    1
jj_gen
return token
final public token gettoken int index
token t   lookingahead ? jj_scanpos   token
for  int i   0  i < index  i
if  t next    null  t   t next
else t   t next   token_source getnexttoken
return t
final private int jj_ntk
if   jj_nt token next     null
return  jj_ntk    token next token_source getnexttoken    kind
else
return  jj_ntk   jj_nt kind
private java util vector jj_expentries   new java util vector
private int jj_expentry
private int jj_kind    1
private int jj_lasttokens   new int
private int jj_endpos
private void jj_add_error_token int kind  int pos
if  pos >  100  return
if  pos    jj_endpos   1
jj_lasttokens   kind
else if  jj_endpos    0
jj_expentry   new int
system arraycopy jj_lasttokens  0  jj_expentry  0  jj_endpos
boolean exists   false
for  java util enumeration e   jj_expentries elements    e hasmoreelements
int oldentry    int  e nextelement
if  oldentry length    jj_expentry length
exists   true
for  int i   0  i < jj_expentry length  i
if  oldentry    jj_expentry
exists   false
break
if  exists  break
if   exists  jj_expentries addelement jj_expentry
if  pos    0  jj_lasttokens   kind
public parseexception generateparseexception
jj_expentries removeallelements
boolean la1tokens   new boolean
for  int i   0  i < 31  i
la1tokens   false
if  jj_kind >  0
la1tokens   true
jj_kind    1
for  int i   0  i < 14  i
if  jj_la1    jj_gen
for  int j   0  j < 32  j
if   jj_la1_0    1<<j      0
la1tokens   true
for  int i   0  i < 31  i
if  la1tokens
jj_expentry   new int
jj_expentry   i
jj_expentries addelement jj_expentry
jj_endpos   0
jj_rescan_token
jj_add_error_token 0  0
int exptokseq   new int
for  int i   0  i < jj_expentries size    i
exptokseq    int jj_expentries elementat i
return new parseexception token  exptokseq  tokenimage
final public void enable_tracing
final public void disable_tracing
final private void jj_rescan_token
jj_rescan   true
for  int i   0  i < 2  i
jjcalls p   jj_2_rtns
do
if  p gen > jj_gen
jj_la   p arg  jj_lastpos   jj_scanpos   p first
switch  i
case 0  jj_3_1    break
case 1  jj_3_2    break
p   p next
while  p    null
jj_rescan   false
final private void jj_save int index  int xla
jjcalls p   jj_2_rtns
while  p gen > jj_gen
if  p next    null    p   p next   new jjcalls    break
p   p next
p gen   jj_gen   xla   jj_la  p first   token  p arg   xla
static final class jjcalls
int gen
token first
int arg
jjcalls next
//    void handleexception(exception e) {
//      system.out.println(e.tostring());  // print the error message
//      system.out.println("skipping...");
//      token t;
//      do {
//        t = getnexttoken();
//      } while (t.kind != tagend);
//    }