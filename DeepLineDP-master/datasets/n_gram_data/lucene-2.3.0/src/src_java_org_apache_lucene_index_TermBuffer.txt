package org apache lucene index
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java io ioexception
import org apache lucene store indexinput
final class termbuffer implements cloneable
private static final char no_chars   new char
private string field
private char text   no_chars
private int textlength
private term term                                cached
public final int compareto termbuffer other
if  field    other field 			     fields are interned
return comparechars text  textlength  other text  other textlength
else
return field compareto other field
private static final int comparechars char v1  int len1
char v2  int len2
int end   math min len1  len2
for  int k   0  k < end  k
char c1   v1
char c2   v2
if  c1    c2
return c1   c2
return len1   len2
private final void settextlength int newlength
if  text length < newlength
char newtext   new char
system arraycopy text  0  newtext  0  textlength
text   newtext
textlength   newlength
public final void read indexinput input  fieldinfos fieldinfos
throws ioexception
this term   null                               invalidate cache
int start   input readvint
int length   input readvint
int totallength   start   length
settextlength totallength
input readchars this text  start  length
this field   fieldinfos fieldname input readvint
public final void set term term
if  term    null
reset
return
// copy text into the buffer
settextlength term text   length
term text   getchars 0  term text   length    text  0
this field   term field
this term   term
public final void set termbuffer other
settextlength other textlength
system arraycopy other text  0  text  0  textlength
this field   other field
this term   other term
public void reset
this field   null
this textlength   0
this term   null
public term toterm
if  field    null                                unset
return null
if  term    null
term   new term field  new string text  0  textlength   false
return term
protected object clone
termbuffer clone   null
try
clone    termbuffer super clone
catch  clonenotsupportedexception e
clone text   new char
system arraycopy text  0  clone text  0  textlength
return clone