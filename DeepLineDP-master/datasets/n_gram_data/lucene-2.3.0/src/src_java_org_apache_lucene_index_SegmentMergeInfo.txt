package org apache lucene index
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java io ioexception
final class segmentmergeinfo
term term
int base
termenum termenum
indexreader reader
private termpositions postings      use getpositions
private int docmap      use getdocmap
segmentmergeinfo int b  termenum te  indexreader r
throws ioexception
base   b
reader   r
termenum   te
term   te term
// maps around deleted docs
int getdocmap
if  docmap    null
// build array which maps document numbers around deletions
if  reader hasdeletions
int maxdoc   reader maxdoc
docmap   new int
int j   0
for  int i   0  i < maxdoc  i
if  reader isdeleted i
docmap    1
else
docmap   j
return docmap
termpositions getpositions   throws ioexception
if  postings    null
postings   reader termpositions
return postings
final boolean next   throws ioexception
if  termenum next
term   termenum term
return true
else
term   null
return false
final void close   throws ioexception
termenum close
if  postings    null
postings close