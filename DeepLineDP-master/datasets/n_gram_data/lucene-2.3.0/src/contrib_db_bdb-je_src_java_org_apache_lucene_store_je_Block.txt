package org apache lucene store je
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java io ioexception
import com sleepycat je databaseentry
import com sleepycat je databaseexception
/**
* port of andi vajda's dbdirectory to java edition of berkeley database
*
* @author aaron donovan
*/
public class block extends object
protected databaseentry key  data
protected block file file  throws ioexception
byte filekey   file getkey
key   new databaseentry new byte
data   new databaseentry new byte
system arraycopy filekey  0  key getdata    0  filekey length
seek 0l
protected byte getkey
return key getdata
protected byte getdata
return data getdata
protected void seek long position  throws ioexception
byte data   key getdata
int index   data length   8
position >>>  jeindexoutput block_shift
data    byte   0xff    position >>> 56
data    byte   0xff    position >>> 48
data    byte   0xff    position >>> 40
data    byte   0xff    position >>> 32
data    byte   0xff    position >>> 24
data    byte   0xff    position >>> 16
data    byte   0xff    position >>> 8
data    byte   0xff    position >>> 0
protected void get jedirectory directory  throws ioexception
try
// todo check lockmode
directory blocks get directory txn  key  data  null
catch  databaseexception e
throw new ioexception e getmessage
protected void put jedirectory directory  throws ioexception
try
directory blocks put directory txn  key  data
catch  databaseexception e
throw new ioexception e getmessage