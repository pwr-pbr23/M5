package org apache lucene search spans
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import org apache lucene search explanation
import org apache lucene search scorer
import org apache lucene search similarity
import org apache lucene search weight
import java io ioexception
/**
* public for extension only.
*/
public class spanscorer extends scorer
protected spans spans
protected weight weight
protected byte norms
protected float value
protected boolean firsttime   true
protected boolean more   true
protected int doc
protected float freq
protected spanscorer spans spans  weight weight  similarity similarity  byte norms
throws ioexception
super similarity
this spans   spans
this norms   norms
this weight   weight
this value   weight getvalue
doc    1
public boolean next   throws ioexception
if  firsttime
more   spans next
firsttime   false
return setfreqcurrentdoc
public boolean skipto int target  throws ioexception
if  firsttime
more   spans skipto target
firsttime   false
if    more
return false
if  spans doc   < target       setfreqcurrentdoc   leaves spans doc   ahead
more   spans skipto target
return setfreqcurrentdoc
protected boolean setfreqcurrentdoc   throws ioexception
if    more
return false
doc   spans doc
freq   0 0f
while  more    doc    spans doc
int matchlength   spans end     spans start
freq    getsimilarity   sloppyfreq matchlength
more   spans next
return more     freq    0
public int doc     return doc
public float score   throws ioexception
float raw   getsimilarity   tf freq    value     raw score
return raw   similarity decodenorm norms      normalize
public explanation explain final int doc  throws ioexception
explanation tfexplanation   new explanation
skipto doc
float phrasefreq    doc      doc  ? freq   0 0f
tfexplanation setvalue getsimilarity   tf phrasefreq
tfexplanation setdescription     phrasefreq
return tfexplanation