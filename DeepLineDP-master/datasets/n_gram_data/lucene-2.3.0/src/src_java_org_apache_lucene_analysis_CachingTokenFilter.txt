package org apache lucene analysis
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java io ioexception
import java util iterator
import java util linkedlist
import java util list
/**
* this class can be used if the tokens of a tokenstream
* are intended to be consumed more than once. it caches
* all tokens locally in a list.
*
* cachingtokenfilter implements the optional method
* {@link tokenstream#reset()}, which repositions the
* stream to the first token.
*
*/
public class cachingtokenfilter extends tokenfilter
private list cache
private iterator iterator
public cachingtokenfilter tokenstream input
super input
public token next   throws ioexception
if  cache    null
// fill cache lazily
cache   new linkedlist
fillcache
iterator   cache iterator
if   iterator hasnext
// the cache is exhausted, return null
return null
return  token  iterator next
public void reset   throws ioexception
if cache    null
iterator   cache iterator
private void fillcache   throws ioexception
token token
while    token   input next       null
cache add token