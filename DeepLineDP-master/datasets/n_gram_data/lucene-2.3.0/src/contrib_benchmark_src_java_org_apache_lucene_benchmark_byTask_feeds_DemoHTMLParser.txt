package org apache lucene benchmark bytask feeds
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java io ioexception
import java io reader
import java io stringreader
import java text dateformat
import java text parseexception
import java util date
import java util properties
/**
* html parser that is based on lucene's demo html parser.
*/
public class demohtmlparser implements org apache lucene benchmark bytask feeds htmlparser
public demohtmlparser
/*
*  (non-javadoc)
* @see org.apache.lucene.benchmark.bytask.feeds.htmlparser#parse(java.lang.string, java.util.date, java.io.reader, java.text.dateformat)
*/
public docdata parse string name  date date  reader reader  dateformat dateformat  throws ioexception  interruptedexception
org apache lucene demo html htmlparser p   new org apache lucene demo html htmlparser reader
// title
string title   p gettitle
// properties
properties props   p getmetatags
// body
reader r   p getreader
char c   new char
stringbuffer bodybuf   new stringbuffer
int n
while   n   r read c   >  0
if  n>0
bodybuf append c 0 n
r close
if  date    null    props getproperty     null
try
date   dateformat parse props getproperty    trim
catch  parseexception e
// do not fail test just because a date could not be parsed
system out println   props getproperty
date   new date       now
return new docdata name  bodybuf tostring    title  props  date
/*
*  (non-javadoc)
* @see org.apache.lucene.benchmark.bytask.feeds.htmlparser#parse(java.lang.string, java.util.date, java.lang.stringbuffer, java.text.dateformat)
*/
public docdata parse string name  date date  stringbuffer inputtext  dateformat dateformat  throws ioexception  interruptedexception
return parse name  date  new stringreader inputtext tostring     dateformat