package org apache lucene benchmark bytask programmatic
/**
* copyright 2005 the apache software foundation
*
* licensed under the apache license, version 2.0 (the "license");
* you may not use this file except in compliance with the license.
* you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java io ioexception
import java util properties
import org apache lucene benchmark bytask perfrundata
import org apache lucene benchmark bytask tasks adddoctask
import org apache lucene benchmark bytask tasks closeindextask
import org apache lucene benchmark bytask tasks createindextask
import org apache lucene benchmark bytask tasks repsumbynametask
import org apache lucene benchmark bytask tasks tasksequence
import org apache lucene benchmark bytask utils config
/**
* sample performance test written programatically - no algorithm file is needed here.
*/
public class sample
/**
* @param args
* @throws exception
* @throws ioexception
*/
public static void main string args  throws exception
properties p   initprops
config conf   new config p
perfrundata rundata   new perfrundata conf
// 1. top sequence
tasksequence top   new tasksequence rundata null null false      top level  not parralel
// 2. task to create the index
createindextask create   new createindextask rundata
top addtask create
// 3. task seq to add 500 docs (order matters - top to bottom - add seq to top, only then add to seq)
tasksequence seq1   new tasksequence rundata   top false
seq1 setrepetitions 500
seq1 setnochildreport
top addtask seq1
// 4. task to add the doc
adddoctask adddoc   new adddoctask rundata
//adddoc.setparams("1200"); // doc size limit if supported
seq1 addtask adddoc      order matters 9see comment above
// 5. task to close the index
closeindextask close   new closeindextask rundata
top addtask close
// task to report
repsumbynametask rep   new repsumbynametask rundata
top addtask rep
// print algorithm
system out println top tostring
// execute
top dologic
// sample programmatic settings. could also read from file.
private static properties initprops
properties p   new properties
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
p setproperty
return p