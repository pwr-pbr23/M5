package org apache lucene benchmark bytask feeds
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import java util arraylist
import java util stringtokenizer
import org apache lucene index term
import org apache lucene search phrasequery
import org apache lucene search query
/**
* create sloppy phrase queries for performance test, in an index created using simple doc maker.
*/
public class simplesloppyphrasequerymaker extends simplequerymaker
/* (non-javadoc)
* @see org.apache.lucene.benchmark.bytask.feeds.simplequerymaker#preparequeries()
*/
protected query preparequeries   throws exception
// exatract some 100 words from doc text to an array
string words
arraylist w   new arraylist
stringtokenizer st   new stringtokenizer simpledocmaker doc_text
while  st hasmoretokens      w size  <100
w add st nexttoken
words    string  w toarray new string
// create queries (that would find stuff) with varying slops
arraylist queries   new arraylist
for  int slop 0  slop<8  slop
for  int qlen 2  qlen<6  qlen
for  int wd 0  wd<words length qlen slop  wd
// ordered
int remainedslop   slop
phrasequery q   new phrasequery
q setslop slop
int wind   wd
for  int i 0  i<qlen  i
q add new term basicdocmaker body_field words
if  remainedslop>0
remainedslop
wind
queries add q
// reveresed
remainedslop   slop
q   new phrasequery
q setslop slop 2 qlen
wind   wd qlen remainedslop 1
for  int i 0  i<qlen  i
q add new term basicdocmaker body_field words
if  remainedslop>0
remainedslop
wind
queries add q
return  query  queries toarray new query