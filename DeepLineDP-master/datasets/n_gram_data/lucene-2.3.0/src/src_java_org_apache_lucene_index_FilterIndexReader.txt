package org apache lucene index
/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
import org apache lucene document document
import org apache lucene document fieldselector
import org apache lucene store directory
import java io ioexception
import java util collection
/**  a <code>filterindexreader</code> contains another indexreader, which it
* uses as its basic source of data, possibly transforming the data along the
* way or providing additional functionality. the class
* <code>filterindexreader</code> itself simply implements all abstract methods
* of <code>indexreader</code> with versions that pass all requests to the
* contained index reader. subclasses of <code>filterindexreader</code> may
* further override some of these methods and may also provide additional
* methods and fields.
*/
public class filterindexreader extends indexreader
/** base class for filtering {@link termdocs} implementations. */
public static class filtertermdocs implements termdocs
protected termdocs in
public filtertermdocs termdocs in    this in   in
public void seek term term  throws ioexception   in seek term
public void seek termenum termenum  throws ioexception   in seek termenum
public int doc     return in doc
public int freq     return in freq
public boolean next   throws ioexception   return in next
public int read int docs  int freqs  throws ioexception
return in read docs  freqs
public boolean skipto int i  throws ioexception   return in skipto i
public void close   throws ioexception   in close
/** base class for filtering {@link termpositions} implementations. */
public static class filtertermpositions
extends filtertermdocs implements termpositions
public filtertermpositions termpositions in    super in
public int nextposition   throws ioexception
return   termpositions  this in  nextposition
public int getpayloadlength
return   termpositions  this in  getpayloadlength
public byte getpayload byte data  int offset  throws ioexception
return   termpositions  this in  getpayload data  offset
// todo: remove warning after api has been finalized
public boolean ispayloadavailable
return   termpositions this in  ispayloadavailable
/** base class for filtering {@link termenum} implementations. */
public static class filtertermenum extends termenum
protected termenum in
public filtertermenum termenum in    this in   in
public boolean next   throws ioexception   return in next
public term term     return in term
public int docfreq     return in docfreq
public void close   throws ioexception   in close
protected indexreader in
/**
* <p>construct a filterindexreader based on the specified base reader.
* directory locking for delete, undeleteall, and setnorm operations is
* left to the base reader.</p>
* <p>note that base reader is closed if this filterindexreader is closed.</p>
* @param in specified base reader.
*/
public filterindexreader indexreader in
super
this in   in
public directory directory
return in directory
public termfreqvector gettermfreqvectors int docnumber
throws ioexception
ensureopen
return in gettermfreqvectors docnumber
public termfreqvector gettermfreqvector int docnumber  string field
throws ioexception
ensureopen
return in gettermfreqvector docnumber  field
public void gettermfreqvector int docnumber  string field  termvectormapper mapper  throws ioexception
ensureopen
in gettermfreqvector docnumber  field  mapper
public void gettermfreqvector int docnumber  termvectormapper mapper  throws ioexception
ensureopen
in gettermfreqvector docnumber  mapper
public int numdocs
// don't call ensureopen() here (it could affect performance)
return in numdocs
public int maxdoc
// don't call ensureopen() here (it could affect performance)
return in maxdoc
public document document int n  fieldselector fieldselector  throws corruptindexexception  ioexception
ensureopen
return in document n  fieldselector
public boolean isdeleted int n
// don't call ensureopen() here (it could affect performance)
return in isdeleted n
public boolean hasdeletions
// don't call ensureopen() here (it could affect performance)
return in hasdeletions
protected void doundeleteall   throws corruptindexexception  ioexception  in undeleteall
public boolean hasnorms string field  throws ioexception
ensureopen
return in hasnorms field
public byte norms string f  throws ioexception
ensureopen
return in norms f
public void norms string f  byte bytes  int offset  throws ioexception
ensureopen
in norms f  bytes  offset
protected void dosetnorm int d  string f  byte b  throws corruptindexexception  ioexception
in setnorm d  f  b
public termenum terms   throws ioexception
ensureopen
return in terms
public termenum terms term t  throws ioexception
ensureopen
return in terms t
public int docfreq term t  throws ioexception
ensureopen
return in docfreq t
public termdocs termdocs   throws ioexception
ensureopen
return in termdocs
public termpositions termpositions   throws ioexception
ensureopen
return in termpositions
protected void dodelete int n  throws  corruptindexexception  ioexception   in deletedocument n
protected void docommit   throws ioexception   in commit
protected void doclose   throws ioexception   in close
public collection getfieldnames indexreader fieldoption fieldnames
ensureopen
return in getfieldnames fieldnames
public long getversion
ensureopen
return in getversion
public boolean iscurrent   throws corruptindexexception  ioexception
ensureopen
return in iscurrent
public boolean isoptimized
ensureopen
return in isoptimized