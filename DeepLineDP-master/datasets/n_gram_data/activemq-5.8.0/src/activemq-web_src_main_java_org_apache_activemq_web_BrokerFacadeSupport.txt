/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq web
import java util arraylist
import java util collection
import java util collections
import java util iterator
import java util list
import java util set
import javax management
import javax management openmbean compositedata
import javax management openmbean tabulardata
import org apache activemq broker jmx
import org springframework util stringutils
/**
* a useful base class for an implementation of {@link brokerfacade}
*
*
*/
public abstract class brokerfacadesupport implements brokerfacade
public abstract managementcontext getmanagementcontext
public abstract set querynames objectname name  queryexp query  throws exception
public abstract object newproxyinstance  objectname objectname  class interfaceclass  boolean notificationbroadcaster  throws exception
public collection<queueviewmbean> getqueues   throws exception
brokerviewmbean broker   getbrokeradmin
if  broker    null
return collections empty_list
objectname queues   broker getqueues
return getmanagedobjects queues  queueviewmbean class
public collection<topicviewmbean> gettopics   throws exception
brokerviewmbean broker   getbrokeradmin
if  broker    null
return collections empty_list
objectname queues   broker gettopics
return getmanagedobjects queues  topicviewmbean class
public collection<durablesubscriptionviewmbean> getdurabletopicsubscribers   throws exception
brokerviewmbean broker   getbrokeradmin
if  broker    null
return collections empty_list
objectname queues   broker getdurabletopicsubscribers
return getmanagedobjects queues  durablesubscriptionviewmbean class
public collection<durablesubscriptionviewmbean> getinactivedurabletopicsubscribers   throws exception
brokerviewmbean broker   getbrokeradmin
if  broker    null
return collections empty_list
objectname queues   broker getinactivedurabletopicsubscribers
return getmanagedobjects queues  durablesubscriptionviewmbean class
public queueviewmbean getqueue string name  throws exception
return  queueviewmbean  getdestinationbyname getqueues    name
public topicviewmbean gettopic string name  throws exception
return  topicviewmbean  getdestinationbyname gettopics    name
protected destinationviewmbean getdestinationbyname collection<? extends destinationviewmbean> collection
string name
iterator<? extends destinationviewmbean> iter   collection iterator
while  iter hasnext
destinationviewmbean destinationviewmbean   iter next
if  name equals destinationviewmbean getname
return destinationviewmbean
return null
@suppresswarnings
protected <t> collection<t> getmanagedobjects objectname names  class<t> type  throws exception
list<t> answer   new arraylist<t>
for  int i   0  i < names length  i
objectname name   names
t value    t  newproxyinstance name  type  true
if  value    null
answer add value
return answer
@suppresswarnings
public collection<connectionviewmbean> getconnections   throws exception
string brokername   getbrokername
objectname query   new objectname     brokername
set<objectname> queryresult   querynames query  null
return getmanagedobjects queryresult toarray new objectname   connectionviewmbean class
@suppresswarnings
public collection<string> getconnections string connectorname  throws exception
string brokername   getbrokername
objectname query   new objectname     brokername
connectorname
set<objectname> queryresult   querynames query  null
collection<string> result   new arraylist<string> queryresult size
for  objectname on   queryresult
string name   stringutils replace on getkeyproperty
result add name
return result
@suppresswarnings
public connectionviewmbean getconnection string connectionname  throws exception
connectionname   stringutils replace connectionname
string brokername   getbrokername
objectname query   new objectname     brokername
connectionname
set<objectname> queryresult   querynames query  null
if  queryresult size      0
return null
objectname objectname   queryresult iterator   next
return  connectionviewmbean  newproxyinstance objectname  connectionviewmbean class
true
@suppresswarnings
public collection<string> getconnectors   throws exception
string brokername   getbrokername
objectname query   new objectname     brokername
set<objectname> queryresult   querynames query  null
collection<string> result   new arraylist<string> queryresult size
for  objectname on   queryresult
result add on getkeyproperty
return result
public connectorviewmbean getconnector string name  throws exception
string brokername   getbrokername
objectname objectname   new objectname     brokername
name
return  connectorviewmbean  newproxyinstance objectname  connectorviewmbean class  true
@suppresswarnings
public collection<networkconnectorviewmbean> getnetworkconnectors   throws exception
string brokername   getbrokername
objectname query   new objectname     brokername
set<objectname> queryresult   querynames query  null
return getmanagedobjects queryresult toarray new objectname
networkconnectorviewmbean class
public collection<networkbridgeviewmbean> getnetworkbridges   throws exception
string brokername   getbrokername
objectname query   new objectname     brokername
set<objectname> queryresult   querynames query  null
return getmanagedobjects queryresult toarray new objectname
networkbridgeviewmbean class
@suppresswarnings
public collection<subscriptionviewmbean> getqueueconsumers string queuename  throws exception
string brokername   getbrokername
queuename   stringutils replace queuename    _"
objectname query   new objectname     brokername
queuename
set<objectname> queryresult   querynames query  null
return getmanagedobjects queryresult toarray new objectname   subscriptionviewmbean class
@suppresswarnings
public collection<subscriptionviewmbean> getconsumersonconnection string connectionname  throws exception
connectionname   stringutils replace connectionname
string brokername   getbrokername
objectname query   new objectname     brokername
connectionname
set<objectname> queryresult   querynames query  null
return getmanagedobjects queryresult toarray new objectname   subscriptionviewmbean class
public jobschedulerviewmbean getjobscheduler   throws exception
objectname name   getbrokeradmin   getjmsjobscheduler
return  jobschedulerviewmbean  newproxyinstance name  jobschedulerviewmbean class  true
public collection<jobfacade> getscheduledjobs   throws exception
jobschedulerviewmbean jobscheduler   getjobscheduler
list<jobfacade> result   new arraylist<jobfacade>
tabulardata table   jobscheduler getalljobs
for  object object   table values
compositedata cd    compositedata  object
jobfacade jf   new jobfacade cd
result add jf
return result
public boolean isjobschedulerstarted
try
jobschedulerviewmbean jobscheduler   getjobscheduler
return true
catch  exception e
return false