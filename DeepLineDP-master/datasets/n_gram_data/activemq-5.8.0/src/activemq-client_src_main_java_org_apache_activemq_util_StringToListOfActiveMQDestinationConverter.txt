/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache activemq util
import java util arraylist
import java util list
import org apache activemq command activemqdestination
/**
* special converter for string -> list<activemqdestination> to be used instead of a
* {@link java.beans.propertyeditor} which otherwise causes
* memory leaks as the jdk {@link java.beans.propertyeditormanager}
* is a static class and has strong references to classes, causing
* problems in hot-deployment environments.
*/
public class stringtolistofactivemqdestinationconverter
public static list<activemqdestination> converttoactivemqdestination object value
if  value    null
return null
// text must be enclosed with []
string text   value tostring
if  text startswith       text endswith
text   text substring 1  text length     1
string array   text split
list<activemqdestination> list   new arraylist<activemqdestination>
for  string item   array
list add activemqdestination createdestination item trim    activemqdestination queue_type
return list
else
return null
public static string convertfromactivemqdestination object value
if  value    null
return null
stringbuilder sb   new stringbuilder
if  value instanceof list
list list    list  value
for  int i   0  i < list size    i
object e   list get i
if  e instanceof activemqdestination
activemqdestination destination    activemqdestination  e
sb append destination
if  i < list size     1
sb append
sb append
if  sb length   > 2
return sb tostring
else
return null