/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component smpp
import java nio charset charset
import org apache camel exchange
import org apache camel message
import org jsmpp bean alphabet
import org jsmpp session smppsession
public abstract class smppsmcommand extends abstractsmppcommand
protected charset charset
public smppsmcommand smppsession session  smppconfiguration config
super session  config
this charset   charset forname config getencoding
protected byte getprovidedalphabet exchange exchange
message in   exchange getin
byte alphabet   smppconstants unknown_alphabet
if  in getheaders   containskey smppconstants alphabet
alphabet   in getheader smppconstants alphabet  byte class
else
alphabet   config getalphabet
return alphabet
protected charset determinecharset byte providedalphabet  byte determinedalphabet
if  providedalphabet    smppconstants unknown_alphabet    determinedalphabet    alphabet alpha_ucs2 value
return charset forname smppconstants ucs2_encoding      change charset to use multilang messages
return charset
protected alphabet determinealphabet exchange exchange
string body   exchange getin   getbody string class
byte alphabet   getprovidedalphabet exchange
alphabet alphabetobj
if  alphabet    smppconstants unknown_alphabet
byte message   body getbytes charset
if  smpputils isgsm0338encodeable message
alphabetobj   alphabet alpha_default
else
alphabetobj   alphabet alpha_ucs2
else
alphabetobj   alphabet valueof alphabet
return alphabetobj
protected smppsplitter createsplitter exchange exchange
alphabet alphabet   determinealphabet exchange
message in   exchange getin
string body   in getbody string class
smppsplitter splitter
switch  alphabet
case alpha_8_bit
splitter   new smpp8bitsplitter body length
break
case alpha_ucs2
splitter   new smppucs2splitter body length
break
case alpha_default
default
splitter   new smppdefaultsplitter body length
break
return splitter