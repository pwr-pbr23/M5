/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component smpp
import org apache camel exchange
import org apache camel message
import org jsmpp bean datasm
import org jsmpp bean esmclass
import org jsmpp bean generaldatacoding
import org jsmpp bean numberingplanindicator
import org jsmpp bean registereddelivery
import org jsmpp bean typeofnumber
import org jsmpp session datasmresult
import org jsmpp session smppsession
public class smppdatasmcommand extends abstractsmppcommand
public smppdatasmcommand smppsession session  smppconfiguration config
super session  config
@override
public void execute exchange exchange  throws smppexception
datasm datasm   createdatasm exchange
log debug    exchange getexchangeid
datasmresult result
try
result   session datashortmessage
datasm getservicetype
typeofnumber valueof datasm getsourceaddrton
numberingplanindicator valueof datasm getsourceaddrnpi
datasm getsourceaddr
typeofnumber valueof datasm getdestaddrton
numberingplanindicator valueof datasm getdestaddrnpi
datasm getdestaddress
new esmclass datasm getesmclass
new registereddelivery datasm getregistereddelivery
new generaldatacoding datasm getdatacoding
catch  exception e
throw new smppexception e
log debug
exchange getexchangeid    result getmessageid
message message   getresponsemessage exchange
message setheader smppconstants id  result getmessageid
protected datasm createdatasm exchange exchange
message in   exchange getin
datasm datasm   new datasm
if  in getheaders   containskey smppconstants dest_addr
datasm setdestaddress in getheader smppconstants dest_addr  string class
else
datasm setdestaddress config getdestaddr
if  in getheaders   containskey smppconstants dest_addr_ton
datasm setdestaddrton in getheader smppconstants dest_addr_ton  byte class
else
datasm setdestaddrton config getdestaddrton
if  in getheaders   containskey smppconstants dest_addr_npi
datasm setdestaddrnpi in getheader smppconstants dest_addr_npi  byte class
else
datasm setdestaddrnpi config getdestaddrnpi
if  in getheaders   containskey smppconstants source_addr
datasm setsourceaddr in getheader smppconstants source_addr  string class
else
datasm setsourceaddr config getsourceaddr
if  in getheaders   containskey smppconstants source_addr_ton
datasm setsourceaddrton in getheader smppconstants source_addr_ton  byte class
else
datasm setsourceaddrton config getsourceaddrton
if  in getheaders   containskey smppconstants source_addr_npi
datasm setsourceaddrnpi in getheader smppconstants source_addr_npi  byte class
else
datasm setsourceaddrnpi config getsourceaddrnpi
if  in getheaders   containskey smppconstants service_type
datasm setservicetype in getheader smppconstants service_type  string class
else
datasm setservicetype config getservicetype
if  in getheaders   containskey smppconstants registered_delivery
datasm setregistereddelivery in getheader smppconstants registered_delivery  byte class
else
datasm setregistereddelivery config getregistereddelivery
return datasm