/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component jms
import java util concurrent executor
import java util concurrent executorservice
import java util concurrent atomic atomicboolean
import javax jms connectionfactory
import javax jms destination
import javax jms exceptionlistener
import javax jms jmsexception
import javax jms message
import javax jms queue
import javax jms temporaryqueue
import javax jms temporarytopic
import javax jms topic
import org apache camel exchange
import org apache camel exchangepattern
import org apache camel logginglevel
import org apache camel multipleconsumerssupport
import org apache camel pollingconsumer
import org apache camel processor
import org apache camel producer
import org apache camel service
import org apache camel servicestatus
import org apache camel api management managedattribute
import org apache camel api management managedresource
import org apache camel impl defaultendpoint
import org apache camel impl defaultexchange
import org apache camel impl synchronousdelegateproducer
import org apache camel spi headerfilterstrategy
import org apache camel spi headerfilterstrategyaware
import org apache camel util objecthelper
import org apache camel util unsafeuricharactersencoder
import org slf4j logger
import org slf4j loggerfactory
import org springframework core task taskexecutor
import org springframework jms core jmsoperations
import org springframework jms listener abstractmessagelistenercontainer
import org springframework jms listener defaultmessagelistenercontainer
import org springframework jms listener simplemessagelistenercontainer
import org springframework jms support converter messageconverter
import org springframework jms support destination destinationresolver
import org springframework transaction platformtransactionmanager
import org springframework util errorhandler
/**
* a <a href="http://activemq.apache.org/jms.html">jms endpoint</a>
*
* @version
*/
@managedresource description
public class jmsendpoint extends defaultendpoint implements headerfilterstrategyaware  multipleconsumerssupport  service
protected final logger log   loggerfactory getlogger getclass
private headerfilterstrategy headerfilterstrategy
private boolean pubsubdomain
private jmsbinding binding
private string destinationname
private destination destination
private string selector
private jmsconfiguration configuration
private final atomicboolean running   new atomicboolean
private volatile boolean destroying
public jmsendpoint
this null  null
public jmsendpoint topic destination  throws jmsexception
this     destination gettopicname    null
this destination   destination
public jmsendpoint string uri  jmscomponent component  string destinationname  boolean pubsubdomain  jmsconfiguration configuration
super unsafeuricharactersencoder encode uri   component
this configuration   configuration
this destinationname   destinationname
this pubsubdomain   pubsubdomain
@suppresswarnings
public jmsendpoint string endpointuri  jmsbinding binding  jmsconfiguration configuration  string destinationname  boolean pubsubdomain
super unsafeuricharactersencoder encode endpointuri
this binding   binding
this configuration   configuration
this destinationname   destinationname
this pubsubdomain   pubsubdomain
public jmsendpoint string endpointuri  string destinationname  boolean pubsubdomain
this unsafeuricharactersencoder encode endpointuri   null  new jmsconfiguration    destinationname  pubsubdomain
this binding   new jmsbinding this
/**
* creates a pub-sub endpoint with the given destination
*/
public jmsendpoint string endpointuri  string destinationname
this unsafeuricharactersencoder encode endpointuri   destinationname  true
/**
* returns a new jms endpoint for the given jms destination using the configuration from the given jms component
*/
public static jmsendpoint newinstance destination destination  jmscomponent component  throws jmsexception
jmsendpoint answer   newinstance destination
jmsconfiguration newconfiguration   component getconfiguration   copy
answer setconfiguration newconfiguration
answer setcamelcontext component getcamelcontext
return answer
/**
* returns a new jms endpoint for the given jms destination
*/
public static jmsendpoint newinstance destination destination  throws jmsexception
if  destination instanceof temporaryqueue
return new jmstemporaryqueueendpoint  temporaryqueue  destination
else if  destination instanceof temporarytopic
return new jmstemporarytopicendpoint  temporarytopic  destination
else if  destination instanceof queue
return new jmsqueueendpoint  queue  destination
else
return new jmsendpoint  topic  destination
public producer createproducer   throws exception
producer answer   new jmsproducer this
if  issynchronous
return new synchronousdelegateproducer answer
else
return answer
public jmsconsumer createconsumer processor processor  throws exception
synchronized  this
while  destroying
wait
abstractmessagelistenercontainer listenercontainer   createmessagelistenercontainer
return createconsumer processor  listenercontainer
private void destroymessagelistenercontainerinternal abstractmessagelistenercontainer listenercontainer
listenercontainer destroy
destroying   false
synchronized  this
notifyall
public abstractmessagelistenercontainer createmessagelistenercontainer   throws exception
return configuration createmessagelistenercontainer this
public void configurelistenercontainer abstractmessagelistenercontainer listenercontainer  jmsconsumer consumer
if  destinationname    null
listenercontainer setdestinationname destinationname
log debug    destinationname  listenercontainer
else if  destination    null
listenercontainer setdestination destination
log debug    destinationname  listenercontainer
else
destinationresolver resolver   getdestinationresolver
if  resolver    null
listenercontainer setdestinationresolver resolver
else
throw new illegalargumentexception
log debug    resolver  listenercontainer
listenercontainer setpubsubdomain pubsubdomain
// include destination name as part of thread and transaction name
string consumername       getendpointconfigureddestinationname
if  configuration gettaskexecutor      null
if  log isdebugenabled
log debug    configuration gettaskexecutor    listenercontainer
setcontainertaskexecutor listenercontainer  configuration gettaskexecutor
else
// use a cached pool as defaultmessagelistenercontainer will throttle pool sizing
executorservice executor   getcamelcontext   getexecutorservicemanager   newcachedthreadpool consumer  consumername
setcontainertaskexecutor listenercontainer  executor
// set a default transaction name if none provided
if  configuration gettransactionname      null
if  listenercontainer instanceof defaultmessagelistenercontainer
defaultmessagelistenercontainer  listenercontainer  settransactionname consumername
private void setcontainertaskexecutor abstractmessagelistenercontainer listenercontainer  executor executor
if  listenercontainer instanceof simplemessagelistenercontainer
simplemessagelistenercontainer  listenercontainer  settaskexecutor executor
else if  listenercontainer instanceof defaultmessagelistenercontainer
defaultmessagelistenercontainer  listenercontainer  settaskexecutor executor
/**
* gets the destination name which was configured from the endpoint uri.
*
* @return the destination name resolved from the endpoint uri
*/
public string getendpointconfigureddestinationname
string remainder   objecthelper after getendpointkey
if  remainder    null    remainder contains
// remove parameters
remainder   objecthelper before remainder
return jmsmessagehelper normalizedestinationname remainder
/**
* creates a consumer using the given processor and listener container
*
* @param processor         the processor to use to process the messages
* @param listenercontainer the listener container
* @return a newly created consumer
* @throws exception if the consumer cannot be created
*/
public jmsconsumer createconsumer processor processor  abstractmessagelistenercontainer listenercontainer  throws exception
jmsconsumer consumer   new jmsconsumer this  processor  listenercontainer
configurelistenercontainer listenercontainer  consumer
return consumer
@override
public pollingconsumer createpollingconsumer   throws exception
jmsoperations template   createinonlytemplate
return new jmspollingconsumer this  template
@override
public exchange createexchange exchangepattern pattern
exchange exchange   new defaultexchange this  pattern
exchange setproperty exchange binding  getbinding
return exchange
public exchange createexchange message message
exchange exchange   createexchange getexchangepattern
exchange setin new jmsmessage message  getbinding
return exchange
/**
* factory method for creating a new template for inonly message exchanges
*/
public jmsoperations createinonlytemplate
return configuration createinonlytemplate this  pubsubdomain  destinationname
/**
* factory method for creating a new template for inout message exchanges
*/
public jmsoperations createinouttemplate
return configuration createinouttemplate this  pubsubdomain  destinationname  configuration getrequesttimeout
public boolean ismultipleconsumerssupported
// only allow multiple consumers for pub sub domain (e.g. topics)
return ispubsubdomain
// properties
// -------------------------------------------------------------------------
@override
public jmscomponent getcomponent
return  jmscomponent  super getcomponent
public headerfilterstrategy getheaderfilterstrategy
if  headerfilterstrategy    null
headerfilterstrategy   new jmsheaderfilterstrategy
return headerfilterstrategy
public void setheaderfilterstrategy headerfilterstrategy strategy
this headerfilterstrategy   strategy
public jmsbinding getbinding
if  binding    null
binding   new jmsbinding this
return binding
/**
* sets the binding used to convert from a camel message to and from a jms
* message
*
* @param binding the binding to use
*/
public void setbinding jmsbinding binding
this binding   binding
public string getdestinationname
return destinationname
public void setdestinationname string destinationname
this destinationname   destinationname
public destination getdestination
return destination
/**
* allows a specific jms destination object to be used as the destination
*/
public void setdestination destination destination
this destination   destination
public jmsconfiguration getconfiguration
return configuration
public void setconfiguration jmsconfiguration configuration
this configuration   configuration
public string getselector
return selector
/**
* sets the jms selector to use
*/
public void setselector string selector
this selector   selector
@managedattribute
public boolean issingleton
if  ispubsubdomain
// topic cannot be singleton, as there may be multiple consumers
// on the same topic
return false
// but queues can be singleton
return true
public boolean ispubsubdomain
return pubsubdomain
/**
* lazily loads the temporary queue type if one has not been explicitly configured
* via calling the {@link jmsprovidermetadata#settemporaryqueuetype(class)}
* on the {@link #getconfiguration()} instance
*/
public class<? extends temporaryqueue> gettemporaryqueuetype
jmsprovidermetadata metadata   getprovidermetadata
jmsoperations template   getmetadatajmsoperations
return metadata gettemporaryqueuetype template
/**
* lazily loads the temporary topic type if one has not been explicitly configured
* via calling the {@link jmsprovidermetadata#settemporarytopictype(class)}
* on the {@link #getconfiguration()} instance
*/
public class<? extends temporarytopic> gettemporarytopictype
jmsoperations template   getmetadatajmsoperations
jmsprovidermetadata metadata   getprovidermetadata
return metadata gettemporarytopictype template
/**
* returns the provider metadata
*/
protected jmsprovidermetadata getprovidermetadata
jmsconfiguration conf   getconfiguration
jmsprovidermetadata metadata   conf getprovidermetadata
return metadata
/**
* returns the {@link jmsoperations} used for metadata operations such as creating temporary destinations
*/
protected jmsoperations getmetadatajmsoperations
jmsoperations template   getconfiguration   getmetadatajmsoperations this
if  template    null
throw new illegalargumentexception
return template
protected executorservice getasyncstartstopexecutorservice
if  getcomponent      null
throw new illegalstateexception     this
// use shared thread pool from component
return getcomponent   getasyncstartstopexecutorservice
/**
* state whether this endpoint is running (eg started)
*/
protected boolean isrunning
return running get
@override
protected void dostart   throws exception
running set true
@override
protected void dostop   throws exception
running set false
// delegated properties from the configuration
//-------------------------------------------------------------------------
@managedattribute
public int getacknowledgementmode
return getconfiguration   getacknowledgementmode
@managedattribute
public string getacknowledgementmodename
return getconfiguration   getacknowledgementmodename
@managedattribute
public int getcachelevel
return getconfiguration   getcachelevel
@managedattribute
public string getcachelevelname
return getconfiguration   getcachelevelname
@managedattribute
public string getreplytocachelevelname
return getconfiguration   getreplytocachelevelname
@managedattribute
public string getclientid
return getconfiguration   getclientid
@managedattribute
public int getconcurrentconsumers
return getconfiguration   getconcurrentconsumers
public connectionfactory getconnectionfactory
return getconfiguration   getconnectionfactory
public destinationresolver getdestinationresolver
return getconfiguration   getdestinationresolver
@managedattribute
public string getdurablesubscriptionname
return getconfiguration   getdurablesubscriptionname
public exceptionlistener getexceptionlistener
return getconfiguration   getexceptionlistener
public errorhandler geterrorhandler
return getconfiguration   geterrorhandler
@managedattribute
public logginglevel geterrorhandlerlogginglevel
return getconfiguration   geterrorhandlerlogginglevel
@managedattribute
public boolean iserrorhandlerlogstacktrace
return getconfiguration   iserrorhandlerlogstacktrace
@managedattribute
public void seterrorhandlerlogstacktrace boolean errorhandlerlogstacktrace
getconfiguration   seterrorhandlerlogstacktrace errorhandlerlogstacktrace
@managedattribute
public int getidletaskexecutionlimit
return getconfiguration   getidletaskexecutionlimit
@managedattribute
public int getidleconsumerlimit
return getconfiguration   getidleconsumerlimit
public jmsoperations getjmsoperations
return getconfiguration   getjmsoperations
public connectionfactory getlistenerconnectionfactory
return getconfiguration   getlistenerconnectionfactory
@managedattribute
public int getmaxconcurrentconsumers
return getconfiguration   getmaxconcurrentconsumers
@managedattribute
public int getmaxmessagespertask
return getconfiguration   getmaxmessagespertask
public messageconverter getmessageconverter
return getconfiguration   getmessageconverter
public jmsoperations getmetadatajmsoperations jmsendpoint endpoint
return getconfiguration   getmetadatajmsoperations endpoint
@managedattribute
public int getpriority
return getconfiguration   getpriority
@managedattribute
public long getreceivetimeout
return getconfiguration   getreceivetimeout
@managedattribute
public long getrecoveryinterval
return getconfiguration   getrecoveryinterval
@managedattribute
public string getreplyto
return getconfiguration   getreplyto
@managedattribute
public string getreplytodestinationselectorname
return getconfiguration   getreplytodestinationselectorname
@managedattribute
public long getrequesttimeout
return getconfiguration   getrequesttimeout
@managedattribute
public long getrequesttimeoutcheckerinterval
return getconfiguration   getrequesttimeoutcheckerinterval
public taskexecutor gettaskexecutor
return getconfiguration   gettaskexecutor
public connectionfactory gettemplateconnectionfactory
return getconfiguration   gettemplateconnectionfactory
@managedattribute
public long gettimetolive
return getconfiguration   gettimetolive
public platformtransactionmanager gettransactionmanager
return getconfiguration   gettransactionmanager
@managedattribute
public string gettransactionname
return getconfiguration   gettransactionname
@managedattribute
public int gettransactiontimeout
return getconfiguration   gettransactiontimeout
@managedattribute
public boolean isacceptmessageswhilestopping
return getconfiguration   isacceptmessageswhilestopping
@managedattribute
public boolean isalwayscopymessage
return getconfiguration   isalwayscopymessage
@managedattribute
public boolean isautostartup
return getconfiguration   isautostartup
@managedattribute
public boolean isdeliverypersistent
return getconfiguration   isdeliverypersistent
@managedattribute
public boolean isdisablereplyto
return getconfiguration   isdisablereplyto
@managedattribute
public boolean iseagerloadingofproperties
return getconfiguration   iseagerloadingofproperties
@managedattribute
public boolean isexplicitqosenabled
return getconfiguration   isexplicitqosenabled
@managedattribute
public boolean isexposelistenersession
return getconfiguration   isexposelistenersession
@managedattribute
public boolean ismessageidenabled
return getconfiguration   ismessageidenabled
@managedattribute
public boolean ismessagetimestampenabled
return getconfiguration   ismessagetimestampenabled
@managedattribute
public boolean ispreservemessageqos
return getconfiguration   ispreservemessageqos
@managedattribute
public boolean ispubsubnolocal
return getconfiguration   ispubsubnolocal
@managedattribute
public boolean isreplytodeliverypersistent
return getconfiguration   isreplytodeliverypersistent
@managedattribute
@deprecated
public boolean issubscriptiondurable
return getconfiguration   issubscriptiondurable
@managedattribute
public boolean istransacted
return getconfiguration   istransacted
@managedattribute
public boolean islazycreatetransactionmanager
return getconfiguration   islazycreatetransactionmanager
@managedattribute
@deprecated
public boolean istransactedinout
return getconfiguration   istransactedinout
@managedattribute
public boolean isusemessageidascorrelationid
return getconfiguration   isusemessageidascorrelationid
@managedattribute
public void setacceptmessageswhilestopping boolean acceptmessageswhilestopping
getconfiguration   setacceptmessageswhilestopping acceptmessageswhilestopping
@managedattribute
public void setacknowledgementmode int consumeracknowledgementmode
getconfiguration   setacknowledgementmode consumeracknowledgementmode
@managedattribute
public void setacknowledgementmodename string consumeracknowledgementmode
getconfiguration   setacknowledgementmodename consumeracknowledgementmode
@managedattribute
public void setalwayscopymessage boolean alwayscopymessage
getconfiguration   setalwayscopymessage alwayscopymessage
@managedattribute
public void setautostartup boolean autostartup
getconfiguration   setautostartup autostartup
@managedattribute
public void setcachelevel int cachelevel
getconfiguration   setcachelevel cachelevel
@managedattribute
public void setcachelevelname string cachename
getconfiguration   setcachelevelname cachename
@managedattribute
public void setreplytocachelevelname string cachename
getconfiguration   setreplytocachelevelname cachename
@managedattribute
public void setclientid string consumerclientid
getconfiguration   setclientid consumerclientid
@managedattribute
public void setconcurrentconsumers int concurrentconsumers
getconfiguration   setconcurrentconsumers concurrentconsumers
public void setconnectionfactory connectionfactory connectionfactory
getconfiguration   setconnectionfactory connectionfactory
@managedattribute
public void setdeliverypersistent boolean deliverypersistent
getconfiguration   setdeliverypersistent deliverypersistent
public void setdestinationresolver destinationresolver destinationresolver
getconfiguration   setdestinationresolver destinationresolver
@managedattribute
public void setdisablereplyto boolean disablereplyto
getconfiguration   setdisablereplyto disablereplyto
@managedattribute
public void setdurablesubscriptionname string durablesubscriptionname
getconfiguration   setdurablesubscriptionname durablesubscriptionname
@managedattribute
public void seteagerloadingofproperties boolean eagerloadingofproperties
getconfiguration   seteagerloadingofproperties eagerloadingofproperties
public void setexceptionlistener exceptionlistener exceptionlistener
getconfiguration   setexceptionlistener exceptionlistener
public void seterrorhandler errorhandler errorhandler
getconfiguration   seterrorhandler errorhandler
@managedattribute
public void setexplicitqosenabled boolean explicitqosenabled
getconfiguration   setexplicitqosenabled explicitqosenabled
@managedattribute
public void setexposelistenersession boolean exposelistenersession
getconfiguration   setexposelistenersession exposelistenersession
@managedattribute
public void setidletaskexecutionlimit int idletaskexecutionlimit
getconfiguration   setidletaskexecutionlimit idletaskexecutionlimit
@managedattribute
public void setidleconsumerlimit int idleconsumerlimit
getconfiguration   setidleconsumerlimit idleconsumerlimit
public void setjmsoperations jmsoperations jmsoperations
getconfiguration   setjmsoperations jmsoperations
public void setlistenerconnectionfactory connectionfactory listenerconnectionfactory
getconfiguration   setlistenerconnectionfactory listenerconnectionfactory
@managedattribute
public void setmaxconcurrentconsumers int maxconcurrentconsumers
getconfiguration   setmaxconcurrentconsumers maxconcurrentconsumers
@managedattribute
public void setmaxmessagespertask int maxmessagespertask
getconfiguration   setmaxmessagespertask maxmessagespertask
public void setmessageconverter messageconverter messageconverter
getconfiguration   setmessageconverter messageconverter
@managedattribute
public void setmessageidenabled boolean messageidenabled
getconfiguration   setmessageidenabled messageidenabled
@managedattribute
public void setmessagetimestampenabled boolean messagetimestampenabled
getconfiguration   setmessagetimestampenabled messagetimestampenabled
public void setmetadatajmsoperations jmsoperations metadatajmsoperations
getconfiguration   setmetadatajmsoperations metadatajmsoperations
@managedattribute
public void setpreservemessageqos boolean preservemessageqos
getconfiguration   setpreservemessageqos preservemessageqos
@managedattribute
public void setpriority int priority
getconfiguration   setpriority priority
public void setprovidermetadata jmsprovidermetadata providermetadata
getconfiguration   setprovidermetadata providermetadata
@managedattribute
public void setpubsubnolocal boolean pubsubnolocal
getconfiguration   setpubsubnolocal pubsubnolocal
@managedattribute
public void setreceivetimeout long receivetimeout
getconfiguration   setreceivetimeout receivetimeout
@managedattribute
public void setrecoveryinterval long recoveryinterval
getconfiguration   setrecoveryinterval recoveryinterval
@managedattribute
public void setreplyto string replytodestination
getconfiguration   setreplyto replytodestination
@managedattribute
public void setreplytodeliverypersistent boolean replytodeliverypersistent
getconfiguration   setreplytodeliverypersistent replytodeliverypersistent
@managedattribute
public void setreplytodestinationselectorname string replytodestinationselectorname
getconfiguration   setreplytodestinationselectorname replytodestinationselectorname
@managedattribute
public void setrequesttimeout long requesttimeout
getconfiguration   setrequesttimeout requesttimeout
@managedattribute
@deprecated
public void setsubscriptiondurable boolean subscriptiondurable
getconfiguration   setsubscriptiondurable subscriptiondurable
public void settaskexecutor taskexecutor taskexecutor
getconfiguration   settaskexecutor taskexecutor
public void settemplateconnectionfactory connectionfactory templateconnectionfactory
getconfiguration   settemplateconnectionfactory templateconnectionfactory
@managedattribute
public void settimetolive long timetolive
getconfiguration   settimetolive timetolive
@managedattribute
public void settransacted boolean consumertransacted
getconfiguration   settransacted consumertransacted
@managedattribute
@deprecated
public void settransactedinout boolean transactedinout
getconfiguration   settransactedinout transactedinout
@managedattribute
public void setlazycreatetransactionmanager boolean lazycreating
getconfiguration   setlazycreatetransactionmanager lazycreating
public void settransactionmanager platformtransactionmanager transactionmanager
getconfiguration   settransactionmanager transactionmanager
@managedattribute
public void settransactionname string transactionname
getconfiguration   settransactionname transactionname
@managedattribute
public void settransactiontimeout int transactiontimeout
getconfiguration   settransactiontimeout transactiontimeout
@managedattribute
public void setusemessageidascorrelationid boolean usemessageidascorrelationid
getconfiguration   setusemessageidascorrelationid usemessageidascorrelationid
public jmsmessagetype getjmsmessagetype
return getconfiguration   getjmsmessagetype
public void setjmsmessagetype jmsmessagetype jmsmessagetype
getconfiguration   setjmsmessagetype jmsmessagetype
public jmskeyformatstrategy getjmskeyformatstrategy
return getconfiguration   getjmskeyformatstrategy
public void setjmskeyformatstrategy jmskeyformatstrategy jmsheaderstrategy
getconfiguration   setjmskeyformatstrategy jmsheaderstrategy
@managedattribute
public boolean istransferexchange
return getconfiguration   istransferexchange
@managedattribute
public void settransferexchange boolean transferexchange
getconfiguration   settransferexchange transferexchange
@managedattribute
public boolean istransferexception
return getconfiguration   istransferexception
@managedattribute
public void settransferexception boolean transferexception
getconfiguration   settransferexception transferexception
@managedattribute
public boolean istestconnectiononstartup
return configuration istestconnectiononstartup
@managedattribute
public void settestconnectiononstartup boolean testconnectiononstartup
configuration settestconnectiononstartup testconnectiononstartup
@managedattribute
public boolean isforcesendoriginalmessage
return configuration isforcesendoriginalmessage
@managedattribute
public void setforcesendoriginalmessage boolean forcesendoriginalmessage
configuration setforcesendoriginalmessage forcesendoriginalmessage
@managedattribute
public boolean isdisabletimetolive
return configuration isdisabletimetolive
@managedattribute
public void setdisabletimetolive boolean disabletimetolive
configuration setdisabletimetolive disabletimetolive
@managedattribute
public void setasyncconsumer boolean asyncconsumer
configuration setasyncconsumer asyncconsumer
@managedattribute
public boolean isasyncconsumer
return configuration isasyncconsumer
@managedattribute
public void setasyncstartlistener boolean asyncstartlistener
configuration setasyncstartlistener asyncstartlistener
@managedattribute
public boolean isasyncstartlistener
return configuration isasyncstartlistener
@managedattribute
public void setasyncstoplistener boolean asyncstoptlistener
configuration setasyncstoplistener asyncstoptlistener
@managedattribute
public boolean isasyncstoplistener
return configuration isasyncstoplistener
@managedattribute
public string getreplytotype
if  configuration getreplytotype      null
return configuration getreplytotype   name
else
return null
@managedattribute
public void setreplytotype string replytotype
replytotype type   replytotype valueof replytotype
configuration setreplytotype type
@managedattribute description
public string getcamelid
return getcamelcontext   getname
@managedattribute description
@override
public string getendpointuri
return super getendpointuri
@managedattribute description
public string getstate
servicestatus status   this getstatus
// if no status exists then its stopped
if  status    null
status   servicestatus stopped
return status name
// implementation methods
//-------------------------------------------------------------------------
@override
protected string createendpointuri
string scheme
if  destination    null
return scheme       destination
else if  destinationname    null
return scheme       destinationname
destinationresolver resolver   getdestinationresolver
if  resolver    null
return scheme       resolver
return super createendpointuri