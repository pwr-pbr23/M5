/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component irc
import java io ioexception
import java net socketexception
import java security generalsecurityexception
import javax net ssl sslcontext
import javax net ssl sslsocket
import javax net ssl sslsocketfactory
import org apache camel runtimecamelexception
import org apache camel util jsse sslcontextparameters
import org schwering irc lib ssl sslircconnection
import org schwering irc lib ssl sslnotsupportedexception
/**
* customized version of {@link sslircconnection} used to support the use of an {@link sslcontextparameters} instance
* for jsse configuration.
*/
public class camelsslircconnection extends sslircconnection
private sslcontextparameters sslcontextparameters
public camelsslircconnection string host  int portmin  int portmax  string pass
string nick  string username  string realname
sslcontextparameters sslcontextparameters
super host  portmin  portmax  pass  nick  username  realname
this sslcontextparameters   sslcontextparameters
public camelsslircconnection string host  int ports  string pass
string nick  string username  string realname
sslcontextparameters sslcontextparameters
super host  ports  pass  nick  username  realname
this sslcontextparameters   sslcontextparameters
@override
public void connect   throws ioexception
if  sslcontextparameters    null
super connect
else
if  level    0
throw new socketexception     level
ioexception exception   null
final sslcontext sslcontext
try
sslcontext   sslcontextparameters createsslcontext
catch  generalsecurityexception e
throw new runtimecamelexception    e
final sslsocketfactory sf   sslcontext getsocketfactory
sslsocket s   null
for  int i   0  i < ports length    s    null  i
try
s    sslsocket sf createsocket host  ports
s starthandshake
exception   null
catch  sslnotsupportedexception exc
if  s    null
s close
s   null
throw exc
catch  ioexception exc
if  s    null
s close
s   null
exception   exc
if  exception    null
throw exception     connection wasn't successful at any port
prepare s
public sslcontextparameters getsslcontextparameters
return sslcontextparameters
public void setsslcontextparameters sslcontextparameters sslcontextparameters
this sslcontextparameters   sslcontextparameters