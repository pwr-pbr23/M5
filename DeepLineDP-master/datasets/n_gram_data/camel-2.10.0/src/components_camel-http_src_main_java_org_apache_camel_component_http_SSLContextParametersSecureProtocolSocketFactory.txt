/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component http
import java io ioexception
import java net inetaddress
import java net socket
import java net unknownhostexception
import javax net ssl sslcontext
import javax net ssl sslsocketfactory
import org apache camel runtimecamelexception
import org apache camel util jsse sslcontextparameters
import org apache commons httpclient connecttimeoutexception
import org apache commons httpclient params httpconnectionparams
import org apache commons httpclient protocol controllerthreadsocketfactory
import org apache commons httpclient protocol secureprotocolsocketfactory
/**
* a {@code secureprotocolsocketfactory} implementation to allow configuration
* of commons http ssl/tls options based on a {@link #jsseclientparameters}
* instance or a provided {@code sslsocketfactory} instance.
*/
public class sslcontextparameterssecureprotocolsocketfactory implements secureprotocolsocketfactory
protected sslsocketfactory factory
protected sslcontext context
/**
* creates a new instance using the provided factory.
*
* @param factory the factory to use
*/
public sslcontextparameterssecureprotocolsocketfactory sslsocketfactory factory
this factory   factory
/**
* creates a new instance using a factory created by the provided client configuration
* parameters.
*
* @param params the configuration parameters to use when creating the socket factory
*/
public sslcontextparameterssecureprotocolsocketfactory sslcontextparameters params
try
this context   params createsslcontext
this factory   this context getsocketfactory
catch  exception e
throw new runtimecamelexception    e
@override
public socket createsocket string host  int port
inetaddress localaddress  int localport  throws ioexception  unknownhostexception
return this factory createsocket host  port  localaddress  localport
@override
public socket createsocket string host  int port
inetaddress localaddress  int localport  httpconnectionparams params  throws ioexception  unknownhostexception
connecttimeoutexception
if  params    null
throw new illegalargumentexception
int timeout   params getconnectiontimeout
if  timeout    0
return createsocket host  port  localaddress  localport
else
return controllerthreadsocketfactory createsocket
this  host  port  localaddress  localport  timeout
@override
public socket createsocket string host  int port  throws ioexception  unknownhostexception
return this factory createsocket host  port
@override
public socket createsocket socket socket  string host  int port  boolean autoclose  throws ioexception  unknownhostexception
return this factory createsocket socket  host  port  autoclose