/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel model
import javax xml bind annotation xmlaccesstype
import javax xml bind annotation xmlaccessortype
import javax xml bind annotation xmlattribute
import javax xml bind annotation xmlrootelement
import javax xml bind annotation xmltransient
import org apache camel endpoint
import org apache camel processor
import org apache camel processor pollenricher
import org apache camel processor aggregate aggregationstrategy
import org apache camel spi routecontext
import org apache camel util objecthelper
/**
* represents an xml &lt;pollenrich/&gt; element
*
* @see org.apache.camel.processor.enricher
*/
@xmlrootelement name
@xmlaccessortype xmlaccesstype field
public class pollenrichdefinition extends nooutputdefinition<pollenrichdefinition>
@xmlattribute name
private string resourceuri
// todo: for camel 3.0 we should remove this ref attribute as you can do that in the uri, by prefixing with ref:
@xmlattribute name
private string resourceref
@xmlattribute
private long timeout
@xmlattribute name
private string aggregationstrategyref
@xmltransient
private aggregationstrategy aggregationstrategy
public pollenrichdefinition
public pollenrichdefinition aggregationstrategy aggregationstrategy  string resourceuri  long timeout
this aggregationstrategy   aggregationstrategy
this resourceuri   resourceuri
this timeout   timeout
@override
public string tostring
return     description         aggregationstrategy
protected string description
return fromdefinition description getresourceuri    getresourceref     endpoint  null
@override
public string getshortname
return
@override
public string getlabel
return     description
@override
public processor createprocessor routecontext routecontext  throws exception
if  objecthelper isempty resourceuri     objecthelper isempty resourceref
throw new illegalargumentexception
// lookup endpoint
endpoint endpoint
if  resourceuri    null
endpoint   routecontext resolveendpoint resourceuri
else
endpoint   routecontext resolveendpoint null  resourceref
pollenricher enricher
if  timeout    null
enricher   new pollenricher null  endpoint createpollingconsumer    timeout
else
// if no timeout then we should block, and there use a negative timeout
enricher   new pollenricher null  endpoint createpollingconsumer     1
if  aggregationstrategyref    null
aggregationstrategy   routecontext lookup aggregationstrategyref  aggregationstrategy class
if  aggregationstrategy    null
enricher setdefaultaggregationstrategy
else
enricher setaggregationstrategy aggregationstrategy
return enricher
public string getresourceuri
return resourceuri
public void setresourceuri string resourceuri
this resourceuri   resourceuri
public string getresourceref
return resourceref
public void setresourceref string resourceref
this resourceref   resourceref
public long gettimeout
return timeout
public void settimeout long timeout
this timeout   timeout
public string getaggregationstrategyref
return aggregationstrategyref
public void setaggregationstrategyref string aggregationstrategyref
this aggregationstrategyref   aggregationstrategyref
public aggregationstrategy getaggregationstrategy
return aggregationstrategy
public void setaggregationstrategy aggregationstrategy aggregationstrategy
this aggregationstrategy   aggregationstrategy