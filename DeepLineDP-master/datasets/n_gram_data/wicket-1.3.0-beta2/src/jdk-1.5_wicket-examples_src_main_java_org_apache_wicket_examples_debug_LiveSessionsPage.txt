/*
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache wicket examples debug
import java text simpledateformat
import java util arrays
import org apache wicket application
import org apache wicket markup html webpage
import org apache wicket markup html basic label
import org apache wicket markup html image image
import org apache wicket markup html link link
import org apache wicket markup html list listitem
import org apache wicket markup html list pageablelistview
import org apache wicket markup html navigation paging pagingnavigator
import org apache wicket model model
import org apache wicket protocol http irequestlogger
import org apache wicket protocol http requestlogger
import org apache wicket protocol http webapplication
import org apache wicket protocol http requestlogger sessiondata
import org apache wicket util lang bytes
/**
* @author jcompagner
*/
public class livesessionspage extends webpage
private static final long serialversionuid   1l
/**
* construct.
*/
public livesessionspage
add new image
add new applicationview    application get
link link   new link
private static final long serialversionuid   1l
public void onclick
webapplication webapplication    webapplication application get
webapplication getrequestloggersettings   setrequestswindowsize 500
boolean enabled   webapplication getrequestloggersettings   isrequestloggerenabled
webapplication getrequestloggersettings   setrequestloggerenabled  enabled
link add  new label    new model
private static final long serialversionuid   1l
public object getobject
webapplication webapplication    webapplication application get
irequestlogger requestlogger   webapplication getrequestlogger
if requestlogger    null
return
else
return
add link
add new label   new model
private static final long serialversionuid   1l
public object getobject
return new integer getrequestlogger   gettotalcreatedsessions
add new label   new model
private static final long serialversionuid   1l
public object getobject
return new integer getrequestlogger   getpeaksessions
add new label   new model
private static final long serialversionuid   1l
public object getobject
return new integer getrequestlogger   getpeaksessions
model sessionmodel   new model
private static final long serialversionuid   1l
public object getobject
return arrays aslist getrequestlogger   getlivesessions
pageablelistview listview   new pageablelistview   sessionmodel 50
private static final long serialversionuid   1l
private final simpledateformat sdf   new simpledateformat
protected void populateitem listitem item
final sessiondata sd    sessiondata item getmodelobject
link link   new link
private static final long serialversionuid   1l
/**
* @see org.apache.wicket.markup.html.link.link#onclick()
*/
public void onclick
setresponsepage new requestspage sd
link add  new label   new model sd getsessionid
item add  link
item add  new label   new model sdf format sd getlastactive
item add  new label   new model new long sd getnumberofrequests
item add  new label   new model new long sd gettotaltimetaken
item add  new label   new model bytes bytes sd getsessionsize
add listview
pagingnavigator navigator   new pagingnavigator   listview
add navigator
irequestlogger getrequestlogger
webapplication webapplication    webapplication application get
final irequestlogger requestlogger
if webapplication getrequestlogger      null
// make default one.
requestlogger   new requestlogger
else
requestlogger   webapplication getrequestlogger
return requestlogger