/*
derby - class org.apache.derby.client.net.opensocketaction
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby client net
import javax net socketfactory
import javax net ssl sslsocketfactory
import javax net ssl sslserversocketfactory
import javax net ssl sslsocket
public class opensocketaction implements java security privilegedexceptionaction
private string server_
private int port_
private int clientsslmode_
public opensocketaction string server  int port  int clientsslmode
server_   server
port_   port
clientsslmode_   clientsslmode
public object run
throws java net unknownhostexception
java io ioexception
java security nosuchalgorithmexception
java security keymanagementexception
socketfactory sf
switch  clientsslmode_
case org apache derby jdbc clientbasedatasource ssl_basic
sf   naivetrustmanager getsocketfactory
break
case org apache derby jdbc clientbasedatasource ssl_peer_authentication
sf    socketfactory sslsocketfactory getdefault
break
case org apache derby jdbc clientbasedatasource ssl_off
sf   socketfactory getdefault
break
default
// assumes cleartext for undefined values
sf   socketfactory getdefault
break
return sf createsocket server_  port_