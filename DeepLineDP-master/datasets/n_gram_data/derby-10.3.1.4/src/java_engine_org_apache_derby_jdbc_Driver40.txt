/*
derby - class org.apache.derby.jdbc.driver40
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby jdbc
import java sql databasemetadata
import org apache derby iapi jdbc brokeredconnection
import org apache derby iapi jdbc brokeredconnectioncontrol
import org apache derby iapi jdbc brokeredconnection40
import org apache derby iapi sql resultset
import org apache derby iapi services sanity sanitymanager
import org apache derby iapi error standardexception
import org apache derby impl jdbc embedconnection
import org apache derby impl jdbc embedconnection30
import org apache derby impl jdbc embedpreparedstatement40
import org apache derby impl jdbc embedcallablestatement40
import org apache derby impl jdbc embedconnection40
import org apache derby impl jdbc embedresultset
import org apache derby impl jdbc embedresultset40
import org apache derby impl jdbc embeddatabasemetadata40
import org apache derby impl jdbc sqlexceptionfactory40
import org apache derby impl jdbc embedstatement40
import org apache derby impl jdbc embedresultsetmetadata40
import org apache derby iapi jdbc resourceadapter
import org apache derby impl jdbc util
import java sql connection
import java sql sqlexception
import java sql callablestatement
import java sql preparedstatement
import java util properties
import org apache derby iapi sql resultcolumndescriptor
/** -- jdbc 2.0. extension -- */
import javax sql pooledconnection
import javax sql xaconnection
public class driver40 extends driver30
public connection getnewnestedconnection embedconnection conn
if  sanitymanager debug
sanitymanager assert conn instanceof embedconnection30
return new embedconnection40 conn
public embedconnection getnewembedconnection string url  properties info
throws sqlexception
return new embedconnection40 this  url  info
/**
* returns a new embedstatement
* @param  conn                 the embedconnection class associated with
*                              this statement object
* @param  formetadata          boolean
* @param  resultsettype        int
* @param  resultsetconcurrency int
* @param  resultsetholdability int
* @return statement            a new java.sql.statement implementation
*
*/
public java sql statement newembedstatement
embedconnection conn
boolean formetadata
int resultsettype
int resultsetconcurrency
int resultsetholdability
return new embedstatement40 conn  formetadata  resultsettype  resultsetconcurrency
resultsetholdability
public preparedstatement
newembedpreparedstatement
embedconnection conn
string stmt
boolean formetadata
int resultsettype
int resultsetconcurrency
int resultsetholdability
int autogeneratedkeys
int columnindexes
string columnnames
throws sqlexception
return new embedpreparedstatement40 conn
stmt
formetadata
resultsettype
resultsetconcurrency
resultsetholdability
autogeneratedkeys
columnindexes
columnnames
public callablestatement newembedcallablestatement
embedconnection conn
string stmt
int resultsettype
int resultsetconcurrency
int resultsetholdability
throws sqlexception
return new embedcallablestatement40 conn
stmt
resultsettype
resultsetconcurrency
resultsetholdability
public brokeredconnection newbrokeredconnection brokeredconnectioncontrol control
return new brokeredconnection40 control
public embedresultset newembedresultset embedconnection conn  resultset results  boolean formetadata  org apache derby impl jdbc embedstatement statement boolean isatomic  throws sqlexception
return new embedresultset40 conn  results  formetadata  statement
isatomic
/**
* overwriting the super class boot method to set exception factory
* @see internaldriver#boot
*/
public void boot boolean create  properties properties
throws standardexception
util setexceptionfactory  new sqlexceptionfactory40
super boot  create  properties
public databasemetadata newembeddatabasemetadata embedconnection conn  string dbname
throws sqlexception
return new embeddatabasemetadata40 conn dbname
/**
* returns a new java.sql.resultsetmetadata for this implementation
*
* @param  columninfo a resultcolumndescriptor that stores information
*                    about the columns in a resultset
* @return resultsetmetadata
*/
public embedresultsetmetadata40 newembedresultsetmetadata
resultcolumndescriptor columninfo
return new embedresultsetmetadata40 columninfo
/**
* create and return an embedpooledconnection from the received instance
* of embeddeddatasource.
*/
protected pooledconnection getnewpooledconnection
embeddeddatasource eds  string user  string password
boolean requestpassword  throws sqlexception
return new embedpooledconnection40
eds  user  password  requestpassword
/**
* create and return an embedxaconnection from the received instance
* of embeddeddatasource.
*/
protected xaconnection getnewxaconnection
embeddeddatasource eds  resourceadapter ra
string user  string password  boolean requestpassword
throws sqlexception
return new embedxaconnection40
eds  ra  user  password  requestpassword