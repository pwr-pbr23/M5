/*
derby - class org.apache.derby.jdbc.clientxadatasource
licensed to the apache software foundation (asf) under one or more
contributor license agreements.  see the notice file distributed with
this work for additional information regarding copyright ownership.
the asf licenses this file to you under the apache license, version 2.0
(the "license"); you may not use this file except in compliance with
the license.  you may obtain a copy of the license at
http://www.apache.org/licenses/license-2.0
unless required by applicable law or agreed to in writing, software
distributed under the license is distributed on an "as is" basis,
without warranties or conditions of any kind, either express or implied.
see the license for the specific language governing permissions and
limitations under the license.
*/
package org apache derby jdbc
import java sql sqlexception
import javax sql datasource
import javax sql xaconnection
import javax sql xadatasource
import org apache derby client clientxaconnection
import org apache derby client net netlogwriter
import org apache derby client am logwriter
import org apache derby client am sqlexception
/**
* <p>
* this is derby's network xadatasource for use with jdbc3.0 and jdbc2.0.
* </p>
* an xadatasource is a factory for xaconnection objects.  it represents a
* rm in a dtp environment.  an object that implements the xadatasource
* interface is typically registered with a jndi service provider.
* <p>
* clientxadatasource automatically supports the correct jdbc specification version
* for the java virtual machine's environment.
* <ul>
* <li> jdbc 3.0 - java 2 - jdk 1.4, j2se 5.0
* <li> jdbc 2.0 - java 2 - jdk 1.2,1.3
* </ul>
*
* <p>clientxadatasource is serializable and referenceable.</p>
*
* <p>see clientdatasource for datasource properties.</p>
*/
public class clientxadatasource extends clientdatasource implements xadatasource
public static final string classname__
// following serialversionuid was generated by the jdk's serialver program
// verify it everytime that clientxadatasource is modified
private static final long serialversionuid   7057075094707674880l
public clientxadatasource
public xaconnection getxaconnection   throws sqlexception
return getxaconnection getuser    getpassword
public xaconnection getxaconnection string user  string password  throws sqlexception
try
netlogwriter dnclogwriter    netlogwriter  super computednclogwriterfornewconnection
return getxaconnectionx dnclogwriter  this  user  password
catch   sqlexception se
throw se getsqlexception
/**
* method that establishes the initial physical connection
* using ds properties instead of cpds properties.
*/
private xaconnection getxaconnectionx logwriter dnclogwriter
clientbasedatasource ds  string user  string password
throws sqlexception
return clientdriver getfactory   newclientxaconnection ds
dnclogwriter  user  password