/*
* copyright 2011 the apache software foundation
*
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hbase io
import java io ioexception
import java io outputstream
/**
* an output stream that writes to two streams on each operation. does not
* attempt to handle exceptions gracefully. if any operation other than
* {@link #close()} fails on the first stream, it is not called on the second
* stream.
*/
public class doubleoutputstream extends outputstream
private outputstream out1
private outputstream out2
public doubleoutputstream outputstream out1  outputstream out2
this out1   out1
this out2   out2
@override
public void write int b  throws ioexception
out1 write b
out2 write b
@override
public void write byte b  throws ioexception
out1 write b  0  b length
out2 write b  0  b length
@override
public void write byte b  int off  int len  throws ioexception
out1 write b  off  len
out2 write b  off  len
@override
public void flush   throws ioexception
out1 flush
out2 flush
@override
public void close   throws ioexception
try
out1 close
finally
// make sure we at least attempt to close both streams.
out2 close