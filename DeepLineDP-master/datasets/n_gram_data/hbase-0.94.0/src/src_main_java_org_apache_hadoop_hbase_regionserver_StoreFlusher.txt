/*
* copyright 2010 the apache software foundation
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hbase regionserver
import java io ioexception
import org apache hadoop hbase monitoring monitoredtask
/**
* a package protected interface for a store flushing.
* a store flusher carries the state required to prepare/flush/commit the
* store's cache.
*/
interface storeflusher
/**
* prepare for a store flush (create snapshot)
*
* requires pausing writes.
*
* a very short operation.
*/
void prepare
/**
* flush the cache (create the new store file)
*
* a length operation which doesn't require locking out any function
* of the store.
*
* @throws ioexception in case the flush fails
*/
void flushcache monitoredtask status  throws ioexception
/**
* commit the flush - add the store file to the store and clear the
* memstore snapshot.
*
* requires pausing scans.
*
* a very short operation
*
* @return
* @throws ioexception
*/
boolean commit monitoredtask status  throws ioexception