/**
* copyright 2010 the apache software foundation
*
* licensed to the apache software foundation (asf) under one
* or more contributor license agreements.  see the notice file
* distributed with this work for additional information
* regarding copyright ownership.  the asf licenses this file
* to you under the apache license, version 2.0 (the
* "license"); you may not use this file except in compliance
* with the license.  you may obtain a copy of the license at
*
*     http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache hadoop hbase
import java io datainput
import java io dataoutput
import java io ioexception
import java net inetsocketaddress
import org apache hadoop hbase regionserver hregionserver
import org apache hadoop io versionedwritable
import org apache hadoop io writablecomparable
/**
* hserverinfo is meta info about an {@link hregionserver}.  it hosts the
* {@link hserveraddress}, its webui port, and its server startcode.  it was
* used to pass meta info about a server across an rpc but we've since made
* it so regionserver info is up in zookeeper and so this class is on its
* way out. it used to carry {@link hserverload} but as off hbase 0.92.0, the
* hserverload is passed independent of this class. also, we now no longer pass
* the webui from regionserver to master (todo: fix).
* @deprecated use {@link inetsocketaddress} and or {@link servername} and or
* {@link hserverload}
*/
public class hserverinfo extends versionedwritable
implements writablecomparable<hserverinfo>
private static final byte version   1
private hserveraddress serveraddress   new hserveraddress
private long startcode
private int webuiport
public hserverinfo
super
/**
* constructor that creates a hserverinfo with a generated startcode
* @param serveraddress
* @param webuiport port the webui runs on.
*/
public hserverinfo final hserveraddress serveraddress  final int webuiport
this serveraddress  system currenttimemillis    webuiport
public hserverinfo hserveraddress serveraddress  long startcode
final int webuiport
this serveraddress   serveraddress
this startcode   startcode
this webuiport   webuiport
/**
* copy-constructor
* @param other
*/
public hserverinfo hserverinfo other
this serveraddress   new hserveraddress other getserveraddress
this startcode   other getstartcode
this webuiport   other getinfoport
/** @return the object version number */
public byte getversion
return version
public synchronized hserveraddress getserveraddress
return new hserveraddress serveraddress
public synchronized long getstartcode
return startcode
public int getinfoport
return getwebuiport
public int getwebuiport
return this webuiport
public string gethostname
return this serveraddress gethostname
/**
* @return servername and load concatenated.
*/
@override
public synchronized string tostring
return servername getservername this serveraddress gethostnameandport
this startcode
@override
public boolean equals object obj
if  this    obj  return true
if  obj    null  return false
if  getclass      obj getclass    return false
return compareto  hserverinfo obj     0
@override
public int hashcode
int code   this serveraddress hashcode
code ^  this webuiport
code ^  this startcode
return code
public void readfields datainput in  throws ioexception
super readfields in
this serveraddress readfields in
this startcode   in readlong
this webuiport   in readint
public void write dataoutput out  throws ioexception
super write out
this serveraddress write out
out writelong this startcode
out writeint this webuiport
public int compareto hserverinfo o
int compare   this serveraddress compareto o getserveraddress
if  compare    0  return compare
if  this webuiport    o getinfoport    return this webuiport   o getinfoport
if  this startcode    o getstartcode    return  int  this startcode   o getstartcode
return 0