package org jruby ext ffi
import org jruby ruby
import org jruby rubyclass
import org jruby rubyfixnum
import org jruby rubymodule
import org jruby rubystring
import org jruby anno jrubyclass
import org jruby anno jrubymethod
import org jruby runtime objectallocator
import org jruby runtime threadcontext
import org jruby runtime builtin irubyobject
/**
* c memory pointer operations.
* <p>
* this is an abstract class that defines pointer operations
* </p>
*/
@jrubyclass name    parent abstractmemory abstract_memory_ruby_class
public class pointer extends abstractmemory
public static rubyclass createpointerclass ruby runtime  rubymodule module
rubyclass result   module defineclassunder
module getclass abstractmemory abstract_memory_ruby_class
pointerallocator instance
result defineannotatedmethods pointer class
result defineannotatedconstants pointer class
module defineclassunder    runtime getruntimeerror
runtime getruntimeerror   getallocator
// add pointer::null as a constant
result fastsetconstant    new pointer runtime  result  new nullmemoryio runtime
return result
private static final class pointerallocator implements objectallocator
static final objectallocator instance   new pointerallocator
public irubyobject allocate ruby runtime  rubyclass klazz
return new pointer runtime  klazz
private pointer ruby runtime  rubyclass klazz
super runtime  klazz  new nullmemoryio runtime   0
public pointer ruby runtime  directmemoryio io
this runtime  getpointerclass runtime   io
public pointer ruby runtime  directmemoryio io  long size  int typesize
this runtime  getpointerclass runtime   io  size  typesize
protected pointer ruby runtime  rubyclass klass  directmemoryio io
super runtime  klass  io  long max_value
protected pointer ruby runtime  rubyclass klass  directmemoryio io  long size
super runtime  klass  io  size
protected pointer ruby runtime  rubyclass klass  directmemoryio io  long size  int typesize
super runtime  klass  io  size  typesize
public static final rubyclass getpointerclass ruby runtime
return runtime fastgetmodule    fastgetclass
@jrubymethod name
public irubyobject initialize threadcontext context  irubyobject address
io   factory getinstance   wrapdirectmemory context getruntime    rubyfixnum num2long address
size   long max_value
typesize   1
return this
@jrubymethod name
public irubyobject initialize threadcontext context  irubyobject type  irubyobject address
io   factory getinstance   wrapdirectmemory context getruntime    rubyfixnum num2long address
size   long max_value
typesize   calculatesize context  type
return this
/**
* tests if this <tt>pointer</tt> represents the c <tt>null</tt> value.
*
* @return true if the address is null.
*/
@jrubymethod name
public irubyobject null_p threadcontext context
return context getruntime   newboolean getmemoryio   isnull
@override
@jrubymethod name      optional   1
public irubyobject to_s threadcontext context  irubyobject args
return rubystring newstring context getruntime
string format    getaddress
@jrubymethod name
public irubyobject inspect threadcontext context
string hex   long tohexstring getaddress
return rubystring newstring context getruntime
string format    hex
@jrubymethod name
public irubyobject address threadcontext context
return context getruntime   newfixnum getaddress
/**
* gets the native memory address of this pointer.
*
* @return a long containing the native memory address.
*/
public final long getaddress
return   directmemoryio  getmemoryio    getaddress
@override
protected abstractmemory slice ruby runtime  long offset
return new pointer runtime  getpointerclass runtime
directmemoryio  getmemoryio   slice offset
size    long max_value ? long max_value   size   offset  typesize
protected pointer getpointer ruby runtime  long offset
return new pointer runtime  getpointerclass runtime   getmemoryio   getmemoryio offset   long max_value