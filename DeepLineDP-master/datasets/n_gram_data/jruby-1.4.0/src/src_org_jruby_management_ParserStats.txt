package org jruby management
import java lang ref softreference
import java util concurrent atomic atomicinteger
import org jruby ruby
public class parserstats implements parserstatsmbean
private final softreference<ruby> ruby
private atomicinteger totalparsetime   new atomicinteger 0
private atomicinteger totalparsedbytes   new atomicinteger 0
private atomicinteger totalevalparses   new atomicinteger 0
private atomicinteger totalloadparses   new atomicinteger 0
private atomicinteger totaljrubymoduleparses   new atomicinteger 0
public parserstats ruby ruby
this ruby   new softreference<ruby> ruby
public void addparsetime int time
totalparsetime addandget time
public void addparsedbytes int bytes
totalparsedbytes addandget bytes
public void addevalparse
totalevalparses incrementandget
public void addloadparse
totalloadparses incrementandget
public void addjrubymoduleparse
totaljrubymoduleparses incrementandget
public double gettotalparsetime
ruby runtime   ruby get
if  runtime    null  return 0
return runtime getparser   gettotaltime     1000000000 0
public int gettotalparsedbytes
ruby runtime   ruby get
if  runtime    null  return 0
return runtime getparser   gettotalbytes
public double getparsetimeperkb
int totalbytes   gettotalparsedbytes
if  totalbytes    0  return 0
return gettotalparsetime      totalbytes   1000 0
public int getnumberofevalparses
return totalevalparses get
public int getnumberofloadparses
return totalloadparses get