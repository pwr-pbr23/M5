package org jruby demo
import java applet applet
import java awt borderlayout
import java awt color
import java awt font
import java awt graphicsenvironment
import java awt insets
import java io pipedinputstream
import java io printstream
import java util arraylist
import java util arrays
import javax swing borderfactory
import javax swing jeditorpane
import javax swing jscrollpane
import javax swing jtextpane
import org jruby ruby
import org jruby rubyinstanceconfig
public class irbapplet extends applet
public void start
super start
final pipedinputstream pipein   new pipedinputstream
setlayout new borderlayout
jeditorpane text   new jtextpane
text setmargin new insets 8 8 8 8
text setcaretcolor new color 0xa4  0x00  0x00
text setbackground new color 0xf2  0xf2  0xf2
text setforeground new color 0xa4  0x00  0x00
font font   findfont    font plain  14
new string
text setfont font
jscrollpane pane   new jscrollpane
pane setdoublebuffered true
pane setviewportview text
pane setborder borderfactory createlineborder color darkgray
add pane
this validate
final textareareadline tar   new textareareadline text
final rubyinstanceconfig config   new rubyinstanceconfig
setinput pipein
setoutput new printstream tar
seterror new printstream tar
setobjectspaceenabled true      useful for code completion inside the irb
setargv new string
ruby setsecurityrestricted true      we are in a very limited context  tighten that belt
final ruby runtime   ruby newinstance config
runtime getloadservice   init new arraylist 0
tar hookintoruntime runtime
thread t2   new thread
public void run
runtime evalscriptlet
t2 start
private font findfont string otherwise  int style  int size  string families
string fonts   graphicsenvironment getlocalgraphicsenvironment   getavailablefontfamilynames
arrays sort fonts
font font   null
for  int i   0  i < families length  i
if  arrays binarysearch fonts  families  >  0
font   new font families  style  size
break
if  font    null
font   new font otherwise  style  size
return font
/**
*
*/
private static final long serialversionuid   3746242973444417387l