package org jruby demo
import java awt borderlayout
import java awt color
import java awt font
import java awt graphicsenvironment
import java awt insets
import java awt event windowadapter
import java awt event windowevent
import java io pipedinputstream
import java io printstream
import java util arraylist
import java util arrays
import javax swing borderfactory
import javax swing jeditorpane
import javax swing jframe
import javax swing jscrollpane
import javax swing jtextpane
import org jruby ruby
import org jruby rubyinstanceconfig
import org jruby internal runtime valueaccessor
public class irbconsole extends jframe
public irbconsole string title
super title
public static void main final string args
final irbconsole console   new irbconsole
final pipedinputstream pipein   new pipedinputstream
console getcontentpane   setlayout new borderlayout
console setsize 700  600
jeditorpane text   new jtextpane
text setmargin new insets 8 8 8 8
text setcaretcolor new color 0xa4  0x00  0x00
text setbackground new color 0xf2  0xf2  0xf2
text setforeground new color 0xa4  0x00  0x00
font font   console findfont    font plain  14
new string
text setfont font
jscrollpane pane   new jscrollpane
pane setviewportview text
pane setborder borderfactory createlineborder color darkgray
console getcontentpane   add pane
console validate
final textareareadline tar   new textareareadline text
console addwindowlistener new windowadapter
public void windowclosing windowevent e
tar notifyfinished
final rubyinstanceconfig config   new rubyinstanceconfig
setinput pipein
setoutput new printstream tar
seterror new printstream tar
setobjectspaceenabled true      useful for code completion inside the irb
setargv args
final ruby runtime   ruby newinstance config
runtime getglobalvariables   definereadonly    new valueaccessor runtime newfixnum system identityhashcode runtime
runtime getloadservice   init new arraylist
tar hookintoruntime runtime
thread t2   new thread
public void run
console setvisible true
runtime evalscriptlet
t2 start
try
t2 join
catch  interruptedexception ie
// ignore
system exit 0
private font findfont string otherwise  int style  int size  string families
string fonts   graphicsenvironment getlocalgraphicsenvironment   getavailablefontfamilynames
arrays sort fonts
font font   null
for  int i   0  i < families length  i
if  arrays binarysearch fonts  families  >  0
font   new font families  style  size
break
if  font    null
font   new font otherwise  style  size
return font
/**
*
*/
private static final long serialversionuid   3746242973444417387l