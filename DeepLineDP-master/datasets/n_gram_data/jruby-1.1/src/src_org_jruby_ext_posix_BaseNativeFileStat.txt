package org jruby ext posix
import com sun jna structure
public abstract class basenativefilestat extends structure implements filestat
protected posix posix
public basenativefilestat posix posix
super
this posix   posix
public string ftype
if  isfile
return
else if  isdirectory
return
else if  ischardev
return
else if  isblockdev
return
else if  isfifo
return
else if  issymlink
return
else if  issocket
return
return
public boolean groupmember int gid
if  posix getgid      gid    posix getegid      gid
return true
// fixme: though not posix, windows has different mechanism for this.
return false
public boolean isblockdev
return  mode     s_ifmt     s_ifblk
public boolean ischardev
return  mode     s_ifmt     s_ifchr
public boolean isdirectory
return  mode     s_ifmt     s_ifdir
public boolean isempty
return st_size      0
public boolean isexecutable
if  posix geteuid      0  return  mode     s_ixugo     0
if  isowned    return  mode     s_ixusr     0
if  isgroupowned    return  mode     s_ixgrp     0
return  mode     s_ixoth     0
public boolean isexecutablereal
if  posix getuid      0  return  mode     s_ixugo     0
if  isrowned    return  mode     s_ixusr     0
if  groupmember gid     return  mode     s_ixgrp     0
return  mode     s_ixoth     0
public boolean isfile
return  mode     s_ifmt     s_ifreg
public boolean isfifo
return  mode     s_ifmt     s_ififo
public boolean isgroupowned
return groupmember gid
public boolean isidentical filestat other
return dev      other dev      ino      other ino
public boolean isnamedpipe
return  mode     s_ififo     0
public boolean isowned
return posix geteuid      uid
public boolean isrowned
return posix getuid      uid
public boolean isreadable
if  posix geteuid      0  return true
if  isowned    return  mode     s_irusr     0
if  isgroupowned    return  mode     s_irgrp     0
return  mode     s_iroth     0
public boolean isreadablereal
if  posix getuid      0  return true
if  isrowned    return  mode     s_irusr     0
if  groupmember gid     return  mode     s_irgrp     0
return  mode     s_iroth     0
public boolean issetgid
return  mode     s_isgid     0
public boolean issetuid
return  mode     s_isuid     0
public boolean issocket
return  mode     s_ifmt     s_ifsock
public boolean issticky
return  mode     s_isvtx     0
public boolean issymlink
return  mode     s_ifmt     s_iflnk
public boolean iswritable
if  posix geteuid      0  return true
if  isowned    return  mode     s_iwusr     0
if  isgroupowned    return  mode     s_iwgrp     0
return  mode     s_iwoth     0
public boolean iswritablereal
if  posix getuid      0  return true
if  isrowned    return  mode     s_iwusr     0
if  groupmember gid     return  mode     s_iwgrp     0
return  mode     s_iwoth     0
public int major long dev
return  int   dev >> 24    0xff
public int minor long dev
return  int   dev   0xffffff