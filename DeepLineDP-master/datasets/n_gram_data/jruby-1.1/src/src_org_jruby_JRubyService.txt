/***** begin license block *****
* version: cpl 1.0/gpl 2.0/lgpl 2.1
*
* the contents of this file are subject to the common public
* license version 1.0 (the "license"); you may not use this file
* except in compliance with the license. you may obtain a copy of
* the license at http://www.eclipse.org/legal/cpl-v10.html
*
* software distributed under the license is distributed on an "as
* is" basis, without warranty of any kind, either express or
* implied. see the license for the specific language governing
* rights and limitations under the license.
*
* copyright (c) 2007 ola bini <ola@ologix.com>
*
* alternatively, the contents of this file may be used under the terms of
* either of the gnu general public license version 2 or later (the "gpl"),
* or the gnu lesser general public license version 2.1 or later (the "lgpl"),
* in which case the provisions of the gpl or the lgpl are applicable instead
* of those above. if you wish to allow use of your version of this file only
* under the terms of either the gpl or the lgpl, and not to allow others to
* use your version of this file under the terms of the cpl, indicate your
* decision by deleting the provisions above and replace them with the notice
* and other provisions required by the gpl or the lgpl. if you do not delete
* the provisions above, a recipient may use your version of this file under
* the terms of any one of the cpl, the gpl or the lgpl.
***** end license block *****/
package org jruby
/**
* @author <a href="mailto:ola.bini@ki.se">ola bini</a>
*/
public abstract class jrubyservice
protected static class configuration
private final static int default_port   19222
private string key
private int port   default_port
private boolean terminate
private boolean nomore
private boolean debug
private string command
public configuration string args
int i 0
int stop
loop  for int j args length   i<j i
if args charat i          i 1 < j
switch args charat   i
case
stop   args indexof       i    1
if stop     1
stop   args length
key   args substring i  stop  trim
i   stop
break
case
stop   args indexof       i    1
if stop     1
stop   args length
port   integer parseint args substring i  stop  trim
i   stop
break
case
terminate   true
i
break
case
nomore   true
i
break
case
debug   true
i
break
case       handle everything after    as arguments to the jruby process
i
break loop
default
i
break loop
else if args charat i
break loop
if i<args length
command   args substring i  trim
public string getkey
return key
public int getport
return port
public boolean terminate
return terminate
public boolean nomore
return nomore
public boolean isdebug
return debug
public string getcommand
return command
public static final string cmd_start
public static final string cmd_no_more
public static final string cmd_term
jrubyservice