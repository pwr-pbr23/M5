/***** begin license block *****
* version: cpl 1.0/gpl 2.0/lgpl 2.1
*
* the contents of this file are subject to the common public
* license version 1.0 (the "license"); you may not use this file
* except in compliance with the license. you may obtain a copy of
* the license at http://www.eclipse.org/legal/cpl-v10.html
*
* software distributed under the license is distributed on an "as
* is" basis, without warranty of any kind, either express or
* implied. see the license for the specific language governing
* rights and limitations under the license.
*
* copyright (c) 2007 peter brant <peter.brant@gmail.com>
*
* alternatively, the contents of this file may be used under the terms of
* either of the gnu general public license version 2 or later (the "gpl"),
* or the gnu lesser general public license version 2.1 or later (the "lgpl"),
* in which case the provisions of the gpl or the lgpl are applicable instead
* of those above. if you wish to allow use of your version of this file only
* under the terms of either the gpl or the lgpl, and not to allow others to
* use your version of this file under the terms of the cpl, indicate your
* decision by deleting the provisions above and replace them with the notice
* and other provisions required by the gpl or the lgpl. if you do not delete
* the provisions above, a recipient may use your version of this file under
* the terms of any one of the cpl, the gpl or the lgpl.
***** end license block *****/
package org jruby internal runtime methods
import java lang reflect invocationtargetexception
import java lang reflect method
import org jruby ruby
import org jruby rubymodule
import org jruby exceptions jumpexception
import org jruby exceptions raiseexception
import org jruby lexer yacc isourceposition
import org jruby parser staticscope
import org jruby runtime arity
import org jruby runtime block
import org jruby runtime eventhook
import org jruby runtime frame
import org jruby runtime threadcontext
import org jruby runtime visibility
import org jruby runtime builtin irubyobject
public class reflectedcompiledmethod extends compiledmethod
private final method method
public reflectedcompiledmethod rubymodule implementationclass  arity arity
visibility visibility  staticscope staticscope  object scriptobject  method method  callconfiguration callconfig
super implementationclass  arity  visibility  staticscope  scriptobject  callconfig
this method   method
@override
public irubyobject call threadcontext context  irubyobject self  rubymodule klazz  string name
irubyobject args  boolean nosuper  block block
// xxx generated version omits this entirely.  delete from compiledmethod?
throw new unsupportedoperationexception
@override
public irubyobject call threadcontext context  irubyobject self  rubymodule clazz  string name
irubyobject args  block block
callconfig pre context  self  getimplementationclass    arity  name  args  block  staticscope  this
ruby runtime   context getruntime
try
boolean istrace   runtime haseventhooks
try
if  istrace
// xxx wrong, but will have to do for now
runtime calleventhooks context  eventhook ruby_event_call  context getfile    context getline    name  getimplementationclass
return  irubyobject method invoke $scriptobject  context  self  args  block
finally
if  istrace
frame frame   context getpreviousframe
runtime calleventhooks context  eventhook ruby_event_return  frame getfile    frame getline    name  getimplementationclass
catch  illegalargumentexception e
throw raiseexception createnativeraiseexception runtime  e
catch  illegalaccessexception e
throw raiseexception createnativeraiseexception runtime  e
catch  invocationtargetexception e
throwable cause   e getcause
if  cause instanceof jumpexception returnjump
jumpexception flowcontrolexception f    jumpexception flowcontrolexception cause
if  f gettarget      this
return  irubyobject f getvalue
else
throw f
else if  cause instanceof jumpexception redojump
throw runtime newlocaljumperror    runtime getnil
else if  cause instanceof runtimeexception
throw  runtimeexception cause
else if  cause instanceof error
throw  error cause
else
throw raiseexception createnativeraiseexception runtime  cause
finally
callconfig post context