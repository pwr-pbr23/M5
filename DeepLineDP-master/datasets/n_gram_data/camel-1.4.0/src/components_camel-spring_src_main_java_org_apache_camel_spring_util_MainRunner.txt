/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel spring util
import java lang reflect invocationtargetexception
import java lang reflect method
import java lang reflect modifier
import java util arrays
import org apache commons logging log
import org apache commons logging logfactory
import org springframework beans factory initializingbean
import static org apache camel util objecthelper name
/**
* a simple helper bean for running main classes from within the spring.xml
* usually asynchronous in a background thread; which is useful for demos such
* as running swing programs in the same jvm.
*
* @version $revision$
*/
public class mainrunner implements initializingbean  runnable
private static final log log   logfactory getlog mainrunner class
private class main
private string args
private boolean asyncrun   true
private long delay
public string tostring
return     name main        arrays aslist getargs
public void run
try
runmethodwithoutcatchingexceptions
catch  nosuchmethodexception e
log error     name main        e  e
catch  illegalaccessexception e
log error     this       e  e
catch  invocationtargetexception e
throwable throwable   e gettargetexception
log error     this       throwable  throwable
public void runmethodwithoutcatchingexceptions   throws nosuchmethodexception  illegalaccessexception  invocationtargetexception
if  delay > 0
try
thread sleep delay
catch  interruptedexception e
log info     e  e
method method   main getmethod    string class
if   modifier isstatic method getmodifiers
throw new illegalargumentexception     method
object arguments    getargs
method invoke null  arguments
public string getargs
return args
public void setargs string args
this args   args
public boolean isasyncrun
return asyncrun
public void setasyncrun boolean asyncrun
this asyncrun   asyncrun
public class getmain
return main
public void setmain class main
this main   main
public long getdelay
return delay
public void setdelay long delay
this delay   delay
public void afterpropertiesset   throws exception
if  main    null
throw new illegalargumentexception
if  isasyncrun
thread thread   new thread this      this
thread start
else
runmethodwithoutcatchingexceptions