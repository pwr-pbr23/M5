/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component jpa
import javax persistence entitymanager
import javax persistence entitymanagerfactory
import javax persistence persistenceexception
import org apache camel impl servicesupport
import org springframework orm jpa jpacallback
import org springframework orm jpa jpatemplate
import org springframework orm jpa jpatransactionmanager
import org springframework transaction transactionstatus
import org springframework transaction support transactioncallback
import org springframework transaction support transactiontemplate
/**
* delegates the strategy to the {@link jpatemplate} and {@link transactiontemplate} for transaction handling
*
* @version $revision$
*/
public class jpatemplatetransactionstrategy extends servicesupport implements transactionstrategy
private final jpatemplate jpatemplate
private final transactiontemplate transactiontemplate
public jpatemplatetransactionstrategy jpatemplate jpatemplate  transactiontemplate transactiontemplate
this jpatemplate   jpatemplate
this transactiontemplate   transactiontemplate
/**
* creates a new implementation from the given jpa factory
*/
public static jpatemplatetransactionstrategy newinstance entitymanagerfactory emf
jpatemplate template   new jpatemplate emf
return newinstance emf  template
public static jpatemplatetransactionstrategy newinstance entitymanagerfactory emf  jpatemplate template
jpatransactionmanager transactionmanager   new jpatransactionmanager emf
transactionmanager afterpropertiesset
transactiontemplate tranasctiontemplate   new transactiontemplate transactionmanager
tranasctiontemplate afterpropertiesset
return new jpatemplatetransactionstrategy template  tranasctiontemplate
public object execute final jpacallback callback
return transactiontemplate execute new transactioncallback
public object dointransaction transactionstatus status
return jpatemplate execute new jpacallback
public object doinjpa entitymanager entitymanager  throws persistenceexception
return callback doinjpa entitymanager
protected void dostart   throws exception
protected void dostop   throws exception