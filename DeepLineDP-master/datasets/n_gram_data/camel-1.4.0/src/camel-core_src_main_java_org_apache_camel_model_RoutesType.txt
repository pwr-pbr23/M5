/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel model
import java util arraylist
import java util list
import javax xml bind annotation xmlaccesstype
import javax xml bind annotation xmlaccessortype
import javax xml bind annotation xmlattribute
import javax xml bind annotation xmlelementref
import javax xml bind annotation xmlrootelement
import javax xml bind annotation xmltransient
import org apache camel camelcontext
import org apache camel endpoint
import org apache camel predicate
import org apache camel builder errorhandlerbuilder
import org apache camel processor delegateprocessor
/**
* represents a collection of routes
*
* @version $revision$
*/
@xmlrootelement name
@xmlaccessortype xmlaccesstype field
public class routestype extends optionalidentifiedtype<routestype> implements routecontainer
// todo: not sure how else to use an optional attribute in jaxb2
@xmlattribute
private boolean inheriterrorhandlerflag
@xmlelementref
private list<routetype> routes   new arraylist<routetype>
@xmlelementref
private list<serviceactivationtype> activations   new arraylist<serviceactivationtype>
@xmltransient
private list<interceptortype> interceptors   new arraylist<interceptortype>
@xmltransient
private list<intercepttype> intercepts   new arraylist<intercepttype>
@xmltransient
private list<exceptiontype> exceptions   new arraylist<exceptiontype>
@xmltransient
private camelcontext camelcontext
@xmltransient
private errorhandlerbuilder errorhandlerbuilder
@override
public string tostring
return     routes
// properties
//-----------------------------------------------------------------------
public list<routetype> getroutes
return routes
public void setroutes list<routetype> routes
this routes   routes
public list<interceptortype> getinterceptors
return interceptors
public void setinterceptors list<interceptortype> interceptors
this interceptors   interceptors
public list<intercepttype> getintercepts
return intercepts
public void setintercepts list<intercepttype> intercepts
this intercepts   intercepts
public list<exceptiontype> getexceptions
return exceptions
public void setexceptions list<exceptiontype> exceptions
this exceptions   exceptions
public camelcontext getcamelcontext
return camelcontext
public void setcamelcontext camelcontext camelcontext
this camelcontext   camelcontext
public boolean isinheriterrorhandler
return processortype isinheriterrorhandler getinheriterrorhandlerflag
public boolean getinheriterrorhandlerflag
return inheriterrorhandlerflag
public void setinheriterrorhandlerflag boolean inheriterrorhandlerflag
this inheriterrorhandlerflag   inheriterrorhandlerflag
public errorhandlerbuilder geterrorhandlerbuilder
return errorhandlerbuilder
public void seterrorhandlerbuilder errorhandlerbuilder errorhandlerbuilder
this errorhandlerbuilder   errorhandlerbuilder
// fluent api
//-------------------------------------------------------------------------
/**
* creates a new route
*/
public routetype route
routetype route   createroute
return route route
/**
* creates a new route from the given uri input
*/
public routetype from string uri
routetype route   createroute
route from uri
return route route
/**
* creates a new route from the given endpoint
*/
public routetype from endpoint endpoint
routetype route   createroute
route from endpoint
return route route
public routetype route routetype route
// lets configure the route
route setcamelcontext getcamelcontext
route setinheriterrorhandlerflag getinheriterrorhandlerflag
list<interceptortype> list   getinterceptors
for  interceptortype interceptortype   list
route addinterceptor interceptortype
list<intercepttype> intercepts   getintercepts
for  intercepttype intercept   intercepts
// need to create a proxy for this one and use the
// proceed of the proxy which will be local to this route
intercepttype proxy   intercept createproxy
route addoutput proxy
route pushblock proxy getproceed
route getoutputs   addall getexceptions
getroutes   add route
return route
public routestype intercept delegateprocessor interceptor
getinterceptors   add new interceptorref interceptor
return this
public intercepttype intercept
intercepttype answer   new intercepttype
getintercepts   add answer
return answer
public choicetype intercept predicate predicate
intercepttype answer   new intercepttype
getintercepts   add answer
return answer when predicate
public exceptiontype exception class exceptiontype
exceptiontype answer   new exceptiontype exceptiontype
getexceptions   add answer
return answer
// implementation methods
//-------------------------------------------------------------------------
protected routetype createroute
routetype route   new routetype
errorhandlerbuilder handler   geterrorhandlerbuilder
if  isinheriterrorhandler      handler    null
route seterrorhandlerbuilderifnull handler
return route