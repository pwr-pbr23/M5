/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component jms
import java util arraylist
import java util enumeration
import java util list
import javax jms jmsexception
import javax jms message
import javax jms queuebrowser
import javax jms session
import org apache camel exchange
import org springframework jms core browsercallback
import org springframework jms core jmsoperations
/**
* a default implementation of queue browsing using the spring 2.5.x {@link browsercallback}
* @version $revision$
*/
public class defaultqueuebrowsestrategy implements queuebrowsestrategy
public list<exchange> browse jmsoperations template  string queue  final jmsqueueendpoint endpoint
return   list<exchange>  template browse queue  new browsercallback
public object doinjms session session  queuebrowser browser  throws jmsexception
// todo not the best implementation in the world as we have to browse
// the entire queue, which could be massive
list<exchange> answer   new arraylist<exchange>
enumeration iter   browser getenumeration
while  iter hasmoreelements
message message    message  iter nextelement
jmsexchange exchange   endpoint createexchange message
answer add exchange
return answer