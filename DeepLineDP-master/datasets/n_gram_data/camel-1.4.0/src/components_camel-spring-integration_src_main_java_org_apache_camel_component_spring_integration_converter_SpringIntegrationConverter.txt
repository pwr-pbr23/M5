/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component spring integration converter
import java util map
import org apache camel converter
import org apache camel endpoint
import org apache camel component spring integration springintegrationendpoint
import org apache camel component spring integration springintegrationmessage
import org springframework integration channel messagechannel
import org springframework integration message defaultmessageheader
import org springframework integration message genericmessage
/**
* the <a href="http://activemq.apache.org/camel/type-converter.html">type converters</a>
* for turning the spring integration types into camel native type.
*
* @version $revision$
*/
@converter
public final class springintegrationconverter
private springintegrationconverter
// helper class
/**
* @param spring integration messagechannel
* @return an camel endpoint
* @throws exception
*/
@converter
public static endpoint toendpoint final messagechannel channel  throws exception
if  channel    null
throw new illegalargumentexception
endpoint answer   new springintegrationendpoint    channel  null
// check the channel
return answer
@suppresswarnings
@converter
public static org springframework integration message message tospringmessage final org apache camel message camelmessage  throws exception
if  camelmessage instanceof springintegrationmessage
springintegrationmessage simessage    springintegrationmessage camelmessage
org springframework integration message message message    simessage getmessage
if  message    null
return message
// create a new spring message and copy the attributes and body from the camel message
defaultmessageheader messageheader   new defaultmessageheader
map<string  object> headers   camelmessage getheaders
for  string key   headers keyset
object value   headers get key
messageheader setattribute key  value
return new genericmessage camelmessage getbody    messageheader
@converter
public static org apache camel message tocamelmessage final org springframework integration message message springmessage  throws exception
return new springintegrationmessage springmessage