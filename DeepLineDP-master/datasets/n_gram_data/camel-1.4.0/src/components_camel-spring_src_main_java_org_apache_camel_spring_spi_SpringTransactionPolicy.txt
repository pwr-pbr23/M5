/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel spring spi
import org apache camel processor
import org apache camel spi policy
import org apache commons logging log
import org apache commons logging logfactory
import org springframework transaction platformtransactionmanager
import org springframework transaction support transactiontemplate
/**
* wraps the processor in a spring transaction
*
* @version $revision$
*/
public class springtransactionpolicy<e> implements policy<e>
private static final transient log log   logfactory getlog springtransactionpolicy class
private transactiontemplate template
private string propagationbehaviorname
private platformtransactionmanager transactionmanager
/**
* default constructor for easy spring configuration.
*/
public springtransactionpolicy
public springtransactionpolicy transactiontemplate template
this template   template
public processor wrap processor processor
final transactiontemplate transactiontemplate   gettemplate
if  transactiontemplate    null
log warn
return processor
transactioninterceptor answer   new transactioninterceptor transactiontemplate
answer setprocessor processor
return answer
public transactiontemplate gettemplate
if  template    null
template   new transactiontemplate transactionmanager
if  propagationbehaviorname    null
template setpropagationbehaviorname propagationbehaviorname
return template
public void settemplate transactiontemplate template
this template   template
public void settransactionmanager platformtransactionmanager transactionmanager
this transactionmanager   transactionmanager
public platformtransactionmanager gettransactionmanager
return transactionmanager
public void setpropagationbehaviorname string propagationbehaviorname
this propagationbehaviorname   propagationbehaviorname
public string getpropagationbehaviorname
return propagationbehaviorname