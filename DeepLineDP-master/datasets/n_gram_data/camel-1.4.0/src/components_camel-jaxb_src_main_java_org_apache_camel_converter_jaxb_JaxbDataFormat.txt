/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel converter jaxb
import java io ioexception
import java io inputstream
import java io outputstream
import javax xml bind jaxbcontext
import javax xml bind jaxbexception
import javax xml bind marshaller
import javax xml bind unmarshaller
import org apache camel exchange
import org apache camel spi dataformat
import org apache camel util iohelper
/**
* a <a href="http://activemq.apache.org/camel/data-format.html">data format</a> ({@link dataformat})
* using jaxb2 to marshal to and from xml
*
* @version $revision$
*/
public class jaxbdataformat implements dataformat
private jaxbcontext context
private string contextpath
private boolean prettyprint   true
private marshaller marshaller
private unmarshaller unmarshaller
public jaxbdataformat
public jaxbdataformat jaxbcontext context
this context   context
public jaxbdataformat string contextpath
this contextpath   contextpath
public void marshal exchange exchange  object graph  outputstream stream  throws ioexception
try
getmarshaller   marshal graph  stream
catch  jaxbexception e
throw iohelper createioexception e
public object unmarshal exchange exchange  inputstream stream  throws ioexception  classnotfoundexception
try
return getunmarshaller   unmarshal stream
catch  jaxbexception e
throw iohelper createioexception e
// properties
// -------------------------------------------------------------------------
public jaxbcontext getcontext   throws jaxbexception
if  context    null
context   createcontext
return context
public void setcontext jaxbcontext context
this context   context
public string getcontextpath
return contextpath
public void setcontextpath string contextpath
this contextpath   contextpath
public marshaller getmarshaller   throws jaxbexception
if  marshaller    null
marshaller   getcontext   createmarshaller
return marshaller
public void setmarshaller marshaller marshaller
this marshaller   marshaller
public boolean isprettyprint
return prettyprint
public void setprettyprint boolean prettyprint
this prettyprint   prettyprint
public unmarshaller getunmarshaller   throws jaxbexception
if  unmarshaller    null
unmarshaller   getcontext   createunmarshaller
return unmarshaller
public void setunmarshaller unmarshaller unmarshaller
this unmarshaller   unmarshaller
protected jaxbcontext createcontext   throws jaxbexception
if  contextpath    null
return jaxbcontext newinstance contextpath
else
return jaxbcontext newinstance