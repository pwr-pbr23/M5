/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component cxf util
import javax xml namespace qname
import org apache cxf binding abstractbindingfactory
import org apache cxf binding soap interceptor checkfaultinterceptor
import org apache cxf binding soap interceptor mustunderstandinterceptor
import org apache cxf binding soap interceptor readheadersinterceptor
import org apache cxf binding soap interceptor soapactionininterceptor
import org apache cxf binding soap interceptor soapactionoutinterceptor
import org apache cxf binding soap interceptor soapheaderinterceptor
import org apache cxf binding soap interceptor soapheaderoutfilterinterceptor
import org apache cxf binding soap interceptor soapoutinterceptor
import org apache cxf binding soap interceptor soappreprotocoloutinterceptor
import org apache cxf interceptor attachmentininterceptor
import org apache cxf interceptor attachmentoutinterceptor
import org apache cxf interceptor staxininterceptor
import org apache cxf interceptor staxoutinterceptor
import org apache cxf interceptor urimappinginterceptor
import org apache cxf service service
import org apache cxf service factory reflectionservicefactorybean
import org apache cxf service model endpointinfo
import org apache cxf service model serviceinfo
import org apache cxf wsdl11 wsdlservicefactory
//the service factorybean which just create the service for soap component
public class wsdlsoapservicefactorybean extends reflectionservicefactorybean
private qname servicename
private qname endpointname
@override
public service create
wsdlservicefactory factory   new wsdlservicefactory getbus    getwsdlurl    getserviceqname
setservice factory create
initializesoapinterceptors
//disable the date interceptors
updateendpointinfors
createendpoints
return getservice
private void updateendpointinfors
service service   getservice
for  serviceinfo inf   service getserviceinfos
for  endpointinfo ei   inf getendpoints
//setup the endpoint address
ei setaddress     ei getservice   getname   tostring         ei getname   getlocalpart
// working as the dispatch mode, the binding factory will not add interceptor
ei getbinding   setproperty abstractbindingfactory databinding_disabled  boolean true
// do not handle any payload information here
private void initializesoapinterceptors
getservice   getininterceptors   add new dataininterceptor
getservice   getininterceptors   add new readheadersinterceptor getbus
getservice   getininterceptors   add new mustunderstandinterceptor
getservice   getininterceptors   add new attachmentininterceptor
getservice   getininterceptors   add new soapheaderinterceptor
getservice   getininterceptors   add new checkfaultinterceptor
getservice   getininterceptors   add new urimappinginterceptor
getservice   getininterceptors   add new staxininterceptor
getservice   getininterceptors   add new soapactionininterceptor
getservice   getoutinterceptors   add new dataoutinterceptor
getservice   getoutinterceptors   add new soapactionoutinterceptor
getservice   getoutinterceptors   add new attachmentoutinterceptor
getservice   getoutinterceptors   add new staxoutinterceptor
getservice   getoutinterceptors   add new soapheaderoutfilterinterceptor
getservice   getoutinterceptors   add new soappreprotocoloutinterceptor
getservice   getoutinterceptors   add new soapoutinterceptor getbus
getservice   getoutfaultinterceptors   add new soapoutinterceptor getbus
public void setservicename qname name
servicename   name
public string getservicename
return servicename tostring
public qname getserviceqname
return servicename
public qname getendpointname
// get the endpoint name if it is not set
if  endpointname    null
endpointname   getservice   getendpoints   keyset   iterator   next
return endpointname
public void setendpointname qname name
endpointname   name