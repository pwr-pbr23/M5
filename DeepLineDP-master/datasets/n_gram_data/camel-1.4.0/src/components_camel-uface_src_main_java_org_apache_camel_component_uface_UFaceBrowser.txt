/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component uface
import java beans propertychangelistener
import java beans propertychangesupport
import java util collection
import java util list
import org apache camel endpoint
import org apache camel exchange
import org apache camel impl defaultcamelcontext
import org apache camel impl delegatelifecyclestrategy
import org apache camel spi browsableendpoint
import org apache camel util camelcontexthelper
import org apache camel util objecthelper
import org eclipse core databinding observable realm
import org eclipse core databinding observable list iobservablelist
import org eclipse core databinding observable list writablelist
import org eclipse core databinding observable value writablevalue
import org ufacekit model modelhelper
import org ufacekit ui attributedescriptor
import org ufacekit ui uicomposite
import org ufacekit ui uifactory
import org ufacekit ui beanform beanform
import org ufacekit ui controls celllabelprovider
import org ufacekit ui controls uitable
import org ufacekit ui controls uitablecolumn
import org ufacekit ui layouts gridlayoutdata
/**
* @version $revision$
*/
public class ufacebrowser
private final defaultcamelcontext camelcontext
private iobservablelist endpoints
private propertychangesupport propertychangesupport   new propertychangesupport this
public ufacebrowser defaultcamelcontext camelcontext
objecthelper notnull camelcontext
this camelcontext   camelcontext
this endpoints   new writablelist realm getdefault
// lets add any endpoints already added
list<browsableendpoint> list   camelcontexthelper getsingletonendpoints camelcontext  browsableendpoint class
for  browsableendpoint endpoint   list
if   endpoints contains endpoint
endpoints add endpoint
camelcontext setlifecyclestrategy new delegatelifecyclestrategy camelcontext getlifecyclestrategy
@override
public void onendpointadd endpoint<? extends exchange> endpoint
super onendpointadd endpoint
if  endpoint instanceof browsableendpoint
onbrowsableendpoint  browsableendpoint  endpoint
public void addpropertychangelistener propertychangelistener listener
propertychangesupport addpropertychangelistener listener
public void removepropertychangelistener propertychangelistener listener
propertychangesupport removepropertychangelistener listener
public iobservablelist getendpoints
return endpoints
public defaultcamelcontext getcamelcontext
return camelcontext
public void createbrowserui uicomposite root
uifactory ui   root getfactory
uicomposite splitter   ui newhorizontalsplitpanel root  new gridlayoutdata gridlayoutdata align_center  gridlayoutdata align_center
uitable tree   createendpointtableui splitter
beanform selectionform   new beanform
uitable table   ui newtable splitter  new uitable tableuiinfo new gridlayoutdata gridlayoutdata align_fill  gridlayoutdata align_fill  true  true
selectionform add table  new uitable tablebindinginfo selectionform detaillist    collection class
ui newtablecolumn table  new uitablecolumn tablecolumnuiinfo null  new celllabelprovider
public string getlabel object object
exchange exchange    exchange  object
return exchange getin   getbody string class
ui newtablecolumn table  new uitablecolumn tablecolumnuiinfo null  new celllabelprovider
public string getlabel object object
exchange exchange    exchange  object
return exchange getin   getheaders   tostring
selectionform bind tree getselectionobservable
protected uitable createendpointtableui uicomposite root
beanform form   new beanform
uifactory ui   root getfactory
attributedescriptor bindingdata   form detaillist    collection class
uitable table   ui newtable root  new uitable tableuiinfo null
form add table  new uitable tablebindinginfo bindingdata
ui newtablecolumn table  new uitablecolumn tablecolumnuiinfo null  new celllabelprovider
public string getlabel object object
browsableendpoint endpoint    browsableendpoint  object
return endpoint getendpointuri
writablevalue value   modelhelper createwritablevalue this
form bind value
return table
protected void onbrowsableendpoint browsableendpoint endpoint
endpoints add endpoint