/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component mail
import java io ioexception
import javax mail bodypart
import javax mail message
import javax mail messagingexception
import javax mail multipart
import javax mail internet mimemultipart
import org apache camel converter
/**
* javamail specific converters.
*
* @version $revision$
*/
@converter
public class mailconverters
/**
* converts the given javamail message to a string body.
* can return null.
*/
@converter
public string tostring message message  throws messagingexception  ioexception
object content   message getcontent
if  content instanceof mimemultipart
mimemultipart multipart    mimemultipart  content
if  multipart getcount   > 0
bodypart part   multipart getbodypart 0
content   part getcontent
if  content    null
return content tostring
return null
/**
* converts the given javamail multipart to a string body, where the contenttype of the multipart
* must be text based (ie start with text). can return null.
*/
@converter
public static string tostring multipart multipart  throws messagingexception  ioexception
int size   multipart getcount
for  int i   0  i < size  i
bodypart part   multipart getbodypart i
if  part getcontenttype   startswith
return part getcontent   tostring
return null