/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel converter jaxb
import java util arraylist
import java util hashmap
import java util list
import java util map
import java util set
import javax xml bind annotation xmlaccesstype
import javax xml bind annotation xmlaccessortype
import javax xml bind annotation xmlanyelement
import javax xml bind annotation xmlelementref
import javax xml bind annotation xmlmixed
import javax xml bind annotation xmlrootelement
import javax xml bind annotation xmltransient
import org apache camel message
/**
* represents a jaxb2 representation of a camel {@link message} - <b>important</b>: work in progress!
*
* @version $revision$
*/
@xmlrootelement name
@xmlaccessortype value   xmlaccesstype field
public class messagetype
// todo: xmlelementref to the abstrac class headertype does not work (camel-583)
//@xmlelementref(type = headertype.class)
@xmlanyelement lax   true
@xmlmixed
list<headertype> headers   new arraylist<headertype>
@xmlanyelement lax   true
@xmlmixed
private list content   new arraylist
@xmltransient
private object body
public object getbody
if  body    null
if  content    null
if  content size      1
return content get 0
else
return content
return body
public void setbody object body
this body   body
if  body instanceof list
content    list body
else
content   new arraylist
content add body
public list<headertype> getheaders
return headers
public void setheaders list<headertype> headers
this headers   headers
public map<string  object> getheadermap
map<string  object> answer   new hashmap<string  object>
for  headertype header   headers
answer put header getname    header getvalue
return answer
/**
* copies the headers and body of this object from the given camel message
*
* @param message the camel message to read the headers and body from
*/
public void copyfrom message message
headers clear
set<map entry<string  object>> entries   message getheaders   entryset
for  map entry<string  object> entry   entries
object value   entry getvalue
if  value    null
headers add createheader entry getkey    value
setbody message getbody
/**
* copies the headers and body of this object to the given camel message
*
* @param message the camel message to overwrite its headers and body
*/
public void copyto message message
message setheaders getheadermap
message setbody getbody
protected headertype createheader string key  object value
if  value instanceof string
return new stringheader key   string value
else if  value instanceof integer
return new integerheader key   integer value
else if  value instanceof long
return new longheader key   long value
else
// lets convert to a string
return new stringheader key  value tostring
//return new objectheader(key, value);