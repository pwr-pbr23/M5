/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel spring spi
import org apache camel processor
import org apache camel builder errorhandlerbuilder
import org apache camel builder errorhandlerbuildersupport
import org apache camel processor redeliverypolicy
import org apache camel spi routecontext
import org apache camel util objecthelper
import org springframework beans factory initializingbean
import org springframework transaction support transactiontemplate
/**
* an error handler which will roll the exception back if there is an error
* rather than using the dead letter channel and retry logic.
*
* a delay is also used after a rollback
*
* @version $revision: 1.1 $
*/
public class transactionerrorhandlerbuilder extends errorhandlerbuildersupport implements cloneable  initializingbean
private transactiontemplate transactiontemplate
private redeliverypolicy redeliverypolicy   new redeliverypolicy
public transactionerrorhandlerbuilder
public transactiontemplate gettransactiontemplate
return transactiontemplate
public void settransactiontemplate transactiontemplate transactiontemplate
this transactiontemplate   transactiontemplate
public redeliverypolicy getredeliverypolicy
return redeliverypolicy
public void setredeliverypolicy redeliverypolicy redeliverypolicy
this redeliverypolicy   redeliverypolicy
public errorhandlerbuilder copy
try
return  errorhandlerbuilder  clone
catch  clonenotsupportedexception e
throw new error     e  e
public processor createerrorhandler routecontext routecontext  processor processor  throws exception
return new transactioninterceptor processor  transactiontemplate  redeliverypolicy
public void afterpropertiesset   throws exception
objecthelper notnull transactiontemplate
// builder methods
// -------------------------------------------------------------------------
public transactionerrorhandlerbuilder backoffmultiplier double backoffmultiplier
getredeliverypolicy   backoffmultiplier backoffmultiplier
return this
public transactionerrorhandlerbuilder collisionavoidancepercent short collisionavoidancepercent
getredeliverypolicy   collisionavoidancepercent collisionavoidancepercent
return this
public transactionerrorhandlerbuilder initialredeliverydelay long initialredeliverydelay
getredeliverypolicy   initialredeliverydelay initialredeliverydelay
return this
public transactionerrorhandlerbuilder maximumredeliveries int maximumredeliveries
getredeliverypolicy   maximumredeliveries maximumredeliveries
return this
public transactionerrorhandlerbuilder maximumredeliverydelay long maximumredeliverydelay
getredeliverypolicy   maximumredeliverydelay maximumredeliverydelay
return this
public transactionerrorhandlerbuilder usecollisionavoidance
getredeliverypolicy   usecollisionavoidance
return this
public transactionerrorhandlerbuilder useexponentialbackoff
getredeliverypolicy   useexponentialbackoff
return this