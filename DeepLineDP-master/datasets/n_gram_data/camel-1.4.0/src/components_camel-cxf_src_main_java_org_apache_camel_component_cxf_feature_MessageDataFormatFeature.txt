/**
* licensed to the apache software foundation (asf) under one or more
* contributor license agreements.  see the notice file distributed with
* this work for additional information regarding copyright ownership.
* the asf licenses this file to you under the apache license, version 2.0
* (the "license"); you may not use this file except in compliance with
* the license.  you may obtain a copy of the license at
*
*      http://www.apache.org/licenses/license-2.0
*
* unless required by applicable law or agreed to in writing, software
* distributed under the license is distributed on an "as is" basis,
* without warranties or conditions of any kind, either express or implied.
* see the license for the specific language governing permissions and
* limitations under the license.
*/
package org apache camel component cxf feature
import java util logging logger
import org apache camel component cxf interceptors faultoutinterceptor
import org apache camel component cxf interceptors rawmessagecontentredirectinterceptor
import org apache cxf bus
import org apache cxf common logging logutils
import org apache cxf endpoint client
import org apache cxf endpoint server
import org apache cxf phase phase
/**
* this feature just setting up the cxf endpoint interceptor for handling the
* message in message data format
*/
public class messagedataformatfeature extends abstractdataformatfeature
private static final logger log   logutils getl7dlogger messagedataformatfeature class
// interceptor filiter
// filiter the unused phase interceptor
private static final string remaining_in_phases    phase receive   phase post_invoke
private static final string remaining_out_phases    phase prepare_send  phase write  phase send  phase prepare_send_ending
@override
public void initialize client client  bus bus
removeinterceptorwhichisoutthephases client getininterceptors    remaining_in_phases
removeinterceptorwhichisoutthephases client getendpoint   getininterceptors    remaining_in_phases
client getendpoint   getbinding   getininterceptors   clear
removeinterceptorwhichisoutthephases client getoutinterceptors    remaining_out_phases
removeinterceptorwhichisoutthephases client getendpoint   getoutinterceptors    remaining_out_phases
client getendpoint   getbinding   getoutinterceptors   clear
client getendpoint   getoutinterceptors   add new rawmessagecontentredirectinterceptor
client getendpoint   getbinding   getoutfaultinterceptors   add new faultoutinterceptor
@override
public void initialize server server  bus bus
// currently we do not filiter the bus
// remove the interceptors
removeinterceptorwhichisoutthephases server getendpoint   getservice   getininterceptors    remaining_in_phases
removeinterceptorwhichisoutthephases server getendpoint   getininterceptors    remaining_in_phases
// do not using the binding interceptor any more
server getendpoint   getbinding   getininterceptors   clear
removeinterceptorwhichisoutthephases server getendpoint   getservice   getoutinterceptors    remaining_out_phases
removeinterceptorwhichisoutthephases server getendpoint   getoutinterceptors    remaining_out_phases
// do not use the binding interceptor any more
server getendpoint   getbinding   getoutinterceptors   clear
server getendpoint   getbinding   getoutfaultinterceptors   add new faultoutinterceptor
resetserviceinvokerinterceptor server
server getendpoint   getoutinterceptors   add new rawmessagecontentredirectinterceptor
@override
protected logger getlogger
return log